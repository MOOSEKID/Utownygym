import{v as re,az as _e,B as z,E as V,G as R,b6 as ve,b5 as be,aG as xe,H as Pe,bK as ke,I as M,J as ce,bL as ye,cD as G,a7 as oe,cg as J,cE as X,aJ as Ce,cF as se,bu as Se,z as de,aQ as qe,b9 as Y,bF as Ve,_ as I,d as p,o as u,e as P,w as l,h as s,g as v,t as k,j as w,s as ee,i as Q,f as b,F as O,p as F,m as H,R as te,N as T,W as $,V as we,ad as ue,ba as Le,ai as me,n as j,al as Qe,cG as $e,P as B,T as ne,aj as Z,Q as De,ar as Te,ak as ae}from"./index.ec7eb99e.js";import{Q as le}from"./QScrollArea.7b825e0c.js";import{Q as Oe}from"./QBadge.f11b4156.js";import{Q as Ie}from"./QDrawer.cd602d9b.js";import{Q as Ue}from"./QPage.b13c45b6.js";import{U as Ee,B as Re,A as Be,C as Ae}from"./AddCustomerDialog.d54e37be.js";import{C as Ne}from"./CategorySelect.3b1ceb8f.js";import{Q as ze}from"./QuantityInput.1a908edf.js";import{P as fe}from"./ProductThumbnail.f9748e93.js";import{u as Ge}from"./index.22ce7155.js";import{u as He}from"./order.9b74c8bb.js";import{C as je}from"./AddDiscount.6731a85e.js";import{Q as L}from"./QSkeleton.73bc54f6.js";import"./QResizeObserver.0de2c530.js";import"./QScrollObserver.fe7ed8a7.js";import"./TouchPan.7d0ea6c3.js";import"./touch.9135741d.js";import"./selection.571043d0.js";import"./location.60ab6585.js";import"./QMenu.76199ca9.js";import"./QMarkupTable.22b5d641.js";import"./QPopupEdit.9b1b213c.js";import"./QSelect.ad394656.js";import"./QField.ad3f8f9a.js";import"./QChip.cb7fa0e0.js";import"./rtl.276c3f1b.js";import"./payment-method.c410ea94.js";import"./member.8ccf3331.js";import"./AddressFields.afbf970a.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./category.83d9548f.js";import"./tag.6f04df2c.js";import"./collection.5ec0fec2.js";const{passive:D}=ye;var Me=re({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:_e,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:o,emit:a}){const m=z(!1),t=z(!0),n=z(null),r=z(null);let f=e.initialIndex,i,c;const x=V(()=>"q-infinite-scroll__loading"+(m.value===!0?"":" invisible"));function d(){if(e.disable===!0||m.value===!0||t.value===!1)return;const g=G(i),S=J(i),E=se(i);e.reverse===!1?Math.round(S+E+e.offset)>=Math.round(g)&&_():Math.round(S)<=e.offset&&_()}function _(){if(e.disable===!0||m.value===!0||t.value===!1)return;f++,m.value=!0;const g=G(i);a("load",f,S=>{t.value===!0&&(m.value=!1,oe(()=>{if(e.reverse===!0){const E=G(i),he=J(i),ge=E-g;X(i,he+ge)}S===!0?C():n.value&&n.value.closest("body")&&c()}))})}function y(){f=0}function q(){t.value===!1&&(t.value=!0,i.addEventListener("scroll",c,D)),d()}function C(){t.value===!0&&(t.value=!1,m.value=!1,i.removeEventListener("scroll",c,D),c!==void 0&&c.cancel!==void 0&&c.cancel())}function U(){if(i&&t.value===!0&&i.removeEventListener("scroll",c,D),i=Ce(n.value,e.scrollTarget),t.value===!0){if(i.addEventListener("scroll",c,D),e.reverse===!0){const g=G(i),S=se(i);X(i,g-S)}d()}}function h(g){f=g}function A(g){g=parseInt(g,10);const S=c;c=g<=0?d:Se(d,isNaN(g)===!0?100:g),i&&t.value===!0&&(S!==void 0&&i.removeEventListener("scroll",S,D),i.addEventListener("scroll",c,D))}function N(g){if(K.value===!0){if(r.value===null){g!==!0&&oe(()=>{N(!0)});return}const S=`${m.value===!0?"un":""}pauseAnimations`;Array.from(r.value.getElementsByTagName("svg")).forEach(E=>{E[S]()})}}const K=V(()=>e.disable!==!0&&t.value===!0);R([m,K],()=>{N()}),R(()=>e.disable,g=>{g===!0?C():q()}),R(()=>e.reverse,()=>{m.value===!1&&t.value===!0&&d()}),R(()=>e.scrollTarget,U),R(()=>e.debounce,A);let W=!1;ve(()=>{W!==!1&&i&&X(i,W)}),be(()=>{W=i?J(i):!1}),xe(()=>{t.value===!0&&i.removeEventListener("scroll",c,D)}),Pe(()=>{A(e.debounce),U(),m.value===!1&&N()});const pe=de();return Object.assign(pe.proxy,{poll:()=>{c!==void 0&&c()},trigger:_,stop:C,reset:y,resume:q,setIndex:h,updateScrollTarget:U}),()=>{const g=ke(o.default,[]);return K.value===!0&&g[e.reverse===!1?"push":"unshift"](M("div",{ref:r,class:x.value},ce(o.loading))),M("div",{class:"q-infinite-scroll",ref:n},g)}}});const Fe={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ke(){const{props:e,proxy:{$q:o}}=de(),a=qe(Ve,Y);if(a===Y)return console.error("QPageSticky needs to be child of QLayout"),Y;const m=V(()=>{const d=e.position;return{top:d.indexOf("top")!==-1,right:d.indexOf("right")!==-1,bottom:d.indexOf("bottom")!==-1,left:d.indexOf("left")!==-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),t=V(()=>a.header.offset),n=V(()=>a.right.offset),r=V(()=>a.footer.offset),f=V(()=>a.left.offset),i=V(()=>{let d=0,_=0;const y=m.value,q=o.lang.rtl===!0?-1:1;y.top===!0&&t.value!==0?_=`${t.value}px`:y.bottom===!0&&r.value!==0&&(_=`${-r.value}px`),y.left===!0&&f.value!==0?d=`${q*f.value}px`:y.right===!0&&n.value!==0&&(d=`${-q*n.value}px`);const C={transform:`translate(${d}, ${_})`};return e.offset&&(C.margin=`${e.offset[1]}px ${e.offset[0]}px`),y.vertical===!0?(f.value!==0&&(C[o.lang.rtl===!0?"right":"left"]=`${f.value}px`),n.value!==0&&(C[o.lang.rtl===!0?"left":"right"]=`${n.value}px`)):y.horizontal===!0&&(t.value!==0&&(C.top=`${t.value}px`),r.value!==0&&(C.bottom=`${r.value}px`)),C}),c=V(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function x(d){const _=ce(d.default);return M("div",{class:c.value,style:i.value},e.expand===!0?_:[M("div",_)])}return{$layout:a,getStickyContent:x}}var We=re({name:"QPageSticky",props:Fe,setup(e,{slots:o}){const{getStickyContent:a}=Ke();return()=>a(o)}});const Je={components:{ProductThumbnail:fe},props:{title:String,modelValue:{type:Object,default:()=>({variants:[]})}},data(){return{product:this.modelValue,variant:null}},emits:["ok","hide"],methods:{async show(){console.func("components/shop/VariantDialog:methods.show()",arguments);const{options:e,variants:o}=this.modelValue,a=o.find(t=>t.in_stock);this.variant=a;const m={...this.modelValue,options:e.map(t=>{const n=a.options.find(r=>r.name===t.name);return{...t,value:n==null?void 0:n.value}}),price_formated:a.price_formated,variant_id:a.id,price:a.price,in_stock:a.in_stock,variants:o.map(t=>({compare_at_price:t.compare_at_price,id:t.id,in_stock:t.in_stock,media_id:t.media_id,price:t.price,price_formated:t.price_formated,thumbnail:t.thumbnail,title:t.title}))};this.product=m,this.$refs.dialog.show()},hide(){console.func("components/shop/VariantDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/shop/VariantDialog:methods.onDialogHide()",arguments),this.$emit("hide")},addToCart(){console.func("components/shop/VariantDialog:methods.addToCart()",arguments),this.$emit("ok",{...this.product,default_variant:this.variant}),this.hide()},async onChangeOption(e){console.func("components/shop/VariantDialog:methods.onChangeOption()",arguments);const{options:o,variants:a}=this.product,m=o.map(n=>n.value).join(" / "),t=a.find(n=>n.title===m);this.variant=t,Object.assign(this.product,{price_formated:t.price_formated,price:t.price,variant_id:t.id,in_stock:t.in_stock})}}},Xe={class:"col-xs-12 col-sm-6"},Ye={class:"col-xs-12 col-sm-6"},Ze={class:"q-gutter-y-sm"},et={class:"text-h5 ellipsis title"},tt={class:"text-h6 price"},ot={key:0,class:"q-py-md variants row q-col-gutter-md"},st={class:"cart"};function nt(e,o,a,m,t,n){const r=p("product-thumbnail"),f=p("base-label"),i=p("base-select"),c=p("base-btn"),x=p("base-section"),d=p("base-dialog");return u(),P(d,{title:"Select Variant","body-class":"q-pa-none scroll",ref:"dialog",onHide:n.onDialogHide,"use-separator":"","hide-footer":""},{body:l(()=>[s(x,{flat:"",bordered:""},{default:l(()=>[v("div",Xe,[s(r,{media:t.product.thumbnail},null,8,["media"])]),v("div",Ye,[v("div",Ze,[v("div",et,k(t.product.title),1),v("div",tt,[w(k(t.product.price_formated)+" ",1),t.product.in_stock?Q("",!0):(u(),P(ee,{key:0,size:"sm",square:"",outline:"",color:"negative",label:"SOLD OUT"}))]),t.product.has_variant?(u(),b("div",ot,[(u(!0),b(O,null,F(t.product.options,(_,y)=>(u(),b("div",{class:"variant col-sm-6 col-xs-12",key:y},[s(f,null,{default:l(()=>[w(k(_.name),1)]),_:2},1024),s(i,{ref_for:!0,ref:"variant-"+_.slug,dense:"",outlined:"",square:"",options:_.values,"map-options":"","option-label":"name","option-value":"name","emit-value":"",modelValue:_.value,"onUpdate:modelValue":[q=>_.value=q,n.onChangeOption]},null,8,["options","modelValue","onUpdate:modelValue"])]))),128))])):Q("",!0),v("div",st,[s(c,{square:"",size:"md",padding:"9px 22px",icon:"fad fa-cart-plus",class:"add-to-cart full-width",label:e.$t("addToCart"),disable:!t.product.in_stock,onClick:n.addToCart},null,8,["label","disable","onClick"])])])])]),_:1})]),_:1},8,["onHide"])}var at=I(Je,[["render",nt]]);const lt={components:{QuantityInput:ze},props:{modelValue:Array},emits:["update:model-value"],methods:{onChangeQuantity(e,o){const a=this.modelValue;a[o].quantity=e,this.$emit("update:model-value",a)},onRemoveItem(e){const o=this.modelValue;o.splice(e,1),this.$emit("update:model-value",o)},clear(){this.$emit("update:model-value",[])},async addToCart(e){console.func("pages/admins/orders/PosPage:methods.addToCart()",arguments),e.has_variant?this.$q.dialog({component:at,componentProps:{modelValue:e}}).onOk(o=>{this.addProduct(o)}):this.addProduct(e)},addCustomProduct(e){const o=this.modelValue;o.push(e),this.$emit("update:model-value",o)},addProduct(e){var f,i,c,x;const o=this.modelValue,a=(f=e==null?void 0:e.default_variant)==null?void 0:f.id,m=(i=e==null?void 0:e.default_variant)==null?void 0:i.price,t=(c=e==null?void 0:e.default_variant)==null?void 0:c.taxable,n=(x=e==null?void 0:e.default_variant)==null?void 0:x.title;let r=H.exports.findIndex(o,{product_id:e.id,variant_id:a});if(r>-1){const d=o[r];o[r]={...d,quantity:d.quantity+1}}else o.push({title:e.title,product_id:e.id,variant_id:a,variant_title:n,price:m,total:m,taxable:t,quantity:1});this.$core.debounce(()=>{this.$emit("update:model-value",o)},1e3)}},computed:{hasProduct(){return this.modelValue.length>0}}},it={class:"pos-products"},rt={class:"meta items-center flex"},ct={class:"price text-bold q-mr-md"};function dt(e,o,a,m,t,n){const r=p("quantity-input"),f=p("base-btn"),i=p("base-no-records");return u(),b("div",it,[n.hasProduct?(u(),P(we,{key:0,class:"q-gutter-y-sm"},{default:l(()=>[(u(!0),b(O,null,F(a.modelValue,(c,x)=>(u(),P(te,{class:"bordered",key:x},{default:l(()=>[s(T,null,{default:l(()=>[s($,null,{default:l(()=>[w(k(c.title),1)]),_:2},1024),c.variant_title!=="Default"?(u(),P($,{key:0},{default:l(()=>[w(k(c.variant_title),1)]),_:2},1024)):Q("",!0),s($,null,{default:l(()=>[w(k(e.$core.money(c.price))+" x "+k(c.quantity),1)]),_:2},1024)]),_:2},1024),s(T,{side:""},{default:l(()=>[s($,null,{default:l(()=>[s(r,{style:{width:"120px"},"model-value":c.quantity,"onUpdate:modelValue":d=>n.onChangeQuantity(d,x)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),v("div",rt,[v("div",ct,k(e.$core.money(c.total)),1),s(f,{flat:"",dense:"",color:"grey",onClick:d=>n.onRemoveItem(x),icon:"fas fa-trash-can"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(u(),P(i,{key:1,icon:"fad fa-cart-shopping-fast",title:"Empty Cart",message:"Kindly choose a product from the list to add it to your cart.",height:"200px","container-style":"width: calc(100% - 100px)","icon-size":"35px"}))])}var ut=I(lt,[["render",dt]]);const mt={components:{ProductThumbnail:fe},props:{title:String,price:String,thumbnail:Object,list:Boolean}},ft={key:0},pt={class:"ellipsis-2-lines text-weight-medium"},ht={class:"text-subtitle2"};function gt(e,o,a,m,t,n){const r=p("product-thumbnail");return ue((u(),P(me,{class:"product-card cursor-pointer",flat:""},{default:l(()=>[a.list?(u(),b("div",ft,[s(te,{class:"q-pa-none"},{default:l(()=>[s(T,{avatar:""},{default:l(()=>[s(r,{class:"rounded-border",ratio:1,style:{width:"70px"},media:a.thumbnail},null,8,["media"])]),_:1}),s(T,null,{default:l(()=>[s($,{lines:"1"},{default:l(()=>[w(k(a.title),1)]),_:1}),s($,{class:"text-subtitle2"},{default:l(()=>[w(k(a.price),1)]),_:1})]),_:1})]),_:1})])):(u(),b(O,{key:1},[s(T,null,{default:l(()=>[s(r,{class:"rounded-border",media:a.thumbnail},null,8,["media"])]),_:1}),v("div",pt,k(a.title),1),v("div",ht,k(a.price),1)],64))]),_:1})),[[Le,void 0,"teal-3"]])}var _t=I(mt,[["render",gt]]);const vt={props:{list:Boolean,rowsPerPage:{type:Number,default:18}}},bt={class:"row q-py-md q-col-gutter-md"},xt={key:0},Pt={class:"text-subtitle2"};function kt(e,o,a,m,t,n){return u(),b("div",bt,[(u(!0),b(O,null,F(a.rowsPerPage,(r,f)=>(u(),b("div",{key:f,class:j({"col-xs-12 col-lg-2 col-md-3 col-sm-3":!a.list,"col-xs-12 col-lg-4 col-md-6 col-sm-6":a.list})},[s(me,{class:"product-card cursor-pointer",flat:""},{default:l(()=>[a.list?(u(),b("div",xt,[s(te,{class:"q-pa-none"},{default:l(()=>[s(T,{avatar:""},{default:l(()=>[s(L,{height:"70px",width:"70px",square:"",animation:"fade"})]),_:1}),s(T,null,{default:l(()=>[s($,{lines:"1"},{default:l(()=>[s(L,{type:"text"}),s(L,{width:"80%",type:"text"})]),_:1}),s($,{class:"text-subtitle2"},{default:l(()=>[s(L,{width:"150px",type:"text"})]),_:1})]),_:1})]),_:1})])):(u(),b(O,{key:1},[s(L,{height:"150px",square:"",animation:"fade"}),s(Qe,null,{default:l(()=>[s(L,{type:"text"}),s(L,{width:"90%",type:"text"}),v("div",Pt,[s(L,{width:"90px",type:"text"})])]),_:1})],64))]),_:1})],2))),128))])}var yt=I(vt,[["render",kt]]);const Ct={data(){return{qrcode:null,isScanning:!1}},emits:["detect"],methods:{stopScan(){this.isScanning=!1,document.removeEventListener("keypress",this.onInput),document.removeEventListener("keydown",this.onInput),this.$refs.qrScanner.blur()},onScanSuccess({target:e}){e!=null&&e.value&&this.$core.debounce(()=>{this.$emit("detect",e.value,"scanner"),this.qrcode=null},1e3)},onInput(e){this.$refs.qrScanner.focus()},startScan(){document.addEventListener("keypress",this.onInput),document.addEventListener("keydown",this.onInput),this.isScanning=!0}},beforeUnmount(){this.stopScan()}},St={class:"qr-code-scanner-btn"};function qt(e,o,a,m,t,n){const r=p("base-tooltip"),f=p("base-btn");return u(),b("div",St,[ue(v("input",{"onUpdate:modelValue":o[0]||(o[0]=i=>t.qrcode=i),type:"text",id:"qrScanner",ref:"qrScanner",class:"scanner",onChange:o[1]||(o[1]=(...i)=>n.onScanSuccess&&n.onScanSuccess(...i))},null,544),[[$e,t.qrcode]]),t.isScanning?(u(),P(f,{key:0,color:"negative",icon:"fas fa-barcode-read",onClick:n.stopScan,dense:"",padding:"13px",outline:""},{default:l(()=>[s(r,null,{default:l(()=>[w(k(e.$t("stopScanning")),1)]),_:1})]),_:1},8,["onClick"])):(u(),P(f,{key:1,dense:"",padding:"13px",outline:"",color:"primary",icon:"fas fa-barcode-read",onClick:n.startScan},{default:l(()=>[s(r,null,{default:l(()=>[w(k(e.$t("startScanning")),1)]),_:1})]),_:1},8,["onClick"]))])}var Vt=I(Ct,[["render",qt]]);const ie={customer:void 0,source:"POS",contact:null,billing_address:null,collect_tax:!0,line_items:[],tax_lines:[]},wt=B.getItem("location"),Lt={components:{CategorySelect:Ne,UserSelect:Ee,PosProducts:ut,BillingDetails:Re,ProductCard:_t,ProductCardSkeleton:yt,QrCodeScannerBtn:Vt},data(){return{currentPage:0,lastPage:1,rightDrawerOpen:!0,loading:!0,isGrid:!0,submited:!1,ptintingReceipt:!1,category:void 0,filter:null,latestOrder:B.has("latest-pos"),location:wt,products:[],cart:H.exports.cloneDeep(ie)}},methods:{...ne(Ge,["get","barcodeProduct"]),...ne(He,["calculator","store","pos"]),onLoad(e,o){console.func("pages/admins/orders/PosPage:methods.onLoad()",arguments),this.loading=!0,setTimeout(()=>{var a;this.currentPage<this.lastPage?this.get({page:this.currentPage+1,filter:this.filter,category:this.category,location:(a=this.location)==null?void 0:a.id,rowsPerPage:18,includes:["default_variant","variants","options"]}).then(({meta:m,data:t})=>{const{last_page:n,current_page:r}=m;this.currentPage===0?this.products=t:t.forEach(f=>this.products.push(f)),this.currentPage=r,this.lastPage=n,this.loading=!1,o(r===n)}):(this.loading=!1,o(!0))},100)},onCalculator(){console.func("pages/admins/orders/PosPage:methods.onCalculator()",arguments),this.calculator({...this.cart,location:this.location}).then(e=>{Object.assign(this.cart,e)}).catch(e=>{this.$core.error(e,{title:"Error"})})},onSelectCustomer(e){if(console.func("pages/admins/orders/PosPage:methods.onSelectCustomer()",arguments),e){this.cart.collect_tax=e.collect_tax;const{email:o,phone_number:a}=e;this.cart.contact={email:o,phone_number:a};const{first_name:m,last_name:t,address:n}=e;this.cart.billing_address={...n,first_name:m,last_name:t,phone_number:a}}else this.cart.collect_tax=!0;this.onCalculator()},onCreateCustomer(){console.func("pages/admins/orders/PosPage:methods.onCreateCustomer()",arguments),this.$q.dialog({component:Be,componentProps:{modelValue:{}}}).onOk(e=>{Object.assign(this.cart,{customer:{first_name:e.first_name,last_name:e.last_name,name:e.first_name+" "+e.last_name,phone_number:e.phone_number,email:e.email,address:{...e},collect_tax:!0,email_marketing:!0},contact:{phone_number:e.phone_number,email:e.email}})})},onAddCustomProduct(){console.func("pages/admins/orders/PosPage:methods.onAddCustomProduct()",arguments),this.$q.dialog({component:je}).onOk(e=>{this.$refs.products.addCustomProduct(e)})},onChangeLocation(){console.func("pages/admins/orders/PosPage:methods.onChangeLocation()",arguments),this.$q.dialog({component:Ae,componentProps:{modelValue:this.location||{}}}).onOk(e=>{this.location=H.exports.cloneDeep(e),B.set("location",e),this.onRefresh()})},clearCart(){console.func("pages/admins/orders/PosPage:methods.clearCart()",arguments),this.cart=H.exports.cloneDeep(ie)},onRefresh(){console.func("pages/admins/orders/PosPage:methods.onRefresh()",arguments),this.currentPage=0,this.lastPage=1,this.loading=!0,this.$refs.productList.resume(),this.$refs.productList.trigger()},async printLatestReceipt(){console.func("pages/admins/orders/PosPage:methods.printLatestReceipt()",arguments);const{id:e}=B.getItem("latest-pos");this.ptintingReceipt=!0,this.pos(e).then(()=>{this.ptintingReceipt=!1}).catch(o=>{this.$core.error(o),this.ptintingReceipt=!1})},onSubmit(e){console.func("pages/admins/orders/PosPage:methods.onSubmit()",arguments),this.submited=!0,this.store({...this.cart,payment_method:e,location:this.location}).then(async({data:o})=>{this.submited=!1,B.set("latest-pos",o),this.latestOrder=!0,await this.pos(o.id),this.clearCart()}).catch(o=>{this.submited=!1,this.$core.error(o,{title:"Error"})})},onScanned(e){console.func("pages/admins/orders/PosPage:methods.onScanned()",arguments),this.barcodeProduct(e).then(o=>{const{product:a}=o;this.$refs.products.addToCart({...a,has_variant:!1,default_variant:o})}).catch(()=>{this.$q.notify({message:"Product not found using scanned barcode!",position:"bottom",color:"negative"})})}},computed:{hasCart(){return this.cart.line_items.length>0},smScreen(){return this.$q.screen.gt.sm},drawerWidth(){return this.$q.screen.xs?this.$q.screen.width:400},locationLabel(){var e;return((e=this.location)==null?void 0:e.name)||"Set location"},totalProducts(){return this.cart.line_items_quantity||0}}},Qt={class:"col-xs-12 col-sm-12"},$t={class:"col-xs-12 col-sm-12"},Dt={class:"row q-col-gutter-md"},Tt={key:0,class:"col-xs-12 col-sm-12"};function Ot(e,o,a,m,t,n){const r=p("base-btn"),f=p("category-select"),i=p("base-input"),c=p("qr-code-scanner-btn"),x=p("product-card"),d=p("base-no-records"),_=p("product-card-skeleton"),y=p("base-section"),q=p("user-select"),C=p("pos-products"),U=p("billing-details");return u(),P(Ue,{class:"q-pa-md pos-page"},{default:l(()=>[s(y,{gutter:"md",bordered:"",dense:"",style:{height:"100%"}},{bottom:l(()=>[s(r,{link:"",color:"primary",label:"Add custom product",onClick:n.onAddCustomProduct},null,8,["onClick"]),s(r,{link:"",icon:"fas fa-location-dot",onClick:n.onChangeLocation,class:"q-ml-md",label:n.locationLabel},null,8,["onClick","label"])]),default:l(()=>[v("div",Qt,[s(Z,{class:"q-px-none pos-toolbar"},{default:l(()=>[s(r,{dense:"",padding:"13px",class:"q-mr-sm",outline:"",onClick:o[0]||(o[0]=h=>t.isGrid=!t.isGrid),icon:t.isGrid?"fas fa-grid":"fas fa-list"},null,8,["icon"]),s(f,{class:"q-mr-sm","no-add":"","use-filter":"",placeholder:"All category",style:{width:"250px"},modelValue:t.category,"onUpdate:modelValue":[o[1]||(o[1]=h=>t.category=h),n.onRefresh],clearable:""},null,8,["modelValue","onUpdate:modelValue"]),s(i,{class:"product-search",modelValue:t.filter,"onUpdate:modelValue":[o[2]||(o[2]=h=>t.filter=h),n.onRefresh],outlined:"",clearable:"",placeholder:"Search Product",debounce:"1000",dense:"",style:{width:"100%"}},{append:l(()=>[t.filter?Q("",!0):(u(),P(De,{key:0,name:"fas fa-search",size:"13px"}))]),_:1},8,["modelValue","onUpdate:modelValue"]),s(c,{onDetect:n.onScanned,class:"q-ml-sm qr-scanner"},null,8,["onDetect"])]),_:1})]),v("div",$t,[s(le,{style:{height:"calc(100vh - 257px)"}},{default:l(()=>[s(Me,{ref:"productList",onLoad:n.onLoad,offset:150},{loading:l(()=>[s(_,{"rows-per-page":18,list:!t.isGrid},null,8,["list"])]),default:l(()=>[v("div",Dt,[(u(!0),b(O,null,F(t.products,(h,A)=>(u(),b("div",{key:A,class:j({"col-xs-12 col-lg-2 col-md-3 col-sm-3":t.isGrid,"col-xs-12 col-lg-4 col-md-6 col-sm-6":!t.isGrid})},[s(x,Te({list:!t.isGrid,onClick:N=>e.$refs.products.addToCart(h),ref_for:!0},h),null,16,["list","onClick"])],2))),128)),!t.products.length&&!t.loading?(u(),b("div",Tt,[s(d,{icon:"fad fa-box-open",title:"Product not found",message:"Kindly ensure the accurate product name is entered, as it might not be available in the listing. Alternatively, consider utilizing the custom item option.",height:"350px","icon-size":"75px"})])):Q("",!0)])]),_:1},8,["onLoad"])]),_:1})])]),_:1}),e.$q.screen.lt.md?(u(),P(We,{key:0,position:"bottom-right",offset:[18,18]},{default:l(()=>[s(ee,{onClick:o[3]||(o[3]=h=>e.$refs.cartDrawer.toggle()),fab:"",icon:"fad fa-cart-plus",color:"primary"},{default:l(()=>[s(Oe,{floating:"",color:"orange","text-color":"black",label:n.totalProducts,rounded:"",style:{padding:"5px 7px","font-weight":"bold"}},null,8,["label"])]),_:1})]),_:1})):Q("",!0),s(Ie,{ref:"cartDrawer","show-if-above":"",side:"right",breakpoint:768,width:n.drawerWidth,class:j({"q-py-md q-pr-md":n.smScreen})},{default:l(()=>[v("div",{class:j({"q-pa-md bg-white":!0,"rounded-border":n.smScreen}),style:{height:"100%"}},[s(Z,{class:"q-pb-sm q-px-none"},{default:l(()=>[s(ae,null,{default:l(()=>[s(q,{placeholder:"Select customer",dense:"",outlined:"",modelValue:t.cart.customer,"onUpdate:modelValue":[o[4]||(o[4]=h=>t.cart.customer=h),n.onSelectCustomer],"option-label":h=>`${h.first_name} ${h.last_name}`,disable:t.submited},null,8,["modelValue","onUpdate:modelValue","option-label","disable"])]),_:1}),s(r,{dense:"",padding:"13px",color:"primary",icon:"fas fa-user-plus",onClick:n.onCreateCustomer,disable:t.submited},null,8,["onClick","disable"]),e.$q.screen.xs?(u(),P(r,{key:0,dense:"",outline:"",padding:"13px",color:"grey",class:"q-ml-sm",icon:"fad fa-circle-xmark",onClick:o[5]||(o[5]=h=>e.$refs.cartDrawer.toggle())})):Q("",!0)]),_:1}),s(le,{style:{height:"calc(100% - 270px)"}},{default:l(()=>[s(C,{ref:"products",modelValue:t.cart.line_items,"onUpdate:modelValue":[o[6]||(o[6]=h=>t.cart.line_items=h),n.onCalculator]},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(y,{dense:"",gutter:"md",class:"q-mt-sm bg-grey-2",flat:"","no-row":""},{default:l(()=>[s(U,{ref:"billing",modelValue:t.cart,"onUpdate:modelValue":[o[7]||(o[7]=h=>t.cart=h),n.onCalculator],onMarkedPaid:n.onSubmit},null,8,["modelValue","onMarkedPaid","onUpdate:modelValue"])]),_:1}),s(Z,{class:"q-mt-sm q-px-none"},{default:l(()=>[s(ae,null,{default:l(()=>[s(ee,{padding:"10px",class:"full-width text-black",color:"secondary",label:"Place Order",loading:t.submited,disable:!n.hasCart,onClick:o[8]||(o[8]=h=>e.$refs.billing.onMarkAsPaid())},null,8,["loading","disable"])]),_:1}),t.latestOrder?(u(),P(r,{key:0,padding:"15px",dense:"",class:"q-mr-sm",icon:"fas fa-print",disable:t.submited,loading:t.ptintingReceipt,onClick:n.printLatestReceipt},null,8,["disable","loading","onClick"])):Q("",!0),s(r,{padding:"15px",outline:"",color:"negative",dense:"",icon:"fas fa-cart-circle-xmark",disable:t.submited,onClick:n.clearCart},null,8,["disable","onClick"])]),_:1})],2)]),_:1},8,["width","class"])]),_:1})}var _o=I(Lt,[["render",Ot]]);export{_o as default};
