import{Q as J}from"./QTimeline.c279b714.js";import{_ as D,m as p,d as i,o as d,e as h,S as W,w as l,g as r,t as C,h as n,ah as A,f as b,O as I,i as _,al as L,ad as w,s as y,af as T,X as G,R as Q,N as P,ag as E,j as O,aq as N,ar as X,T as j,F as R,p as B,Q as K,W as H,U as Z,u as $}from"./index.ec7eb99e.js";import{Q as ee}from"./QPage.b13c45b6.js";import{P as oe}from"./ProductsCard.75cab0ba.js";import{C as te,U as se,A as ne,B as re}from"./AddCustomerDialog.d54e37be.js";import{A as le}from"./AddressFields.afbf970a.js";import{A as de}from"./AddressCard.b85d39e7.js";import{Q as ae}from"./QSelect.ad394656.js";import{u as M}from"./order.9b74c8bb.js";import{S as ie}from"./SkeletonSinglePage.dba71dd3.js";import"./QBadge.f11b4156.js";import"./QTd.ce5eb0a5.js";import"./QTable.e99aec6c.js";import"./QMarkupTable.22b5d641.js";import"./QTr.4bf4ade2.js";import"./index.22ce7155.js";import"./tag.6f04df2c.js";import"./category.83d9548f.js";import"./collection.5ec0fec2.js";import"./AddDiscount.6731a85e.js";import"./location.60ab6585.js";import"./QMenu.76199ca9.js";import"./selection.571043d0.js";import"./QPopupEdit.9b1b213c.js";import"./payment-method.c410ea94.js";import"./member.8ccf3331.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./QField.ad3f8f9a.js";import"./QChip.cb7fa0e0.js";import"./rtl.276c3f1b.js";import"./QSkeleton.73bc54f6.js";const ce={components:{Products:oe},props:{modelValue:{type:Array,required:!0},currency:String,canEdit:Boolean,creating:Boolean,view:Boolean,location:{type:Object,required:!1}},emits:["changed-location","update:model-value"],methods:{onChangeLocation(){console.func("components/order/UnfulfillmentCard:methods.onChangeLocation()",arguments),this.$q.dialog({component:te,componentProps:{modelValue:this.location}}).onOk(t=>{this.$emit("changed-location",p.exports.cloneDeep(t))})}},computed:{hasBottom(){return!this.creating&&this.location}}},me={class:"q-mb-sm"},ue={class:"q-pl-sm"};function pe(t,e,a,m,o,s){const f=i("base-btn"),c=i("products");return d(),h(c,{title:"Products",modelValue:a.modelValue,view:a.view,currency:a.currency,"onUpdate:modelValue":e[0]||(e[0]=v=>t.$emit("update:model-value",v))},W({_:2},[s.hasBottom?{name:"bottom",fn:l(()=>[r("div",me,[e[1]||(e[1]=r("span",{class:"text-grey"},"Location:",-1)),r("span",ue,C(a.location.name),1)])]),key:"0"}:void 0,a.canEdit?{name:"action",fn:l(()=>[n(f,{onClick:s.onChangeLocation,link:"",icon:"fas fa-map-marker-edit",label:"Change location",class:"q-ml-md"},null,8,["onClick"])]),key:"1"}:void 0]),1032,["modelValue","view","currency"])}var he=D(ce,[["render",pe]]);const fe={props:{modelValue:{required:!0,type:[Object]},has_customer:{required:!0,type:[Boolean]}},data(){return{customer:this.modelValue}},emits:["ok","hide"],methods:{show(){console.func("components/address-edit:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/address-edit:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/address-edit:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/address-edit:methods.onDone()",arguments),this.$emit("ok",this.customer),this.hide()}}},ge={class:"row q-col-gutter-md"},_e={class:"col-sm-12 col-xs-12"},be={class:"col-sm-12 col-xs-12"},Ce={key:0,class:"col-sm-12 col-xs-12"},ve={class:"q-gutter-sm"};function ye(t,e,a,m,o,s){const f=i("base-dialog");return d(),h(f,{"content-style":"width: 600px; max-width: 95vw",title:"Edit contact information","body-class":"scroll",ref:"dialog",persistent:"",onHide:s.onDialogHide,"use-separator":""},{body:l(()=>[r("div",ge,[r("div",_e,[e[3]||(e[3]=r("div",{class:"text-label"},"Email",-1)),n(A,{dense:"",outlined:"",modelValue:o.customer.email,"onUpdate:modelValue":e[0]||(e[0]=c=>o.customer.email=c),type:"text"},null,8,["modelValue"])]),r("div",be,[e[4]||(e[4]=r("div",{class:"text-label"},"Phone number",-1)),n(A,{dense:"",outlined:"",modelValue:o.customer.phone_number,"onUpdate:modelValue":e[1]||(e[1]=c=>o.customer.phone_number=c),type:"text"},null,8,["modelValue"])]),a.has_customer?(d(),b("div",Ce,[n(I,{dense:"",modelValue:o.customer.update_customer_profile,"onUpdate:modelValue":e[2]||(e[2]=c=>o.customer.update_customer_profile=c),label:"Update customer profile"},null,8,["modelValue"])])):_("",!0)])]),footer:l(()=>[n(L,{class:"text-right"},{default:l(()=>[r("div",ve,[w(n(y,{"no-caps":"",outline:"",label:"Cancel",color:"grey"},null,512),[[T]]),n(y,{"no-caps":"",label:"Update",color:"primary",onClick:s.onDone},null,8,["onClick"])])]),_:1})]),_:1},8,["onHide"])}var ke=D(fe,[["render",ye]]);const Ve={components:{AddressFields:le},props:{modelValue:{type:[Object],required:!0},title:String},data(){return{address:p.exports.cloneDeep(this.modelValue),loading:!1}},emits:["ok","hide"],methods:{show(){console.func("components/order/AddressEdit:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/order/AddressEdit:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/order/AddressEdit:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/order/AddressEdit:methods.onDone()",arguments),this.$emit("ok",this),this.hide()}},computed:{saveLabel(){return"Update"}}},xe={class:"row q-col-gutter-md"},we={class:"col-sm-12 col-xs-12"},Oe={class:"q-gutter-sm"};function De(t,e,a,m,o,s){const f=i("address-fields"),c=i("base-dialog");return d(),h(c,{title:a.title,"body-class":"scroll",ref:"dialog",persistent:"",onHide:s.onDialogHide,"use-separator":""},{body:l(()=>[r("div",xe,[r("div",we,[n(f,{modelValue:o.address,"onUpdate:modelValue":e[0]||(e[0]=v=>o.address=v)},null,8,["modelValue"])])])]),footer:l(()=>[n(L,{class:"text-right"},{default:l(()=>[r("div",Oe,[w(n(y,{"no-caps":"",outline:"",label:t.$t("label.cancel"),color:"grey"},null,8,["label"]),[[T]]),n(y,{"no-caps":"",label:s.saveLabel,color:"primary",onClick:s.onDone},null,8,["label","onClick"])])]),_:1})]),_:1},8,["title","onHide"])}var qe=D(Ve,[["render",De]]);const Ee={components:{UserSelect:se,AddressCard:de},props:{modelValue:{required:!0,type:Object},edit:Boolean,view:Boolean},data(){return{order:p.exports.cloneDeep(this.modelValue),default:p.exports.cloneDeep(this.modelValue)}},emits:["update:model-value","update:customer","update:address"],methods:{onCreateCustomer(t,e){console.func("components/order/CustomerCard:methods.onCreateCustomer()",arguments);const a=t.trim().split(" ");this.$q.dialog({component:ne,componentProps:{modelValue:{first_name:a[0],last_name:a[1]}}}).onOk(m=>{e({first_name:m.first_name,last_name:m.last_name,phone_number:m.phone_number,email:m.email,address:{...m},collect_tax:!0,email_marketing:!0})})},onEditContact(t){console.func("components/order/CustomerCard:methods.onEditContact()",arguments),this.$q.dialog({component:ke,componentProps:{modelValue:Object.assign(this.order.contact||{},{update_customer_profile:Boolean(this.order.contact&&this.order.contact.update_customer_profile)}),has_customer:this.hasCustomer}}).onOk(e=>{console.func("components/order/CustomerCard:methods.onEditContact.onOk()",e),this.order.contact=e,this.$emit("update:model-value",this.order)})},onSelectCustomer(t){if(console.func("components/order/CustomerCard:methods.onSelectCustomer()",arguments),t){this.order.collect_tax=t.collect_tax;const{email:e,phone_number:a}=t;if(!this.default.contact&&(e||a)&&(this.order.contact={email:e,phone_number:a}),!this.default.billing_address){const{first_name:m,last_name:o,phone_number:s,address:f}=t;this.order.billing_address={...f,first_name:m,last_name:o,phone_number:s}}}else this.order.collect_tax=this.default.collect_tax;this.$emit("update:model-value",this.order),this.$emit("update:customer",t)},onEditAddress({title:t,key:e}){console.func("components/order/CustomerCard:methods.onEditAddress()",arguments),this.$q.dialog({component:qe,componentProps:{modelValue:this.order[e]||{},title:t}}).onOk(({address:a})=>{this.order[e]=a,this.$emit("update:model-value",this.order),this.$emit("update:address",a)})}},computed:{hasCustomer(){return Boolean(this.order.customer)},hasBillingAddress(){return Boolean(this.order.billing_address)},hasContact(){return Boolean(this.order.contact)}},watch:{modelValue:{deep:!0,handler(t){this.order=p.exports.cloneDeep(t)}}}},Ue={class:"q-gutter-y-md"},Se={key:0},Ae={key:0,class:"text-grey"},Pe={key:1,class:""},Ne={class:"row flex-center"},Re={key:0},Be={class:"row flex-start"},Le={key:1,class:"text-grey"},Te={key:1,class:"billing-address"},He={class:"row flex-center"};function Ie(t,e,a,m,o,s){const f=i("user-select"),c=i("base-btn"),v=i("base-tooltip"),u=i("address-card"),U=i("base-section");return d(),h(U,{title:"Customer","no-row":""},{action:l(()=>[s.hasCustomer&&a.edit?(d(),h(y,{key:0,onClick:e[0]||(e[0]=V=>t.$refs.customer.clear()),round:"",dense:"",flat:"",color:"primary",icon:"close"})):_("",!0)]),default:l(()=>{var V,q;return[r("div",Ue,[w(n(f,{ref:"customer",placeholder:"Select or create customer",modelValue:o.order.customer,"onUpdate:modelValue":[e[1]||(e[1]=k=>o.order.customer=k),s.onSelectCustomer],"prevent-defaults":"",dense:"",outlined:"","use-input":"","hide-no-option":"","option-label":"name","new-value-mode":"add-unique",onNewValue:s.onCreateCustomer,"no-option-message":"No customer found.",icon:"far fa-search"},{button:l(({onCreate:k})=>[n(G,{class:"q-my-sm"}),n(Q,{dense:"",class:"q-pa-none"},{default:l(()=>[n(P,null,{default:l(()=>[n(y,{flat:"","no-caps":"",class:"add-button",icon:"fad fa-plus-circle",label:"Create new customer",align:"left",onClick:k},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","onNewValue","onUpdate:modelValue"]),[[E,!s.hasCustomer&&a.edit]]),s.hasCustomer?(d(),b("div",Se,[n(c,{link:"",size:"15px",padding:"0",tag:"a",to:{name:"Customer",params:{id:o.order.customer.id}}},{default:l(()=>[O(C(o.order.customer.name),1)]),_:1},8,["to"]),o.order.customer.created_at?(d(),b("div",Ae," Created at: "+C(t.$core.formatDateAsHuman((q=(V=o.order)==null?void 0:V.customer)==null?void 0:q.created_at)),1)):_("",!0),o.order.customer.note?(d(),b("div",Pe,C(o.order.customer.note),1)):_("",!0)])):_("",!0),r("div",null,[r("div",Ne,[e[5]||(e[5]=r("div",{class:"text-bold"},"CONTACT INFORMATION",-1)),n(N),a.edit?(d(),h(c,{key:0,link:"",label:"Edit",onClick:s.onEditContact},null,8,["onClick"])):_("",!0)]),s.hasContact?(d(),b("div",Re,[r("div",Be,[n(c,{link:"",padding:"0",label:o.order.contact.email},null,8,["label"]),n(y,{onClick:e[2]||(e[2]=k=>t.$core.copyToClipboard(o.order.contact.email)),flat:"",dense:"",round:"",padding:"0",size:"xs",icon:"fas fa-clipboard"},{default:l(()=>[n(v,null,{default:l(()=>e[6]||(e[6]=[O("Copy email")])),_:1})]),_:1})]),r("div",null,C(o.order.contact.phone_number),1)])):(d(),b("div",Le,"No contact info provided"))]),s.hasBillingAddress?(d(),b("div",Te,[r("div",He,[e[8]||(e[8]=r("div",{class:"text-bold"},"BILLING ADDRESS",-1)),n(N),n(y,{onClick:e[3]||(e[3]=k=>t.$core.copyToClipboard(o.order.billing_address)),flat:"",dense:"",padding:"0",size:"xs",icon:"fas fa-clipboard",class:"q-mr-xs"},{default:l(()=>[n(v,null,{default:l(()=>e[7]||(e[7]=[O("Copy address")])),_:1})]),_:1}),a.edit?(d(),h(c,{key:0,link:"",padding:"0",label:"Edit",onClick:e[4]||(e[4]=k=>s.onEditAddress({key:"billing_address",title:"Edit billing address"}))})):_("",!0)]),n(u,X({class:"q-mt-sm",ref:"billing"},o.order.billing_address),null,16)])):_("",!0)])]}),_:1})}var Qe=D(Ee,[["render",Ie]]);const je={props:{modelValue:Object},data(){return{order:p.exports.cloneDeep(this.modelValue),cancel_order:{moduleId:this.modelValue.id,reason:"CUSTOMER",restock:!0,refund:!0,send_customer_notification:!0}}},emits:["ok","hide"],methods:{...j(M,["cancel"]),show(){console.func("components/order/CancelOrder:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/order/CancelOrder:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/order/CancelOrder:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/order/CancelOrder:methods.onDone()",arguments),this.cancel(this.cancel_order).then(({data:t,message:e})=>{this.$q.notify(e),this.$emit("ok",t),this.hide()}).catch(t=>{this.$core.error(t,{title:"Error"})})}}},Me={class:"row q-col-gutter-md"},Fe={class:"col-sm-12 col-xs-12"},Ye={key:0,class:"col-sm-12 col-xs-12"},ze={class:"text-weight-medium"},Je={class:"col-sm-12 col-xs-12"},We={class:"col-sm-12 col-xs-12"},Ge={class:"q-gutter-sm"};function Xe(t,e,a,m,o,s){const f=i("base-radio"),c=i("base-checkbox"),v=i("base-dialog");return d(),h(v,{"content-style":"width: 800px; max-width: 95vw",title:"Cancel order","body-class":"scroll",ref:"dialog",persistent:"","use-separator":"",onHide:s.onDialogHide},{body:l(()=>[r("div",Me,[r("div",Fe,[e[5]||(e[5]=r("div",{class:"text-label"},"REASON",-1)),n(ae,{dense:"",outlined:"",modelValue:o.cancel_order.reason,"onUpdate:modelValue":e[0]||(e[0]=u=>o.cancel_order.reason=u),"map-options":"","emit-value":"","options-dense":"",options:[{label:"Customer changed/cancelled order",value:"CUSTOMER"},{label:"Fraudulent order",value:"FRAUD"},{label:"Items unavailable",value:"INVENTORY"},{label:"Payment declined",value:"DECLINED"},{label:"Other",value:"OTHER"}]},null,8,["modelValue"])]),o.order.has_payment?(d(),b("div",Ye,[e[8]||(e[8]=r("div",{class:"text-label"},"REFUND PAYMENT",-1)),r("div",null,[n(f,{modelValue:o.cancel_order.refund,"onUpdate:modelValue":e[1]||(e[1]=u=>o.cancel_order.refund=u),"no-hint":!o.cancel_order.refund,val:!0},{label:l(()=>[r("div",ze," Refund "+C(t.$core.money(o.order.paid_total)),1)]),hint:l(()=>[(d(!0),b(R,null,B(o.order.payments,u=>(d(),h(Q,{class:"q-pa-none",dense:"",key:u.id},{default:l(()=>[n(P,{style:{"min-width":"auto"},avatar:""},{default:l(()=>[n(K,{size:"25px",name:u.payment_method.logo},null,8,["name"])]),_:2},1024),n(P,null,{default:l(()=>[n(H,null,{default:l(()=>[O(C(u.payment_method.name),1)]),_:2},1024),n(H,{caption:""},{default:l(()=>[O(C(t.$core.money(u.amount))+" available to refund ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","no-hint"])]),r("div",null,[n(f,{modelValue:o.cancel_order.refund,"onUpdate:modelValue":e[2]||(e[2]=u=>o.cancel_order.refund=u),"no-hint":o.cancel_order.refund,val:!1},{label:l(()=>e[6]||(e[6]=[r("div",{class:"text-weight-medium"},"Refund later",-1)])),hint:l(()=>e[7]||(e[7]=[r("div",{class:"q-item__label--caption text-caption"}," Your customer won\u2019t be refunded. Refund the amount owed at a later point. ",-1)])),_:1},8,["modelValue","no-hint"])])])):_("",!0),r("div",Je,[e[9]||(e[9]=r("div",{class:"text-label"},"INVENTORY",-1)),n(I,{dense:"",modelValue:o.cancel_order.restock,"onUpdate:modelValue":e[3]||(e[3]=u=>o.cancel_order.restock=u),label:"Restock items"},null,8,["modelValue"])]),r("div",We,[n(c,{dense:"",modelValue:o.cancel_order.send_customer_notification,"onUpdate:modelValue":e[4]||(e[4]=u=>o.cancel_order.send_customer_notification=u)},{default:l(()=>e[10]||(e[10]=[r("div",{class:"text-weight-bold"},"NOTIFY CUSTOMER OF CANCELATION",-1),r("div",null,"Send cancelation details to your customer now",-1)])),_:1},8,["modelValue"])])])]),footer:l(()=>[n(L,{class:"row flex"},{default:l(()=>[n(N),r("div",Ge,[w(n(y,{"no-caps":"",outline:"",label:"Cancel",color:"grey"},null,512),[[T]]),n(y,{"no-caps":"",label:"Done",color:"primary",onClick:s.onDone},null,8,["onClick"])])]),_:1})]),_:1},8,["onHide"])}var Ke=D(je,[["render",Xe]]);const S={source:"Draft Order",customer:null,contact:null,billing_address:null,collect_tax:!0,line_items:[],tax_lines:[]},Ze={components:{SkeletonSinglePage:ie,ProductsCard:he,BillingDetails:re,CustomerCard:Qe},data(){return{loaded:!1,submited:!1,default:p.exports.cloneDeep(S),order:p.exports.cloneDeep(S),options:[]}},methods:{...j(M,["show","store","update","calculator","markAsPaid","duplicate","comment","receipt"]),onLoad(){console.func("pages/admins/orders/OrderPage:methods.onLoad()",arguments),this.show(this.id).then(t=>{this.onAssign(t),this.loaded=!0}).catch(t=>{this.$emit("error",t)})},onSubmit(t){console.func("pages/admins/orders/OrderPage:methods.onSubmit()",arguments);const{payment_method:e}=t||{};this.submited=!0,(this.creating?this.store:this.update)({...this.order,payment_method:e}).then(async({data:m,message:o})=>{this.submited=!1,await this.onAssign(m),await this.$router.push({name:"Order",params:{id:m.id},query:{action:"view"}}),this.$q.notify(o)}).catch(m=>{this.submited=!1,this.$core.error(m,{title:"Error"})})},onReset(){console.func("pages/admins/orders/OrderPage:methods.onReset()",arguments),this.loaded=!1,setTimeout(()=>{this.onAssign(this.default),this.loaded=!0},300)},onAssign(t=S){console.func("pages/admins/orders/OrderPage:methods.onAssign()",arguments),this.order=p.exports.cloneDeep(t),this.default=p.exports.cloneDeep(t)},onCancel(t){console.func("pages/admins/orders/OrderPage:methods.onCancel()",arguments),this.$router.back()},onCreateComment(t){console.func("pages/admins/orders/OrderPage:methods.onCreateComment()",arguments),this.order.logs.splice(0,0,t),this.default=p.exports.cloneDeep(this.order)},onUpdateComment(t){console.func("pages/admins/orders/OrderPage:methods.onUpdateComment()",arguments),this.default=p.exports.cloneDeep(this.order)},onRemoveComment(t){console.func("pages/admins/orders/OrderPage:methods.onRemoveComment()",arguments),this.order.logs.splice(t,1),this.default=p.exports.cloneDeep(this.order)},onCalculator(){console.func("pages/admins/orders/OrderPage:methods.onCalculator()",arguments),this.calculator(Object.assign(p.exports.cloneDeep(this.order),{logs:null})).then(t=>{Object.assign(this.order,t)}).catch(t=>{this.$core.error(t,{title:"Error"})})},onChangeLocation(t){console.func("pages/orders/single:methods.onChangeLocation()",arguments),this.order.location=p.exports.cloneDeep(t),this.submited=!0,this.update(this.order).then(({message:e})=>{this.submited=!1,this.$q.notify(e),this.default=p.exports.cloneDeep(this.order)}).catch(e=>{this.submited=!1,this.$core.error(e,{title:"Error"})})},onMarkedPaid(t){if(console.func("pages/orders/single:methods.onMarkedPaid()",arguments),this.creating)return this.onSubmit({payment_method:t}),!1;this.markAsPaid({moduleId:this.order.id,payment_method:t}).then(({message:e})=>{this.$q.notify(e),this.onLoad()}).catch(e=>{this.$core.error(e,{title:"Error"})})},onDuplicate(){console.func("pages/orders/single:methods.onDuplicate()",arguments),this.duplicate({moduleId:this.order.id}).then(({data:t,message:e})=>{this.$q.notify(e),this.$router.push({name:"Order",params:{id:t.id},query:{action:"edit"}})}).catch(t=>{this.$core.error(t,{title:"Error"})})},onEdit(t){console.func("pages/orders/single:methods.onEdit()",arguments),this.$router.push({name:"Order",params:{id:t.id},query:{action:"edit"}})},onCancelOrder(){console.func("pages/orders/single:methods.onCancelOrder()",arguments),this.$q.dialog({component:Ke,componentProps:{modelValue:this.order}}).onOk(t=>{this.onAssign(t)})}},mounted(){var t,e;this.creating?(Object.assign(this.order,{currency:(t=this.config)==null?void 0:t.currency}),Object.assign(this.default,{currency:(e=this.config)==null?void 0:e.currency}),this.loaded=!0):this.onLoad()},computed:{...Z($,["config"]),id(){return this.$route.params.id},action(){return this.$route.query.action},view(){return this.action!=="edit"},edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},disable(){return this.default&&JSON.stringify(this.order)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.order)!==JSON.stringify(this.default)}}},$e={class:"text-subtitle2"},eo={class:"row q-col-gutter-md"},oo={class:"col-xs-12 col-sm-9"},to={class:"q-gutter-md"},so={class:"col-xs-12 col-sm-3"},no={class:"q-gutter-md"},ro={class:"note"};function lo(t,e,a,m,o,s){const f=i("base-status"),c=i("base-item"),v=i("base-page-toolbar"),u=i("products-card"),U=i("billing-details"),V=i("base-section"),q=i("base-note-card"),k=i("customer-card"),F=i("base-form"),Y=i("skeleton-single-page");return d(),h(ee,{padding:""},{default:l(()=>[o.loaded&&!s.creating?(d(),h(v,{key:0,class:"q-mb-md"},{title:l(()=>[O(C(o.order.formated_id)+" ",1),(d(!0),b(R,null,B(o.order.status,x=>(d(),h(f,{key:x.id,type:x.label},null,8,["type"]))),128)),r("div",$e,C(t.$core.formatDateAsHuman(o.order.created_at))+" from "+C(o.order.source),1)]),actions:l(()=>[w(n(c,{onClick:e[0]||(e[0]=x=>s.onEdit(o.order)),icon:"fas fa-edit",label:"Edit"},null,512),[[E,o.order.can_edit&&s.view]]),w(n(c,{onClick:e[1]||(e[1]=x=>t.receipt(o.order.id)),icon:"fas fa-receipt",label:"Print receipt"},null,512),[[E,o.order.id]]),n(c,{onClick:s.onDuplicate,icon:"fas fa-clone",label:"Duplicate"},null,8,["onClick"]),w(n(c,{onClick:s.onCancelOrder,class:"text-negative",icon:"fas fa-times",label:"Cancel order"},null,8,["onClick"]),[[E,!o.order.is_cancelled]])]),_:1})):_("",!0),o.loaded?(d(),h(F,{key:1,onSubmit:s.onSubmit,onCancel:s.onCancel,onReset:s.onReset,resetable:s.resetable,disable:s.disable,submited:o.submited},{default:l(()=>{var x;return[r("div",eo,[r("div",oo,[r("div",to,[n(u,{view:!s.edit,creating:s.creating,currency:(x=o.order)==null?void 0:x.currency,"can-edit":o.order.can_edit&&!s.creating,modelValue:o.order.line_items,"onUpdate:modelValue":[e[2]||(e[2]=g=>o.order.line_items=g),s.onCalculator],location:o.order.location,onChangedLocation:s.onChangeLocation,bordered:""},null,8,["view","creating","currency","can-edit","modelValue","location","onUpdate:modelValue","onChangedLocation"]),n(V,{bordered:"",title:"Billing details","no-row":""},{default:l(()=>[n(U,{view:!s.edit,ref:"billing","has-payment":"",modelValue:o.order,"onUpdate:modelValue":[e[3]||(e[3]=g=>o.order=g),s.onCalculator],"has-due":o.order.has_due,onMarkedPaid:s.onMarkedPaid},null,8,["view","modelValue","has-due","onMarkedPaid","onUpdate:modelValue"])]),_:1}),s.creating?_("",!0):(d(),h(V,{key:0,bordered:"",title:"Activity",description:"With activity, you can view detailed histories and write notes and comments for order.","body-class":"q-px-lg","no-row":""},{default:l(()=>[n(J,{class:"comments",color:"secondary"},{default:l(()=>[n(q,{"module-action":t.comment,"module-id":o.order.id,class:"comment",creating:"","no-rag":"",onCreate:s.onCreateComment},null,8,["module-action","module-id","onCreate"]),(d(!0),b(R,null,B(o.order.logs,(g,z)=>(d(),h(q,{class:"comment",key:g.id,created_at:g.created_at,onUpdate:s.onUpdateComment,onRemove:ao=>s.onRemoveComment(z),message:g.message,comment:g,user:g.admin,module:"log/Update","module-id":o.order.id},null,8,["created_at","onUpdate","onRemove","message","comment","user","module-id"]))),128))]),_:1})]),_:1}))])]),r("div",so,[r("div",no,[n(k,{bordered:"",edit:s.edit,view:s.view,modelValue:o.order,"onUpdate:modelValue":e[4]||(e[4]=g=>o.order=g),"onUpdate:address":s.onCalculator,"onUpdate:customer":s.onCalculator},null,8,["edit","view","modelValue","onUpdate:address","onUpdate:customer"]),n(V,{bordered:"",title:"Notes","no-row":""},{default:l(()=>[r("div",ro,[n(A,{dense:"",outlined:"",modelValue:o.order.note,"onUpdate:modelValue":e[5]||(e[5]=g=>o.order.note=g),type:"text"},null,8,["modelValue"]),e[6]||(e[6]=r("div",{class:"q-mt-sm"}," These notes are private and won't be shared with the customer. ",-1))])]),_:1})])])])]}),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(d(),h(Y,{key:2}))]),_:1})}var jo=D(Ze,[["render",lo]]);export{jo as default};
