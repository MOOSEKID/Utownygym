import{T as N,m as w,_ as U,o as s,f as S,h as o,w as n,R as q,aY as me,aZ as pe,N as p,W as C,g,Y as he,F as E,p as T,e as V,j as h,t as k,s as D,V as H,i as O,v as fe,a1 as Ce,cA as we,a2 as qe,E as x,B as xe,G as Ee,I as R,ah as se,z as De,b2 as Pe,cB as de,cC as Oe,bb as Ue,U as ge,d as f,aq as Le,X as ve,ad as $,ba as Ne,af as A,cn as Te,co as Be,O as ee,al as Y,Q as $e,cr as Ae,ar as Qe}from"./index.ec7eb99e.js";import{Q as He}from"./QPage.b13c45b6.js";import{u as Ie}from"./index.22ce7155.js";import{u as W,P as be,I as _e}from"./PricingSection.01ae18e1.js";import{u as Ve}from"./location.60ab6585.js";import{C as Fe}from"./CategorySelect.3b1ceb8f.js";import{Q as te}from"./QSelect.ad394656.js";import{u as Me}from"./collection.5ec0fec2.js";import{Q as ze}from"./QMenu.76199ca9.js";import{u as Re}from"./attribute.2c30f9c8.js";import{Q as ye}from"./QChip.cb7fa0e0.js";import{a as Je,u as je}from"./tag.6f04df2c.js";import{S as Ke}from"./SkeletonSinglePage.dba71dd3.js";import{S as Ge}from"./SeoSection.b5bacff3.js";import"./category.83d9548f.js";import"./QTd.ce5eb0a5.js";import"./QTable.e99aec6c.js";import"./QMarkupTable.22b5d641.js";import"./QPopupEdit.9b1b213c.js";import"./QField.ad3f8f9a.js";import"./rtl.276c3f1b.js";import"./selection.571043d0.js";import"./QSkeleton.73bc54f6.js";const We={props:{modelValue:{required:!0}},emits:["update:model-value"],data(){return{options:[]}},methods:{...N(Me,["get"]),onCollectionLoad(e,t){console.func("components/product/CollectionsSelect:methods.onCollectionLoad()",arguments),this.options=[],this.get({filter:e,rowsPerPage:5,sortBy:"name"}).then(({data:i})=>{t(()=>{this.options=i})})},removeCollection(e){console.func("components/product/CollectionsSelect:methods.removeCollection()",arguments);const t=this.modelValue||[];t.splice(e,1),this.$emit("update:model-value",t)},toggleCollection(e){console.func("components/product/CollectionsSelect:methods.toggleCollection()",arguments);const t=this.modelValue||[],i=w.exports.findIndex(t,{name:e.name});i>-1?this.removeCollection(i):(t.push(e),this.$emit("update:model-value",t))},onChange(e){console.func("components/product/CollectionsSelect:methods.onChange()",arguments),this.$emit("update:model-value",e)}}},Ye={class:"collection-select"},Xe=["innerHTML"],Ze={key:0};function et(e,t,i,c,l,a){return s(),S("div",Ye,[o(te,{hint:"Add this product to a collection so it\u2019s easy to find in your store.",style:{"padding-bottom":"30px"},placeholder:"Search for collections","model-value":i.modelValue,options:l.options,"use-input":"","map-options":"","input-debounce":"500",debounce:"500","option-label":"name","option-value":"name",dense:"",outlined:"",multiple:"","popup-content-class":"q-pa-sm base-dropdown",onFilter:a.onCollectionLoad,"onUpdate:modelValue":a.onChange,"display-value":null},{option:n(({itemProps:u,opt:m})=>[o(q,me(pe(u)),{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>[g("span",{innerHTML:m.name},null,8,Xe)]),_:2},1024)]),_:2},1024),o(p,{side:""},{default:n(()=>[o(he,{dense:"",size:"xs","true-value":1,"false-value":0,"model-value":i.modelValue.filter(r=>r.name===m.name).length,"onUpdate:modelValue":r=>a.toggleCollection(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue"]),i.modelValue?(s(),S("div",Ze,[o(H,{class:"bordered",dense:""},{default:n(()=>[(s(!0),S(E,null,T(i.modelValue,(u,m)=>(s(),V(q,{key:m},{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>[h(k(u.name),1)]),_:2},1024)]),_:2},1024),o(p,{side:""},{default:n(()=>[o(D,{size:"xs",color:"primary",icon:"close",round:"",flat:"",onClick:r=>a.removeCollection(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):O("",!0)])}var tt=U(We,[["render",et],["__scopeId","data-v-48933f56"]]);function Z(e,t){return[!0,!1].includes(e)?e:t}var ot=fe({name:"QPagination",props:{...Ce,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||we.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:i}=De(),{$q:c}=i,l=qe(e,c),a=x(()=>parseInt(e.min,10)),u=x(()=>parseInt(e.max,10)),m=x(()=>parseInt(e.maxPages,10)),r=x(()=>Q.value+" / "+u.value),d=x(()=>Z(e.boundaryLinks,e.input)),v=x(()=>Z(e.boundaryNumbers,!e.input)),P=x(()=>Z(e.directionLinks,e.input)),I=x(()=>Z(e.ellipses,!e.input)),M=xe(null),Q=x({get:()=>e.modelValue,set:b=>{if(b=parseInt(b,10),e.disable||isNaN(b))return;const _=Pe(b,a.value,u.value);e.modelValue!==_&&t("update:modelValue",_)}});Ee(()=>`${a.value}|${u.value}`,()=>{Q.value=e.modelValue});const oe=x(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),J=x(()=>e.gutter in de?`${de[e.gutter]}px`:e.gutter||null),ne=x(()=>J.value!==null?`--q-pagination-gutter-parent:-${J.value};--q-pagination-gutter-child:${J.value}`:null),z=x(()=>{const b=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?b.reverse():b}),le=x(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),X=x(()=>Oe(e,"flat")),ae=x(()=>({[X.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ie=x(()=>{const b={[X.value]:!1};return e.activeDesign!==""&&(b[e.activeDesign]=!0),b}),y=x(()=>({...ie.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),j=x(()=>{let b=Math.max(m.value,1+(I.value?2:0)+(v.value?2:0));const _={pgFrom:a.value,pgTo:u.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(u.value).length)}em`}};return m.value&&b<u.value-a.value+1&&(b=1+Math.floor(b/2)*2,_.pgFrom=Math.max(a.value,Math.min(u.value-b+1,e.modelValue-Math.floor(b/2))),_.pgTo=Math.min(u.value,_.pgFrom+b-1),v.value&&(_.boundaryStart=!0,_.pgFrom++),I.value&&_.pgFrom>a.value+(v.value?1:0)&&(_.ellipsesStart=!0,_.pgFrom++),v.value&&(_.boundaryEnd=!0,_.pgTo--),I.value&&_.pgTo<u.value-(v.value?1:0)&&(_.ellipsesEnd=!0,_.pgTo--)),_});function re(b){Q.value=b}function ke(b){Q.value=Q.value+b}const Se=x(()=>{function b(){Q.value=M.value,M.value=null}return{"onUpdate:modelValue":_=>{M.value=_},onKeyup:_=>{Ue(_,13)===!0&&b()},onBlur:b}});function B(b,_,K){const F={"aria-label":_,"aria-current":"false",...ae.value,...b};return K===!0&&Object.assign(F,{"aria-current":"true",...y.value}),_!==void 0&&(e.toFn!==void 0?F.to=e.toFn(_):F.onClick=()=>{re(_)}),R(D,F)}return Object.assign(i,{set:re,setByOffset:ke}),()=>{const b=[],_=[];let K;if(d.value===!0&&(b.push(B({key:"bls",disable:e.disable||e.modelValue<=a.value,icon:z.value[0]},a.value)),_.unshift(B({key:"ble",disable:e.disable||e.modelValue>=u.value,icon:z.value[3]},u.value))),P.value===!0&&(b.push(B({key:"bdp",disable:e.disable||e.modelValue<=a.value,icon:z.value[1]},e.modelValue-1)),_.unshift(B({key:"bdn",disable:e.disable||e.modelValue>=u.value,icon:z.value[2]},e.modelValue+1))),e.input!==!0){K=[];const{pgFrom:F,pgTo:ue,marginalStyle:G}=j.value;if(j.value.boundaryStart===!0){const L=a.value===e.modelValue;b.push(B({key:"bns",style:G,disable:e.disable,label:a.value},a.value,L))}if(j.value.boundaryEnd===!0){const L=u.value===e.modelValue;_.unshift(B({key:"bne",style:G,disable:e.disable,label:u.value},u.value,L))}j.value.ellipsesStart===!0&&b.push(B({key:"bes",style:G,disable:e.disable,label:"\u2026",ripple:!1},F-1)),j.value.ellipsesEnd===!0&&_.unshift(B({key:"bee",style:G,disable:e.disable,label:"\u2026",ripple:!1},ue+1));for(let L=F;L<=ue;L++)K.push(B({key:`bpg${L}`,style:G,disable:e.disable,label:L},L,L===e.modelValue))}return R("div",{class:oe.value,...le.value},[R("div",{class:"q-pagination__content row no-wrap items-center",style:ne.value},[...b,e.input===!0?R(se,{class:"inline",style:{width:`${r.value.length/1.5}em`},type:"number",dense:!0,value:M.value,disable:e.disable,dark:l.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:r.value,min:a.value,max:u.value,...Se.value}):R("div",{class:"q-pagination__middle row justify-center"},K),..._])])}}});const nt=["Color","Size","Design","Weight","Material"],lt={props:{productId:{required:!1,type:Number},modelValue:{required:!0,type:Array},creating:{required:!1,type:Boolean,default:!1}},emits:["update:model-value","update:variants"],data(){return{attributesList:nt,attribute:null,attributes:{},values:[],options:this.modelValue,loading:!1}},methods:{...N(W,["removeOption","removeOptionValue"]),...N(Re,{attributeList:"get",attributeShow:"show"}),createValue(e,t,i){console.func("components/product/OptionSection:method.createValue()",arguments);const c=i.values.find(l=>l.name===e);t(c||{name:e},"add-unique")},onChange(e,t){console.func("components/product/OptionSection:method.onChange()",arguments),this.$emit("update:model-value",this.options)},onAddOption(e){console.func("components/product/OptionSection:method.onAddOption()",arguments),this.options.push(e),this.$emit("update:model-value",this.options)},onRemoveOption(e,t){console.func("components/product/OptionSection:method.onRemoveOption()",arguments),this.$core.confirm("Are you sure you want to remove?").then(()=>{this.removeOption({position:e,option:t}).then(()=>{this.options.splice(e,1),this.$emit("update:variants",this.options)}).catch(i=>{this.$core.error(i,{title:"Error"})})})},onAddOptionValue(e,t,i){console.func("components/product/OptionSection:method.onAddOptionValue()",arguments);const c=w.exports.cloneDeep(this.options);c[i].values.push(e),this.$emit("update:variants",c)},onRemoveOptionValue(e,t,i){if(console.func("components/product/OptionSection:method.onRemoveOptionValue()",arguments),!this.hasVariant(i,e.name))return!1;this.removeOptionValue({position:i,value:e.name,option:t}).catch(c=>{this.$core.error(c,{title:"Error"})})},getAttributes(e){console.func("components/product/OptionSection:method.getAttributes()",arguments),this.loading=!0,this.attributeList(e).then(t=>{this.attributes=t,this.loading=!1}).catch(t=>{this.loading=!1,this.$core.error(t,{title:"Error"})})},onLoadAttributes(e){console.func("components/product/OptionSection:method.onLoadAttributes()",arguments),this.getAttributes({})},onLoadAttributeOptions(e,t,i,c){if(console.func("components/product/OptionSection:methods.onLoadAttributeOptions()",arguments),this.values=[],!c.attribute_id){i();return}this.attributeShow(c.attribute_id).then(l=>{t(()=>{const a=e.toLowerCase();this.values=l.values.filter(u=>u.name.toLowerCase().indexOf(a)>-1)})})}},computed:{...ge(W,["hasVariant"])},watch:{modelValue:{deep:!0,handler(e){this.options=e}}}},at={class:"option-section"},it={class:"flex items-center"},st={class:"row q-col-gutter-sm"},rt={class:"col-sm-2 col-xs-12"},ut={class:"col-sm-10 col-xs-12"},dt={class:"q-gutter-sm"};function ct(e,t,i,c,l,a){const u=f("base-label"),m=f("base-btn");return s(),S("div",at,[(s(!0),S(E,null,T(l.options,(r,d)=>(s(),S("div",{key:d,class:"q-mb-md option"},[g("div",it,[o(u,null,{default:n(()=>[h(k(e.$t("label.option"))+" "+k(d+1),1)]),_:2},1024),o(Le),l.options.length>1?(s(),V(m,{key:0,link:"",class:"q-ml-sm",padding:"0",label:e.$t("label.remove"),onClick:v=>a.onRemoveOption(d,r)},null,8,["label","onClick"])):O("",!0)]),g("div",st,[g("div",rt,[o(te,{"options-dense":"",dense:"",outlined:"",modelValue:r.name,"onUpdate:modelValue":v=>r.name=v,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:l.attributesList,onInputValue:v=>r.name=v,"hide-dropdown-icon":""},null,8,["modelValue","onUpdate:modelValue","options","onInputValue"])]),g("div",ut,[o(te,{"options-dense":"",dense:"",outlined:"",modelValue:r.values,"onUpdate:modelValue":[v=>r.values=v,v=>a.onChange(v,r)],"map-options":"","use-chips":"","use-input":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","option-label":"name","option-value":"id",onNewValue:(v,P)=>a.createValue(v,P,r),onAdd:({value:v})=>a.onAddOptionValue(v,r,d),onRemove:({value:v})=>a.onRemoveOptionValue(v,r,d),onFilter:(v,P,I)=>a.onLoadAttributeOptions(v,P,I,r),options:l.values,hint:"Separate options with comma"},null,8,["modelValue","onUpdate:modelValue","onNewValue","onAdd","onRemove","onFilter","options"])])]),o(ve,{class:"q-mt-sm"})]))),128)),g("div",dt,[o(D,{"no-caps":"",outline:"",label:e.$t("label.selectOptionsFromAttribue"),color:"primary",loading:l.loading},{default:n(()=>[o(ze,{fit:"",onBeforeShow:a.onLoadAttributes},{default:n(()=>[l.loading?O("",!0):(s(),V(H,{key:0,dense:"",style:{"min-width":"100px"},class:"q-pa-sm"},{default:n(()=>[(s(!0),S(E,null,T(l.attributes.data,r=>$((s(),V(q,{class:"rounded-borders",onClick:d=>a.onAddOption({id:!1,name:r.name,is_custom:!1,is_variant:!0,attribute_id:r.id,values:[]}),disable:l.options.map(d=>d.attribute_id).includes(r.id),key:r.id,clickable:""},{default:n(()=>[o(p,null,{default:n(()=>[h(k(r.name),1)]),_:2},1024)]),_:2},1032,["onClick","disable"])),[[Ne],[A]])),128)),l.attributes.meta&&l.attributes.meta.last_page>1?(s(),V(q,{key:0},{default:n(()=>[o(p,{class:"flex-center"},{default:n(()=>[o(ot,{modelValue:l.attributes.meta.current_page,"onUpdate:modelValue":t[0]||(t[0]=r=>l.attributes.meta.current_page=r),max:l.attributes.meta.last_page,input:"",onInput:t[1]||(t[1]=r=>{a.getAttributes({page:r})})},null,8,["modelValue","max"])]),_:1})]),_:1})):O("",!0)]),_:1}))]),_:1},8,["onBeforeShow"])]),_:1},8,["label","loading"]),o(D,{"no-caps":"",outline:"",label:e.$t("label.createCustomOption"),onClick:t[2]||(t[2]=r=>a.onAddOption({id:!1,name:l.attributesList[Math.floor(Math.random()*l.attributesList.length)],is_custom:!0,attribute_id:!1,values:[]}))},null,8,["label"])])])}var mt=U(lt,[["render",ct]]);const pt={props:{modelValue:{}},emits:["update:model-value"],data(){return{options:[]}},methods:{...N(Je,["get"]),onTagLoad(e,t){console.func("components/product/TagsSelect:methods.onTagLoad()",arguments),this.options=[],this.get({filter:e,rowsPerPage:5,sortBy:"name"}).then(({data:i})=>{t(()=>{this.options=i})})},createTag(e,t){if(console.func("components/product/TagsSelect:methods.createTag()",arguments),e.length>0){const i=(this.modelValue||[]).slice();e.split(/[,;|]+/).map(c=>c.trim()).filter(c=>c.length>0).forEach(c=>{i.find(l=>l.name===c)||i.push({name:c})}),t(null),this.$refs.tags.updateInputValue("",!0),this.$emit("update:model-value",i)}},toggleTag(e){console.func("components/product/TagsSelect:methods.toggleTag()",arguments);const t=this.modelValue||[],i=this.$_.findIndex(t,{name:e.name});i>-1?this.removeTag(i):t.push(e),this.$emit("update:model-value",t)},removeTag(e){console.func("components/product/TagsSelect:methods.removeTag()",arguments);const t=this.modelValue||[];t.splice(e,1),this.$emit("update:model-value",t)},onChange(e){console.func("components/product/TagsSelect:methods.onChange()",arguments),this.$emit("update:model-value",e)}}},ht={class:"tags-select"},ft=["innerHTML"],gt={key:0,class:"q-mt-sm"},vt={class:"q-gutter-xs"};function bt(e,t,i,c,l,a){return s(),S("div",ht,[o(te,{"options-dense":"","model-value":i.modelValue,placeholder:"Vintage, cotton, summer",options:l.options,ref:"tags","use-input":"","map-options":"","hide-selected":"","input-debounce":"500",debounce:"500","option-label":"name","option-value":"name",dense:"",outlined:"",multiple:"","use-chips":"","onUpdate:modelValue":a.onChange,onFilter:a.onTagLoad,onNewValue:a.createTag,"display-value":null},{option:n(({itemProps:u,opt:m})=>[o(q,me(pe(u)),{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>[g("span",{innerHTML:m.name},null,8,ft)]),_:2},1024)]),_:2},1024),o(p,{side:""},{default:n(()=>[o(he,{dense:"",size:"xs","true-value":1,"false-value":0,"model-value":e.tags.filter(r=>r.name===m.name).length,"onUpdate:modelValue":r=>a.toggleTag(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","options","onUpdate:modelValue","onFilter","onNewValue"]),i.modelValue?(s(),S("div",gt,[g("div",vt,[(s(!0),S(E,null,T(i.modelValue,(u,m)=>(s(),V(ye,{square:"",key:m,removable:"",onRemove:r=>a.removeTag(m)},{default:n(()=>[h(k(u.name),1)]),_:2},1032,["onRemove"]))),128))])])):O("",!0)])}var _t=U(pt,[["render",bt]]);const Vt='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>';var yt=fe({name:"QSpinnerDots",props:Te,setup(e){const{cSize:t,classes:i}=Be(e);return()=>R("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:Vt})}});const kt={components:{PricingCard:be,InventoryCard:_e},props:{modelValue:{required:!0,type:Object},creating:{required:!1,type:Boolean,default:!1}},data(){return{variant:w.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{show(){console.func("components/product/VariantEditDialog:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/VariantEditDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/VariantEditDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){this.$emit("ok",this.variant),this.hide()},onCancel(){this.hide()}}},St={class:"q-gutter-sm"};function Ct(e,t,i,c,l,a){const u=f("pricing-card"),m=f("inventory-card"),r=f("base-dialog");return s(),V(r,{title:`Edit ${l.variant.title}`,"content-style":"width: 800px; max-width: 95vw","body-class":"scroll q-pa-none",ref:"dialog",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[i.creating?(s(),V(q,{key:0,class:"q-py-md",tag:"label",style:{"min-height":"auto"}},{default:n(()=>[o(p,{style:{"min-width":"auto"},top:"",avatar:""},{default:n(()=>[o(ee,{dense:"",modelValue:l.variant.create_on_save,"onUpdate:modelValue":t[0]||(t[0]=d=>l.variant.create_on_save=d)},null,8,["modelValue"])]),_:1}),o(p,{top:""},{default:n(()=>[o(C,{class:"text-subtitle2"},{default:n(()=>t[3]||(t[3]=[h(" Create this variant ")])),_:1}),l.variant.create_on_save?O("",!0):(s(),V(C,{key:0,caption:"",lines:"2"},{default:n(()=>t[4]||(t[4]=[h(" This variant will not be created when you save this product. ")])),_:1}))]),_:1})]),_:1})):O("",!0),i.creating&&l.variant.create_on_save||!i.creating?(s(),S(E,{key:1},[o(u,{flat:"",modelValue:l.variant,"onUpdate:modelValue":t[1]||(t[1]=d=>l.variant=d),title:""},null,8,["modelValue"]),o(ve),o(m,{flat:"",modelValue:l.variant,"onUpdate:modelValue":t[2]||(t[2]=d=>l.variant=d)},null,8,["modelValue"])],64)):O("",!0)]),footer:n(()=>[o(Y,{class:"text-right"},{default:n(()=>[g("div",St,[o(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey",onClick:a.onCancel},null,8,["label","onClick"]),o(D,{"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["label","onClick"])])]),_:1})]),_:1},8,["title","onHide"])}var wt=U(kt,[["render",Ct]]);const qt={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue),money:{decimal:".",separator:",",prefix:"$ ",precision:2,minimumFractionDigits:2,masked:!1,nullValue:0},price:0}},emits:["ok","hide"],methods:{show(){console.func("components/product/EditPrices:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/EditPrices:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditPrices:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditPrices:methods.onDone()",arguments),this.$emit("ok",this.variants),this.hide()},onChange(){console.func("components/product/EditPrices:methods.onChange()",arguments),this.variants=this.variants.map(e=>({...e,price:this.price}))}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},xt={class:"col"},Et={class:"col-auto q-ml-sm"},Dt={class:"q-gutter-sm"};function Pt(e,t,i,c,l,a){const u=f("base-price-input"),m=f("base-dialog");return s(),V(m,{title:"Edit prices",ref:"dialog","body-class":"scroll",persistent:"","use-separator":"",onHide:a.onDialogHide},{body:n(()=>[o(H,{class:"bordered"},{default:n(()=>[o(q,{class:"q-pl-none q-pr-none"},{default:n(()=>[o(p,null,{default:n(()=>[o(C,{class:""},{default:n(()=>t[1]||(t[1]=[h("Apply a price to all variants")])),_:1}),o(C,{class:"row"},{default:n(()=>[g("div",xt,[o(u,{dense:"",outlined:"",modelValue:l.price,"onUpdate:modelValue":t[0]||(t[0]=r=>l.price=r)},null,8,["modelValue"])]),g("div",Et,[o(D,{"no-caps":"",outline:"",padding:"10px 15px",color:"grey",class:"bg-green-1",label:e.$t("label.applyToAll"),onClick:a.onChange},null,8,["label","onClick"])])]),_:1})]),_:1})]),_:1}),(s(!0),S(E,null,T(l.variants,(r,d)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:d},{default:n(()=>[o(p,{class:"text-bold"},{default:n(()=>[o(C,null,{default:n(()=>[h(k(r.title),1)]),_:2},1024)]),_:2},1024),o(p,{side:"",class:"align-right"},{default:n(()=>[o(u,{dense:"",outlined:"",modelValue:r.price,"onUpdate:modelValue":v=>r.price=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[o(Y,{class:"text-right"},{default:n(()=>[g("div",Dt,[$(o(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[A]]),o(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var Ot=U(qt,[["render",Pt]]);const Ut={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue),quantity:0,locations:[],location:null,inventories:[]}},emits:["ok","hide"],methods:{...N(Ve,["get"]),show(){console.func("components/product/EditQuantity:methods.show()",arguments),this.get().then(({data:e})=>{this.locations=e,this.$refs.dialog.show()}).catch(e=>{this.$core.error(e,{title:"Error"})})},hide(){console.func("components/product/EditQuantity:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditQuantity:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditQuantity:methods.onDone()",arguments),this.inventories.forEach(e=>{const t=this.variants.find(i=>i.id===e.variant.id);t&&(t.inventories.find(i=>i.location.id===e.location.location.id).available=e.location.available)}),this.$emit("ok",this.variants),this.hide()},onChange(){console.func("components/product/EditQuantity:methods.onChange()",arguments),this.inventories.forEach(e=>{e.location.available=this.quantity})},onSelect(e){console.func("components/product/EditQuantity:methods.onSelect()",arguments),this.variants.forEach(t=>{this.inventories.push({variant:t,location:t.inventories.find(i=>i.location.id===e.id)})}),this.location=e}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},Lt={class:"text-weight-bold"},Nt={class:"col"},Tt={class:"col-auto q-ml-sm"},Bt={class:"q-gutter-sm"};function $t(e,t,i,c,l,a){const u=f("base-dialog");return s(),V(u,{title:"Edit quantities",ref:"dialog","body-class":"scroll",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[o(H,{class:"bordered"},{default:n(()=>[l.location?(s(),S(E,{key:1},[o(q,{class:"q-pt-none q-pl-none q-pr-none"},{default:n(()=>[o(p,null,{default:n(()=>[o(C,{class:"q-mb-sm"},{default:n(()=>[t[2]||(t[2]=h("Editing quantities at ")),g("span",Lt,k(l.location.name),1),t[3]||(t[3]=h("."))]),_:1}),o(C,{class:""},{default:n(()=>t[4]||(t[4]=[h(" Apply a quantity to all variants ")])),_:1}),o(C,{class:"row"},{default:n(()=>[g("div",Nt,[o(se,{dense:"",outlined:"",modelValue:l.quantity,"onUpdate:modelValue":t[0]||(t[0]=m=>l.quantity=m),type:"number"},null,8,["modelValue"])]),g("div",Tt,[o(D,{"no-caps":"",outline:"",padding:"8px 15px",color:"grey",class:"bg-green-1",label:e.$t("label.applyToAll"),onClick:a.onChange},null,8,["label","onClick"])])]),_:1})]),_:1})]),_:1}),(s(!0),S(E,null,T(l.inventories,(m,r)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:r},{default:n(()=>[o(p,{class:"text-bold"},{default:n(()=>[o(C,null,{default:n(()=>[h(k(m.variant.title),1)]),_:2},1024)]),_:2},1024),o(p,{side:"",class:"align-right"},{default:n(()=>[o(se,{dense:"",outlined:"",modelValue:m.location.available,"onUpdate:modelValue":d=>m.location.available=d,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))],64)):(s(),S(E,{key:0},[o(q,{dense:"",class:"q-pt-none q-pl-none q-pr-none"},{default:n(()=>[o(p,null,{default:n(()=>[o(C,{class:""},{default:n(()=>t[1]||(t[1]=[h(" Choose a location where you want to edit quantities. ")])),_:1})]),_:1})]),_:1}),(s(!0),S(E,null,T(l.locations,(m,r)=>(s(),V(q,{clickable:"",key:r,onClick:d=>a.onSelect(m)},{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>[h(k(m.name),1)]),_:2},1024)]),_:2},1024),o(p,{side:""},{default:n(()=>[o($e,{name:"fal fa-angle-right"})]),_:1})]),_:2},1032,["onClick"]))),128))],64))]),_:1})]),footer:n(()=>[o(Y,{class:"text-right"},{default:n(()=>[g("div",Bt,[$(o(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[A]]),o(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var At=U(Ut,[["render",$t]]);const Qt={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{show(){console.func("components/product/EditSkus:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/EditSkus:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditSkus:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditSkus:methods.onDone()",arguments),this.$emit("ok",this.variants),this.hide()}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},Ht={class:"q-gutter-sm"};function It(e,t,i,c,l,a){const u=f("base-input"),m=f("base-dialog");return s(),V(m,{title:"Edit SKUs ",ref:"dialog","body-class":"scroll","use-separator":"",persistent:"",onHide:a.onDialogHide},{body:n(()=>[o(H,{class:"bordered"},{default:n(()=>[(s(!0),S(E,null,T(l.variants,(r,d)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:d},{default:n(()=>[o(p,{class:"text-bold"},{default:n(()=>[o(C,null,{default:n(()=>[h(k(r.title),1)]),_:2},1024)]),_:2},1024),o(p,{side:"",class:"align-right"},{default:n(()=>[o(u,{dense:"",outlined:"",modelValue:r.sku,"onUpdate:modelValue":v=>r.sku=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[o(Y,{class:"text-right"},{default:n(()=>[g("div",Ht,[$(o(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[A]]),o(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var Ft=U(Qt,[["render",It]]);const Mt={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{show(){console.func("components/product/EditBarcodes:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/EditBarcodes:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditBarcodes:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditBarcodes:methods.onDone()",arguments),this.$emit("ok",this.variants),this.hide()}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},zt={class:"q-gutter-sm"};function Rt(e,t,i,c,l,a){const u=f("base-input"),m=f("base-dialog");return s(),V(m,{title:"Edit barcodes","body-class":"scroll",ref:"dialog",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[o(H,{class:"bordered"},{default:n(()=>[(s(!0),S(E,null,T(l.variants,(r,d)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:d},{default:n(()=>[o(p,{class:"text-bold"},{default:n(()=>[o(C,null,{default:n(()=>[h(k(r.title),1)]),_:2},1024)]),_:2},1024),o(p,{side:"",class:"align-right"},{default:n(()=>[o(u,{dense:"",outlined:"",modelValue:r.barcode,"onUpdate:modelValue":v=>r.barcode=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[o(Y,{class:"text-right"},{default:n(()=>[g("div",zt,[$(o(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[A]]),o(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var Jt=U(Mt,[["render",Rt]]);const jt={props:{inventories:{required:!0,type:Array},track_inventory:{required:!0,type:Boolean,default:!1}},computed:{available(){return this.activeLocation.length?this.activeLocation.map(e=>parseInt(e.available)).reduce((e,t)=>e+t):0},activeLocation(){return this.inventories.filter(e=>e.active)}}};function Kt(e,t,i,c,l,a){return s(),V(C,null,{default:n(()=>[i.track_inventory?(s(),S(E,{key:0},[h(k(a.available)+" available at "+k(a.activeLocation.length)+" locations ",1)],64)):(s(),S(E,{key:1},[h("Stocked at "+k(a.activeLocation.length)+" locations",1)],64))]),_:1})}var Gt=U(jt,[["render",Kt]]);const Wt={components:{InventoryLabel:Gt,FileSelector:Ae},props:{modelValue:{required:!0},product:{required:!1,type:Object},creating:{required:!1,type:Boolean,default:!1},editing:{required:!1,type:Boolean,default:!1}},data(){return{selected:[],loading:!0,selection:!1}},emits:["update:model-value"],methods:{...N(W,["get","edit","changeList","clear"]),onLoad(){console.func("components/product/VariantsSection:method.onLoad()",arguments),this.product.id?this.get({product_id:this.product.id}).then(()=>{this.loading=!1}).catch(e=>{this.loading=!1,this.$core.error(e,{title:"Error"})}):this.loading=!1},onEditVariant(e){console.func("components/product/VariantsSection:method.onEditVariant()",arguments),this.creating||this.hasNewVariant||this.editing?this.$q.dialog({component:wt,componentProps:{modelValue:e,creating:this.creating||isNaN(e.id)}}).onOk(t=>{console.func("components/product/VariantsSection:methods.onEditVariant.onOk()",arguments),this.edit(t).then(()=>{this.$emit("update:model-value",this.variants)})}):this.$router.push({name:"Products Variant",params:{product_id:this.product.id,variant_id:e.id}})},onUpdateThumbnail(e,t){console.func("components/product/VariantsSection:method.onUpdateThumbnail()",arguments);const i=w.exports.cloneDeep(t);this.edit(Object.assign(i,{thumbnail:e})).then(()=>{this.$emit("update:model-value",this.variants)})},onEditPrices(){console.func("components/product/VariantsSection:method.onEditPrices()",arguments),this.$q.dialog({component:Ot,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(t=>{this.$emit("update:model-value",w.exports.cloneDeep(t)),this.loading=!1})})},onEditQuantities(){console.func("components/product/VariantsSection:method.onEditQuantities()",arguments),this.$q.dialog({component:At,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(t=>{this.$emit("update:model-value",w.exports.cloneDeep(t)),this.loading=!1})})},onEditSKUs(){console.func("components/product/VariantsSection:method.onEditSKUs()",arguments),this.$q.dialog({component:Ft,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(t=>{this.$emit("update:model-value",w.exports.cloneDeep(t)),this.loading=!1})})},onEditBarcode(){console.func("components/product/VariantsSection:method.onEditBarcode()",arguments),this.$q.dialog({component:Jt,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(t=>{this.$emit("update:model-value",w.exports.cloneDeep(t)),this.loading=!1})})},onSelect(){this.selected.length&&this.selected.length<this.variants.length?this.variants.filter(e=>!this.selected.includes(e.id)).forEach(e=>{this.selected.push(e.id)}):this.selected.length===this.variants.length?this.selected=[]:this.selected=this.variants.map(e=>e.id)}},computed:{...ge(W,{variants:"rows",default:"default"}),hasNewVariant(){return this.variants.filter(e=>isNaN(e.id)).length>0},length(){return this.selected.length||this.variants.length},inventoriesAvailable(){const e=[];return this.variants.filter(t=>t.track_inventory).forEach(t=>{e.push(t.inventories.filter(i=>i.trackable).map(i=>parseInt(i.available)).reduce((i,c)=>i+c,0))}),`${e.reduce((t,i)=>t+parseInt(i),0)} available`},hasTrackInventory(){return this.variants.filter(e=>e.track_inventory).length}},watch:{selected(e){e.length&&e.length<this.variants.length?this.selection=null:e.length===this.variants.length?this.selection=!0:this.selection=!1},variants(e){this.$emit("update:model-value",e)}},mounted(){setTimeout(()=>{this.clear(this.modelValue),this.loading=!1},100)},unmounted(){this.clear([])}},Yt={class:"variants-section"},Xt={key:1,class:"row justify-center q-my-md"},Zt={key:0};function eo(e,t,i,c,l,a){const u=f("base-btn-dropdown"),m=f("file-selector"),r=f("inventory-label");return s(),S("div",Yt,[o(H,{class:"bordered"},{default:n(()=>[e.variants.length?(s(),V(q,{key:0},{default:n(()=>[o(p,{style:{"min-width":"auto"},avatar:""},{default:n(()=>[o(ee,{size:"sm",dense:"","onUpdate:modelValue":[a.onSelect,t[0]||(t[0]=d=>l.selection=d)],modelValue:l.selection},null,8,["onUpdate:modelValue","modelValue"])]),_:1}),o(p,null,{default:n(()=>[o(C,{class:"text-weight-bold"},{default:n(()=>[h(k(l.selected.length?"Selected":"Total")+" "+k(a.length)+" variant"+k(a.length>1?"s":""),1)]),_:1})]),_:1}),o(p,{side:""},{default:n(()=>[o(u,{label:e.$t("label.actions"),link:"",color:"primary"},{default:n(()=>[o(H,{dense:"",style:{"min-width":"150px"},class:"q-pa-sm"},{default:n(()=>[$((s(),V(q,{class:"rounded-borders",onClick:a.onEditPrices,clickable:""},{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>t[2]||(t[2]=[h("Edit prices")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[A]]),$((s(),V(q,{class:"rounded-borders",onClick:a.onEditQuantities,clickable:""},{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>t[3]||(t[3]=[h("Edit quantities")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[A]]),$((s(),V(q,{class:"rounded-borders",onClick:a.onEditSKUs,clickable:""},{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>t[4]||(t[4]=[h("Edit SKUs")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[A]]),$((s(),V(q,{class:"rounded-borders",onClick:a.onEditBarcode,clickable:""},{default:n(()=>[o(p,null,{default:n(()=>[o(C,null,{default:n(()=>t[5]||(t[5]=[h("Edit barcodes")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[A]])]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})):O("",!0),l.loading?(s(),S("div",Xt,[o(yt,{color:"primary",size:"40px"})])):(s(!0),S(E,{key:2},T(i.modelValue,(d,v)=>(s(),V(q,{clickable:"",key:v},{default:n(()=>[o(p,{style:{"min-width":"auto"},avatar:""},{default:n(()=>[o(ee,{size:"sm",dense:"",modelValue:l.selected,"onUpdate:modelValue":t[1]||(t[1]=P=>l.selected=P),val:d.id},null,8,["modelValue","val"])]),_:2},1024),o(p,{avatar:""},{default:n(()=>[o(m,{mini:"","dialog-label":e.$t("uploadThumbnail"),hint:"You can only choose images as variant media",icon:"fad fa-image","related-files":i.product.media,modelValue:d.thumbnail,"onUpdate:modelValue":P=>a.onUpdateThumbnail(P,d)},null,8,["dialog-label","related-files","modelValue","onUpdate:modelValue"])]),_:2},1024),o(p,{onClick:P=>a.onEditVariant(d),class:"text-bold"},{default:n(()=>[o(C,null,{default:n(()=>[h(k(d.title)+" ",1),isNaN(d.id)?(s(),V(ye,{key:0,size:"sm",color:"green-2",label:e.$t("label.new")},null,8,["label"])):O("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),o(p,{onClick:P=>a.onEditVariant(d),side:"",class:"align-right"},{default:n(()=>[i.creating&&!d.create_on_save?(s(),S("span",Zt,"This version will not be created")):(s(),S(E,{key:1},[o(C,null,{default:n(()=>[h("$"+k(d.price),1)]),_:2},1024),o(r,Qe({ref_for:!0},d),null,16)],64))]),_:2},1032,["onClick"])]),_:2},1024))),128)),a.hasTrackInventory?(s(),V(q,{key:3,dense:"",class:"q-pt-none"},{default:n(()=>[o(p,null,{default:n(()=>t[6]||(t[6]=[h("Total inventory at all locations")])),_:1}),o(p,{side:"",class:"align-right"},{default:n(()=>[o(C,null,{default:n(()=>[h(k(a.inventoriesAvailable),1)]),_:1})]),_:1})]),_:1})):O("",!0)]),_:1})])}var to=U(Wt,[["render",eo]]);const oo={props:{modelValue:{},useInput:Boolean,useFilter:Boolean},emits:["update:model-value"],methods:{...N(je,["get"]),onChange(e){this.$emit("update:model-value",e)},onNewValue(e,t){console.log(e),t({name:e},"add-unique")}}};function no(e,t,i,c,l,a){const u=f("base-select");return s(),V(u,{dense:"",outlined:"","map-options":"","use-input":!i.useFilter,"use-filter":i.useFilter,"input-debounce":"500",debounce:"500","option-label":"name","option-value":"id",class:"vendor-select","hide-no-option":"",placeholder:i.modelValue?"":"e.g. Lotto","model-value":i.modelValue,"onUpdate:modelValue":a.onChange,"filter-method":e.get,"new-value-mode":"add-unique",onNewValue:a.onNewValue},null,8,["use-input","use-filter","placeholder","model-value","onUpdate:modelValue","filter-method","onNewValue"])}var lo=U(oo,[["render",no]]);const ce={description:"",status:"Draft",inventories_available:"0 available",default_variant:{taxable:!1,track_inventory:!1,out_of_stock_track_inventory:!1,inventories:[],price:"0.00",compare_at_price:"0.00",cost_per_item:"0.00"},has_variant:!1,media:[],options:[{id:!1,name:"Size",is_custom:!0,attribute_id:!1,values:[]}]},ao={components:{OptionSection:mt,VariantsSection:to,InventorySection:_e,PricingSection:be,VendorSelect:lo,CategorySelect:Fe,TagsSelect:_t,CollectionsSelect:tt,SeoSection:Ge,SkeletonSinglePage:Ke},data(){return{loaded:!1,submited:!1,default:w.exports.cloneDeep(ce),product:w.exports.cloneDeep(ce),options:[]}},methods:{...N(Ie,["show","store","update"]),...N(W,["clear","generate"]),...N(Ve,{location:"get"}),onSubmit(e){console.func("pages/admins/products/ProductPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.product).then(({data:i,message:c})=>{this.submited=!1,this.$q.notify(c),this.product=i,this.default=w.exports.cloneDeep(i),this.clear(i.variants),this.$router.push({name:"Product",params:{id:i.id},query:{action:"edit"}})}).catch(i=>{this.submited=!1,this.$core.error(i,{title:"Error"})})},onReset(e){console.func("pages/admins/products/ProductPage:methods.onReset()",arguments),this.loaded=!1,setTimeout(()=>{this.product=w.exports.cloneDeep(this.default),this.loaded=!0},1)},onCancel(e){console.func("pages/admins/products/ProductPage:methods.onCancel()",arguments),this.$router.back()},onGenerateVariant(e){console.func("pages/admins/products/ProductPage:methods.onGenerateVariant()",arguments),this.generate({options:e,default_variant:this.product.default_variant})},onChangeVariant(e){console.func("pages/admins/products/ProductPage:methods.onChangeVariant()",arguments),this.clear([]),this.product.options=[],this.product.variants=[]},onLoadLoaction(){this.location().then(({data:e})=>{e.forEach(t=>{this.product.default_variant.inventories.push({id:!1,available:0,incoming:0,active:!0,location:{id:t.id,name:t.name}})})}).then(()=>{this.default=w.exports.cloneDeep(this.product),this.loaded=!0}).catch(e=>{this.loaded=!0,this.$core.error(e,{title:"Error"})})}},mounted(){this.creating?this.onLoadLoaction():this.show(this.id).then(e=>{this.product=e,this.default=w.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},slot(){return this.options.length?"before-options":"no-option"},disable(){return this.default&&JSON.stringify(this.product)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.product)!==JSON.stringify(this.default)}}},io={class:"row q-col-gutter-md"},so={class:"col-xs-12 col-sm-9"},ro={class:"q-gutter-md"},uo={class:"col-xs-12"},co={class:"col-xs-12"},mo={class:"col-xs-12"},po={class:"col-xs-12"},ho={class:"col-xs-12"},fo={class:"col-xs-12 col-sm-3"},go={class:"q-gutter-y-md"};function vo(e,t,i,c,l,a){const u=f("base-label"),m=f("base-input"),r=f("base-editor"),d=f("base-section"),v=f("base-dropzone"),P=f("pricing-section"),I=f("inventory-section"),M=f("option-section"),Q=f("variants-section"),oe=f("seo-section"),J=f("base-select"),ne=f("vendor-select"),z=f("category-select"),le=f("tags-select"),X=f("collections-select"),ae=f("base-form"),ie=f("skeleton-single-page");return s(),V(He,{padding:""},{default:n(()=>[l.loaded?(s(),V(ae,{key:0,onSubmit:a.onSubmit,onCancel:a.onCancel,onReset:a.onReset,resetable:a.resetable,disable:a.disable,submited:l.submited},{default:n(()=>[g("div",io,[g("div",so,[g("div",ro,[o(d,{flat:"",bordered:"",title:"General information",description:"A great product title and description has the power to turn a casual shopper into a revenue-generating buyer."},{default:n(()=>[g("div",uo,[o(u,null,{default:n(()=>[h(k(e.$t("label.title")),1)]),_:1}),o(m,{dense:"",outlined:"",modelValue:l.product.title,"onUpdate:modelValue":t[0]||(t[0]=y=>l.product.title=y)},null,8,["modelValue"])]),g("div",co,[o(u,null,{default:n(()=>[h(k(e.$t("label.description")),1)]),_:1}),o(r,{modelValue:l.product.description,"onUpdate:modelValue":t[1]||(t[1]=y=>l.product.description=y),"min-height":"10rem"},null,8,["modelValue"])])]),_:1}),o(d,{flat:"",bordered:"","no-row":""},{default:n(()=>[o(v,{header:"",editor:"",hint:"Product media can include images, 3D models and videos. Using media like 3D models for your products provides your customer with a better understanding of the function and size of an item, and increases your customers' confidence in the quality of your products.",accept:"image/*",modelValue:l.product.media,"onUpdate:modelValue":t[2]||(t[2]=y=>l.product.media=y)},null,8,["modelValue"])]),_:1}),!l.product.has_variant||a.creating?(s(),S(E,{key:0},[o(P,{flat:"",bordered:"",modelValue:l.product.default_variant,"onUpdate:modelValue":t[3]||(t[3]=y=>l.product.default_variant=y)},null,8,["modelValue"]),o(I,{flat:"",bordered:"",creating:a.creating,modelValue:l.product.default_variant,"onUpdate:modelValue":t[4]||(t[4]=y=>l.product.default_variant=y)},null,8,["creating","modelValue"])],64)):O("",!0),o(d,{flat:"",bordered:"",title:"Variants"},{default:n(()=>[g("div",mo,[o(ee,{size:"sm",dense:"",modelValue:l.product.has_variant,"onUpdate:modelValue":[t[5]||(t[5]=y=>l.product.has_variant=y),a.onChangeVariant],label:e.$t("label.thisProductHasMultipleOptionsLikeDifferentSizesOrColors")},null,8,["modelValue","onUpdate:modelValue","label"])]),l.product.has_variant?(s(),S(E,{key:0},[g("div",po,[o(M,{flat:"",bordered:"",creating:a.creating,modelValue:l.product.options,"onUpdate:modelValue":t[6]||(t[6]=y=>l.product.options=y),"product-id":l.product.id,"onUpdate:variants":a.onGenerateVariant},null,8,["creating","modelValue","product-id","onUpdate:variants"])]),g("div",ho,[o(Q,{flat:"",bordered:"",creating:a.creating,editing:a.resetable,ref:"variants",product:l.product,modelValue:l.product.variants,"onUpdate:modelValue":t[7]||(t[7]=y=>l.product.variants=y)},null,8,["creating","editing","product","modelValue"])])],64)):O("",!0)]),_:1}),o(oe,{flat:"",bordered:"",modelValue:l.product,"onUpdate:modelValue":t[8]||(t[8]=y=>l.product=y)},null,8,["modelValue"])])]),g("div",fo,[o(d,{title:"Product organization",flat:"",bordered:"","no-row":""},{default:n(()=>[g("div",go,[g("div",null,[o(u,null,{default:n(()=>[h(k(e.$t("label.productStatus")),1)]),_:1}),o(J,{modelValue:l.product.status,"onUpdate:modelValue":t[9]||(t[9]=y=>l.product.status=y),options:["Active","Draft"],dense:"",outlined:""},null,8,["modelValue"])]),g("div",null,[o(u,null,{default:n(()=>[h(k(e.$t("label.vendor")),1)]),_:1}),o(ne,{modelValue:l.product.vendor,"onUpdate:modelValue":t[10]||(t[10]=y=>l.product.vendor=y)},null,8,["modelValue"])]),g("div",null,[o(u,null,{default:n(()=>[h(k(e.$t("label.category")),1)]),_:1}),o(z,{modelValue:l.product.category,"onUpdate:modelValue":t[11]||(t[11]=y=>l.product.category=y)},null,8,["modelValue"])]),g("div",null,[o(u,null,{default:n(()=>[h(k(e.$t("label.tags")),1)]),_:1}),o(le,{modelValue:l.product.tags,"onUpdate:modelValue":t[12]||(t[12]=y=>l.product.tags=y)},null,8,["modelValue"])]),g("div",null,[o(u,null,{default:n(()=>[h(k(e.$t("label.collections")),1)]),_:1}),o(X,{modelValue:l.product.collections,"onUpdate:modelValue":t[13]||(t[13]=y=>l.product.collections=y)},null,8,["modelValue"])])])]),_:1})])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(s(),V(ie,{key:1}))]),_:1})}var Io=U(ao,[["render",vo]]);export{Io as default};
