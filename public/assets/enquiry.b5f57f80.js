import{bt as u,c as r,A as i}from"./index.ec7eb99e.js";const d=e=>[{label:e.$t("label.all"),value:null},{label:e.$t("label.membersOnly"),value:"users"},{label:e.$t("label.contactForm"),value:"contact"}],c=e=>[{label:e.$t("label.pending"),value:"Pending"},{label:e.$t("label.ongoing"),value:"Ongoing"},{label:e.$t("label.resolved"),value:"Resolved"}],n=e=>[{label:e.$t("label.all"),value:"All"},{label:e.$t("label.live"),value:"Live"},{label:e.$t("label.archive"),value:"Archive"}],m=u("enquiry",{state:()=>({rows:[],permissions:{new:"enquiries:new",edit:"enquiries:edit",delete:"enquiries:delete"}}),getters:{module:e=>({name:"Enquiries",label:e.$t("label.enquiries"),singular:e.$t("singular.enquiry"),plural:e.$t("plural.enquiries")}),columns:e=>[{name:"id",align:"left",label:e.$t("label.subject"),field:l=>l.subject,style:"width: 200px;",sortable:!0,guard:["admins","users"]},{name:"created_at",align:"left",label:e.$t("label.createdAt"),field:"created_at",format:r.formatDateAsHuman,style:"width: 40px",sortable:!0,guard:["admins","users"]},{name:"is_archived",align:"center",label:e.$t("label.archived"),field:"is_archived",style:"width: 10px",format:l=>l?"Yes":"No",sortable:!1,guard:["admins"]},{name:"user_archived",align:"center",label:e.$t("label.archived"),field:"user_archived",style:"width: 10px",format:l=>l?"Yes":"No",sortable:!1,guard:["users"]},{name:"name",align:"left",label:e.$t("label.name"),field:"name",style:"width: 40px",sortable:!0,guard:["admins"]},{name:"email",align:"left",label:e.$t("label.email"),field:"email",style:"width: 40px",sortable:!0,guard:["admins"]},{name:"phone",align:"left",label:e.$t("label.contact"),field:"phone",style:"width: 40px",sortable:!0,guard:["admins"]},{name:"status",align:"center",label:e.$t("label.status"),field:"status",style:"width: 40px",sortable:!0,guard:["admins","users"]},{name:"last_reply",align:"left",label:e.$t("label.lastUpdate"),field:"last_reply",format:r.lastUpdate,style:"width: 40px",sortable:!0,guard:["admins","users"]},{name:"actions",align:"right",sortable:!1,guard:["admins","users"]}],actions:e=>[{label:e.$t("label.reply"),permission:["enquiries:view","enquiries:edit"],action:"route",route:"Enquiry",params:l=>({id:l.id}),query:l=>({action:"edit"}),icon:"fas fa-paper-plane",deleted:!1},{label:e.$t("label.delete"),permission:"enquiries:delete",action:"delete",icon:"fas fa-trash-alt",deleted:!1},{label:e.$t("label.restore"),permission:"enquiries:delete",action:"restore",icon:"fas fa-trash-undo",deleted:!0}],toolbar:e=>[{label:e.$t("label.trashed"),action:"request",component:"base-toggle",dense:!0,key:"deleted",checkedIcon:"delete",guard:["admins"],deleted:"all",permission:"enquiries:delete"},{title:e.$t("label.type"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"type",placeholder:e.$t("placeholder.select"),optionsDense:!0,style:"width: 180px",mapOptions:!0,emitValue:!0,options:d(e),deleted:"all",prefix:e.$t("prefix.type"),guard:["admins"]},{title:e.$t("label.status"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"status",placeholder:e.$t("placeholder.select"),optionsDense:!0,style:"width: 180px",mapOptions:!0,emitValue:!0,options:n(e),deleted:"all",prefix:e.$t("prefix.status"),guard:["admins"]},{title:e.$t("label.status"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"status",placeholder:e.$t("placeholder.select"),optionsDense:!0,style:"width: 180px",mapOptions:!0,emitValue:!0,options:n(e),deleted:"all",prefix:e.$t("prefix.status"),guard:["users"]},{icon:"fad fa-plus-circle",label:e.$t("label.createEnquiry"),permission:"enquiries:new",action:"route",params:{id:"add"},route:"Enquiry",color:"primary",deleted:"all",guard:["admins"]},{icon:"fad fa-plus-circle",label:e.$t("label.createEnquiry"),action:"route",params:{id:"add"},route:"Enquiry",color:"primary",deleted:"all",guard:["users"]}],filters:e=>[],statusOptions:n,defaultStatusOptions:c},actions:{get(e){return new Promise((l,a)=>{i.get("enquiries",e).then(t=>{this.rows=t.data.map(s=>({...s,subject:s.subject||"Contact us"})),l(t)}).catch(t=>{a(t)})})},show(e){return new Promise((l,a)=>{i.get(`enquiries/${e}`).then(t=>{l(t)}).catch(t=>{a(t)})})},store(e){return new Promise((l,a)=>{i.post("enquiries/store",e).then(t=>{l(t)}).catch(t=>{a(t)})})},delete(e){return new Promise((l,a)=>{i.delete(`enquiries/${e}/destroy`).then(t=>{l(t)}).catch(t=>{a(t)})})},deleteSelected(e){return new Promise((l,a)=>{i.delete("enquiries/destroy",{items:e}).then(t=>{l(t)}).catch(t=>{a(t)})})},restore(e){return new Promise((l,a)=>{i.post(`enquiries/${e}/restore`).then(t=>{l(t)}).catch(t=>{a(t)})})},restoreSelected(e){return new Promise((l,a)=>{i.post("enquiries/restore",{items:e}).then(t=>{l(t)}).catch(t=>{a(t)})})},reply(e){return new Promise((l,a)=>{i.post(`enquiries/${e.moduleId}/reply`,e).then(t=>{l(t)}).catch(t=>{a(t)})})},changeArchived(e){return new Promise((l,a)=>{i.post(`enquiries/${e.id}/change-archived`).then(t=>{e.is_archived=!e.is_archived;const{message:s}=t;r.success(s),l(t)}).catch(t=>{r.error(t),a(t)})})},changeUserArchived(e){return new Promise((l,a)=>{i.post(`enquiries/${e.id}/change-user-archived`).then(t=>{e.user_archived=!e.user_archived;const{message:s}=t;r.success(s),l(t)}).catch(t=>{r.error(t),a(t)})})}}});export{m as u};
