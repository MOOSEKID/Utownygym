import{_ as Q,T as U,U as k,u as q,m as P,d as i,o as s,e as u,w as a,h as n,g as y,f as m,p as w,F as h,O as Y,t as p,i as B,j as _}from"./index.ec7eb99e.js";import{Q as l}from"./QTd.ce5eb0a5.js";import{Q as g}from"./QTr.4bf4ade2.js";import{Q as F}from"./QPage.b13c45b6.js";import{R as L,u as x}from"./ReportsTable.a50e0904.js";import{u as N}from"./mixins.af528ab3.js";import"./member.8ccf3331.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./BaseSectionSkeleton.971da8dd.js";import"./QSkeleton.73bc54f6.js";import"./page.e7247b54.js";import"./QExpansionItem.38c12bfd.js";import"./QSlideTransition.d1b840b3.js";import"./QMenu.76199ca9.js";import"./selection.571043d0.js";import"./SkeletonSinglePage.dba71dd3.js";const S={components:{ReportsTable:L},mixins:[N],data(){return{loaded:!1,rows:[{id:"1",checked:!1,type:null},{id:"2",checked:!1,type:null},{id:"3",checked:!1,type:null},{id:"4",checked:!1,type:null},{id:"5",checked:!1,type:null},{id:"6",checked:!1,type:null},{id:"7",checked:!1,type:null},{id:"8",checked:!1,type:null},{id:"9",checked:!1,type:null},{id:"10",checked:!1,type:null},{id:"11",checked:!1,type:null},{id:"12",checked:!1,type:null}],year:new Date().getFullYear()}},methods:{...U(x,["reportsMonthly"]),onRequest(e,d){console.func("pages/admins/members/ReportsMonthPage:methods.onRequest()",arguments),Object.assign(d.row,{total:void 0,total_paid:void 0,rolling:void 0,rolling_total:void 0,end_date:void 0,end_date_total:void 0,free:void 0,cancelled_total:void 0,cancelled:void 0,type:void 0,expand:!1}),e&&this.reportsMonthly({year:this.year,month:d.row.id}).then(b=>{Object.assign(d.row,b)})},onLoad(e,d){if(console.func("pages/admins/members/ReportsMonthPage:methods.onLoad()",arguments),e.row.expand&&d===e.row.type){e.row.expand=!1;return}else e.row.expand=!1,e.row.type=null;this.$nextTick(()=>{e.row.type=d,e.row.expand=!0})},onChangeYear(){console.func("pages/admins/members/ReportsMonthPage:methods.onChangeYear()",arguments),this.rows=this.rows.map(e=>({...e,total:void 0,rolling:void 0,rolling_total:void 0,end_date:void 0,end_date_total:void 0,monthly:void 0,yearly:void 0,yearly_total:void 0,free:void 0,cancelled_total:void 0,cancelled:void 0,type:void 0,checked:!1}))}},mounted(){setTimeout(()=>{this.loaded=!0},500)},computed:{...k(q,["stats"]),...k(x,{columns:"monthlyReportColumns"}),years(){return P.exports.range(2015,new Date().getFullYear()+1,1)}}},j={class:"col"},D={class:"row q-col-gutter-md"},O={class:"col-xs-12 col-sm"},A={key:1};function E(e,d,b,z,c,f){const V=i("base-select"),v=i("base-input"),R=i("base-btn"),T=i("reports-table"),C=i("base-table"),M=i("base-section");return s(),u(F,{padding:""},{default:a(()=>[n(M,{title:e.$t("menus.monthlyReports"),flat:"",bordered:"","no-row":""},{default:a(()=>[n(C,{"rows-per-page-options":[0],loaded:c.loaded,rows:c.rows,columns:e.columns,"hide-pagination":"","no-responsive":""},{top:a(()=>[y("div",j,[y("div",D,[y("div",O,[n(V,{"options-dense":"",modelValue:c.year,"onUpdate:modelValue":[d[0]||(d[0]=t=>c.year=t),f.onChangeYear],options:f.years,dense:"",outlined:"",prefix:e.$t("prefix.year")},null,8,["modelValue","options","prefix","onUpdate:modelValue"])]),(s(!0),m(h,null,w(e.columns.filter(t=>t.stats),(t,o)=>(s(),m("div",{key:o,class:"col-xs-6 col-sm"},[n(v,{prefix:`${t.label}:`,readonly:"",modelValue:e.stats[t.name],"onUpdate:modelValue":r=>e.stats[t.name]=r},null,8,["prefix","modelValue","onUpdate:modelValue"])]))),128))])])]),body:a(t=>[n(g,{props:t},{default:a(()=>[(s(!0),m(h,null,w(t.cols,o=>(s(),u(l,{key:o.name,props:t},{default:a(()=>[o.name==="id"?(s(),u(Y,{key:0,dense:"",modelValue:t.row.checked,"onUpdate:modelValue":[r=>t.row.checked=r,r=>f.onRequest(r,t)],label:o.value},null,8,["modelValue","onUpdate:modelValue","label"])):(s(),m(h,{key:1},[o.value&&o.load?(s(),u(R,{key:0,link:"",color:"black",onClick:r=>f.onLoad(t,o.name),flat:"",dense:"",label:o.value},null,8,["onClick","label"])):(s(),m("span",A,p(o.value),1))],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),t.row.expand?(s(),u(g,{key:0,props:t},{default:a(()=>[n(l,{class:"q-pa-none",colspan:"100%"},{default:a(()=>[n(T,{"no-responsive":"",type:t.row.type,year:c.year,month:t.row.id},null,8,["type","year","month"])]),_:2},1024)]),_:2},1032,["props"])):B("",!0)]),"bottom-row":a(()=>[n(g,null,{default:a(()=>[n(l,{align:"center",class:"text-bold",colspan:"2"}),n(l,{align:"center",class:"text-bold",colspan:"1"},{default:a(()=>[_(p(e.getTotal("rolling_total")),1)]),_:1}),n(l,{align:"center",class:"text-bold",colspan:"1"}),n(l,{align:"center",class:"text-bold",colspan:"1"},{default:a(()=>[_(p(e.getTotal("end_date_total")),1)]),_:1}),n(l,{align:"center",class:"text-bold",colspan:"1"}),n(l,{align:"center",class:"text-bold",colspan:"1"}),n(l,{align:"center",class:"text-bold",colspan:"1"},{default:a(()=>[_(p(e.getTotal("cancelled_total")),1)]),_:1}),n(l,{align:"center",class:"text-bold",colspan:"1"}),n(l,{align:"center",class:"text-bold",colspan:"1"},{default:a(()=>[_(p(e.getTotal("total_paid")),1)]),_:1})]),_:1})]),_:1},8,["loaded","rows","columns"])]),_:1},8,["title"])]),_:1})}var ie=Q(S,[["render",E]]);export{ie as default};
