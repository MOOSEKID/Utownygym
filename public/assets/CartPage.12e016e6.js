import{_ as R,T as F,U as D,d as r,o as u,e as h,w as l,h as a,j as _,t as n,S as C,g as s,aq as q,i as v,n as $,R as k,N as m,W as d,ae as x,f as p,p as V,F as Q,s as E}from"./index.ec7eb99e.js";import{Q as S}from"./QTd.ce5eb0a5.js";import{Q as L}from"./QTr.4bf4ade2.js";import{Q as M}from"./QPage.b13c45b6.js";import{u as I}from"./shop.dab3014b.js";import{Q as O}from"./QuantityInput.1a908edf.js";const j={components:{QuantityInput:O},data(){return{submited:!1,note:null}},methods:{...F(I,["removeFromCart","updateCart","createOrder","clearCart"]),onSubmitCart(t){console.func("pages/users/shop/CartPage:methods.onSubmitCart()",arguments),this.submited=!0,this.createOrder({line_items:this.lineItems,note:this.note}).then(({message:i,enquiry:c})=>{this.submited=!1,this.$q.notify(i),this.$router.push({name:"Enquiry",params:{id:c==null?void 0:c.id}}).then(()=>{this.clearCart()})}).catch(i=>{this.submited=!1,this.$core.error(i,{title:this.$t("dialog.title.error")})})},onRemove(t){console.func("pages/users/shop/CartPage:methods.onRemove()",arguments),this.removeFromCart(t)}},computed:{...D(I,["cart","cartTotal","cartCount","lineItems"]),columns(){return[{name:"title",align:"left",label:this.$t("label.product"),field:"title",sortable:!1},{name:"price",align:"left",label:this.$t("label.price"),field:"price",format:t=>this.$core.money(t),style:"width: 40px",sortable:!1},{name:"quantity",align:"left",label:this.$t("label.quantity"),field:"quantity",style:"width: 140px",sortable:!0},{name:"total",align:"left",label:this.$t("label.total"),field:t=>t.quantity*t.price,format:t=>this.$core.money(t),style:"width: 40px",sortable:!0},{name:"actions",align:"right",field:"actions",style:"width: 10px",sortable:!0}]}}},A={class:"q-ml-xs"},W={class:"q-ml-xs"},G={class:"meta items-center flex"},H={class:"price text-bold q-mr-md"},J={class:"flex"},K={class:"text-uppercase q-mr-xl"},X={class:"text-bold"},Y={class:"flex items-center"};function Z(t,i,c,ee,y,f){const P=r("base-info"),T=r("base-thumbnail"),b=r("base-btn"),w=r("quantity-input"),z=r("base-table"),N=r("base-label"),U=r("base-input"),B=r("base-section");return u(),h(M,{padding:""},{default:l(()=>[a(P,{rounded:"",class:"q-mb-md"},{default:l(()=>[_(n(t.$t("shopNotice")),1)]),_:1}),a(B,{class:"cart-section",flat:"",bordered:"",title:t.$t("cart"),"no-row":""},C({default:l(()=>[a(z,{columns:f.columns,rows:t.cart,"hide-top":"","no-data-label":t.$t("products.noData"),loaded:"","hide-pagination":"","rows-per-page-options":[0],"hide-item-label":""},C({"body-cell-title":l(e=>[a(k,{class:"q-pa-none",dense:""},{default:l(()=>[a(m,{avatar:""},{default:l(()=>[a(T,{size:40,media:e.row.thumbnail},null,8,["media"])]),_:2},1024),a(m,{avatar:""},{default:l(()=>[a(d,null,{default:l(()=>[a(b,{onClick:i[0]||(i[0]=x(()=>{},["stop"])),link:"",size:"12px",tag:"a",to:{name:"Product",params:{slug:e.row.slug,title:e.row.title}},label:e.value},null,8,["to","label"])]),_:2},1024),e.row.has_variant?(u(),h(d,{key:0,class:"variants"},{default:l(()=>[(u(!0),p(Q,null,V(e.row.options,(o,g)=>(u(),p("div",{class:"variant",key:g},[s("strong",null,n(o.name)+":",1),s("span",A,n(o.value),1)]))),128))]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024)]),"body-cell-price":l(e=>[_(n(e.value)+" x "+n(e.row.quantity),1)]),"body-cell-quantity":l(e=>[a(w,{modelValue:e.row.quantity,"onUpdate:modelValue":[o=>e.row.quantity=o,o=>t.updateCart(e)]},null,8,["modelValue","onUpdate:modelValue"])]),actions:l(e=>[a(E,{flat:"",dense:"",round:"",size:"sm",color:"primary",icon:"fas fa-trash-can",onClick:o=>f.onRemove(e)},null,8,["onClick"])]),"item-section":l(({props:e})=>[a(m,null,{default:l(()=>[a(k,{class:"q-px-none"},{default:l(()=>[a(m,null,{default:l(()=>[a(d,null,{default:l(()=>[a(b,{onClick:i[1]||(i[1]=x(()=>{},["stop"])),link:"",size:"14px",tag:"a",to:{name:"Product",params:{slug:e.row.slug,title:e.row.title}},label:e.row.title},null,8,["to","label"])]),_:2},1024),e.row.has_variant?(u(),h(d,{key:0,class:"variants"},{default:l(()=>[(u(!0),p(Q,null,V(e.row.options,(o,g)=>(u(),p("div",{class:"variant",key:g},[s("strong",null,n(o.name)+":",1),s("span",W,n(o.value),1)]))),128))]),_:2},1024)):v("",!0),a(d,null,{default:l(()=>[_(n(t.$core.money(e.row.price))+" x "+n(e.row.quantity),1)]),_:2},1024)]),_:2},1024),a(m,{side:""},{default:l(()=>[a(d,null,{default:l(()=>[a(w,{style:{width:"120px"},modelValue:e.row.quantity,"onUpdate:modelValue":[o=>e.row.quantity=o,o=>t.updateCart(e)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s("div",G,[s("div",H,n(t.$core.money(e.row.quantity*e.row.price)),1),a(b,{flat:"",dense:"",color:"grey",onClick:o=>f.onRemove(e),icon:"fas fa-trash-can"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},[t.cartCount?{name:"bottom-row",fn:l(()=>[a(L,{"no-hover":""},{default:l(()=>[a(S,{class:"text-right",colspan:"4"},{default:l(()=>[s("div",J,[a(q),s("div",K,n(t.$t("label.subtotal")),1),s("div",X,n(t.$core.money(t.cartTotal)),1)]),i[3]||(i[3]=s("div",{class:"text-negative"},"Tax included at store checkout",-1))]),_:1}),a(S)]),_:1})]),key:"0"}:void 0]),1032,["columns","rows","no-data-label"])]),_:2},[t.cartCount?{name:"bottom",fn:l(()=>[s("div",Y,[s("div",null,[a(N,null,{default:l(()=>[_(n(t.$t("cartInfo")),1)]),_:1}),a(U,{placeholder:"Message to this enquiry...",autogrow:"",modelValue:y.note,"onUpdate:modelValue":i[2]||(i[2]=e=>y.note=e),type:"textarea"},null,8,["modelValue"])]),t.$q.screen.gt.xs?(u(),h(q,{key:0})):v("",!0),s("div",{class:$({"text-right":!0,"full-width":t.$q.screen.xs})},[a(b,{size:"md",caps:"",color:"primary",label:t.$t("submitCart"),class:$({"q-mt-md":!0,"full-width":t.$q.screen.xs}),cap:"",loading:y.submited,onClick:f.onSubmitCart},null,8,["label","class","loading","onClick"])],2)])]),key:"0"}:void 0]),1032,["title"])]),_:1})}var ie=R(j,[["render",Z]]);export{ie as default};
