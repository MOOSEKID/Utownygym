import{Q as N}from"./QTimeline.c279b714.js";import{Q as R}from"./QPage.b13c45b6.js";import{bt as x,A as S,T as B,_ as q,d as i,o as u,f as v,h as a,w as l,R as A,aY as L,aZ as F,N as w,O as I,W as M,g as d,i as P,cr as E,m as p,e as f,j as T,t as y,p as H,ar as $,F as j}from"./index.ec7eb99e.js";import{S as z}from"./SkeletonSinglePage.dba71dd3.js";import{u as G}from"./blog.32553b7e.js";import{P as O}from"./mixins.af528ab3.js";import{S as W}from"./SeoSection.80aa835d.js";import"./QSkeleton.73bc54f6.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./BaseSectionSkeleton.971da8dd.js";import"./page.e7247b54.js";import"./QExpansionItem.38c12bfd.js";import"./QSlideTransition.d1b840b3.js";import"./QMenu.76199ca9.js";import"./selection.571043d0.js";import"./QSelect.ad394656.js";import"./QField.ad3f8f9a.js";import"./QChip.cb7fa0e0.js";import"./rtl.276c3f1b.js";const Y=x("blog/tag",{actions:{get(e){return new Promise((t,r)=>{S.get("blogs/tags",e).then(s=>{this.rows=s.data,t(s)}).catch(s=>{r(s)})})},store(e){return new Promise((t,r)=>{S.post("blogs/tags/store",e).then(s=>{t(s)}).catch(s=>{r(s)})})}}}),Z={props:{modelValue:{required:!0}},emits:["update:model-value"],data(){return{tags:this.modelValue,options:[]}},methods:{...B(Y,["get"]),createTag(e,t){if(console.func("components/BlogTagSelect:methods.createTag()",arguments),e.length>0){const r=(this.tags||[]).slice();e.split(/[,;|]+/).map(s=>s.trim().toLowerCase()).filter(s=>s.length>0).forEach(s=>{r.find(o=>o.label===s)||r.push({label:s})}),t(null),this.tags=r,this.$emit("update:model-value",this.tags)}},removeTag(e){console.func("components/BlogTagSelect:methods.removeTag()",arguments),this.tags.splice(e,1),this.$emit("update:model-value",this.tags)},onChange(e){console.func("components/BlogTagSelect:methods.onChange()",arguments),this.$emit("update:model-value",e)}},watch:{modelValue:{deep:!0,handler(e){this.tags=e}}}},J={class:"blog-tag-select"},K=["innerHTML"],X={key:0,class:"q-mt-sm"};function ee(e,t,r,s,o,g){const h=i("base-select"),b=i("base-tags");return u(),v("div",J,[a(h,{"popup-content-class":"q-pa-sm base-dropdown","options-dense":"",modelValue:o.tags,"onUpdate:modelValue":[t[0]||(t[0]=m=>o.tags=m),g.onChange],placeholder:"web development, seo, digital marketing",ref:"tags","use-input":"","map-options":"","hide-selected":"","input-debounce":"500",debounce:"500","option-label":"label","option-value":"label",dense:"",outlined:"",multiple:"",query:m=>({filter:m,limit:5,sortBy:"label",options:!0}),"filter-method":e.get,onNewValue:g.createTag},{option:l(({itemProps:m,opt:c,toggleOption:_,selected:V})=>[a(A,L(F(m)),{default:l(()=>[a(w,{style:{"min-width":"auto"},avatar:""},{default:l(()=>[a(I,{dense:"","model-value":V,"onUpdate:modelValue":D=>_(c)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),a(w,null,{default:l(()=>[a(M,null,{default:l(()=>[d("span",{innerHTML:c.label},null,8,K)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","query","filter-method","onUpdate:modelValue","onNewValue"]),o.tags?(u(),v("div",X,[a(b,{modelValue:o.tags,"onUpdate:modelValue":t[1]||(t[1]=m=>o.tags=m),dense:"",removable:"",square:"",onRemove:g.removeTag},null,8,["modelValue","onRemove"])])):P("",!0)])}var te=q(Z,[["render",ee]]);const k={is_active:!0,thumbnail:null,description:""},oe={components:{SkeletonSinglePage:z,SeoSection:W,TagSelect:te,ThumbnailSelector:E},mixins:[O],data(){return{defaultData:p.exports.cloneDeep(k),formData:p.exports.cloneDeep(k)}},methods:{...B(G,["store","show","update","comments"]),onCreateComment(e){console.func("pages/core/blogs/BlogPage:methods.onCreateComment()",arguments),e?(this.formData.comments.splice(0,0,p.exports.cloneDeep(e)),this.defaultData.comments.splice(0,0,p.exports.cloneDeep(e))):this.show(this.id).then(t=>{this.formData=t,this.defaultData=p.exports.cloneDeep(t)})}},async mounted(){this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.formData=e,this.defaultData=p.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})}},ae={class:"masonry col-gutter-md"},se={class:"col-xs-12 col-sm-8"},le={class:"q-gutter-md"},ne={class:"col-xs-12 col-sm-12"},ie={class:"col-xs-12"},re={class:"col-xs-12 col-sm-4 col-end"},me={class:"q-gutter-y-md"},de={class:"col-xs-12 col-sm-8"};function ue(e,t,r,s,o,g){const h=i("base-label"),b=i("base-input"),m=i("base-editor"),c=i("base-section"),_=i("seo-section"),V=i("tag-select"),D=i("thumbnail-selector"),C=i("base-note-card"),U=i("base-form"),Q=i("skeleton-single-page");return u(),f(R,{padding:""},{default:l(()=>[e.loaded?(u(),f(U,{key:0,onSubmit:e.onSubmit,onCancel:e.onCancel,onReset:e.onReset,resetable:e.resetable,disable:e.disable,submited:e.submited},{default:l(()=>[d("div",ae,[d("div",se,[d("div",le,[a(c,{flat:"",bordered:"",title:"General information",description:"A great blog title and description has the power to turn a casual shopper into a revenue-generating buyer."},{default:l(()=>[d("div",ne,[a(h,{required:""},{default:l(()=>[T(y(e.$t("label.title")),1)]),_:1}),a(b,{modelValue:o.formData.title,"onUpdate:modelValue":t[0]||(t[0]=n=>o.formData.title=n),name:"title"},null,8,["modelValue"])]),d("div",ie,[a(h,{required:""},{default:l(()=>[T(y(e.$t("label.description")),1)]),_:1}),a(m,{modelValue:o.formData.description,"onUpdate:modelValue":t[1]||(t[1]=n=>o.formData.description=n),name:"description","min-height":"10rem"},null,8,["modelValue"])])]),_:1}),a(_,{flat:"",bordered:"",modelValue:o.formData,"onUpdate:modelValue":t[2]||(t[2]=n=>o.formData=n)},null,8,["modelValue"])])]),d("div",re,[d("div",me,[a(c,{flat:"",bordered:"",title:"Tags","no-row":""},{default:l(()=>[a(V,{modelValue:o.formData.tags,"onUpdate:modelValue":t[3]||(t[3]=n=>o.formData.tags=n)},null,8,["modelValue"])]),_:1}),a(c,{flat:"",bordered:"",title:e.$t("thumbnail")},{default:l(()=>[a(D,{"dialog-label":e.$t("label.uploadthumbnail"),hint:e.$t("youCanThumbnail"),icon:"fad fa-image",modelValue:o.formData.thumbnail,"onUpdate:modelValue":t[4]||(t[4]=n=>o.formData.thumbnail=n)},null,8,["dialog-label","hint","modelValue"])]),_:1},8,["title"])])]),d("div",de,[e.creating?P("",!0):(u(),f(c,{key:0,title:"Comments",description:e.$t("withActivityBlog"),"no-row":"","body-class":"q-px-lg"},{default:l(()=>[a(N,{class:"comments",color:"secondary"},{default:l(()=>[a(C,{"module-action":e.comments,"module-id":o.formData.id,class:"comment",creating:"","no-rag":"",onCreate:g.onCreateComment},null,8,["module-action","module-id","onCreate"]),(u(!0),v(j,null,H(o.formData.comments,n=>(u(),f(C,$({class:"comment",key:n.id,ref_for:!0},n,{"module-id":o.formData.id,user:n.user}),null,16,["module-id","user"]))),128))]),_:1})]),_:1},8,["description"]))])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(u(),f(Q,{key:1}))]),_:1})}var Ne=q(oe,[["render",ue]]);export{Ne as default};
