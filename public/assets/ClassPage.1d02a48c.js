import{_ as x,m as c,T as v,d as a,o as p,e as h,w as n,g as r,h as i,j as f,t as b,O as k}from"./index.ec7eb99e.js";import{Q as N}from"./QPage.b13c45b6.js";import{S as U}from"./SkeletonSinglePage.dba71dd3.js";import{u as q}from"./class-list.c44a0226.js";import{U as D}from"./UrlList.dea40f05.js";import"./QSkeleton.73bc54f6.js";const g={is_active:!0,urls:[]},P={components:{SkeletonSinglePage:U,UrlList:D},data(){return{default:c.exports.cloneDeep(g),classlist:c.exports.cloneDeep(g),loaded:!1,submited:!1}},methods:{...v(q,["store","show","update"]),onSubmit(e){console.func("pages/admins/class-lists/ClassPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.classlist).then(({data:o,message:_})=>{this.submited=!1,this.$q.notify(_),this.classlist=o,this.default=c.exports.cloneDeep(o),this.$router.push({name:"Class",params:{id:o.id},query:{action:"edit"}})}).catch(o=>{this.submited=!1,this.$core.error(o,{title:this.$t("dialog.title.error")})})},onReset(e){console.func("pages/admins/class-lists/ClassPage:methods.onReset()",arguments),this.loaded=!1,this.$nextTick(()=>{this.classlist=c.exports.cloneDeep(this.default),this.loaded=!0})},onCancel(e){console.func("pages/admins/class-lists/ClassPage:methods.onCancel()",arguments),this.$router.go(-1)}},async mounted(){this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.classlist=e,this.default=c.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.classlist)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.classlist)!==JSON.stringify(this.default)}}},O={class:"q-gutter-md"},R={class:"col-xs-12 col-sm-6"},w={class:"col-xs-12 col-sm-6"},J={class:"col-xs-12"},B={class:"col-xs-12"},Q={class:"col-xs-12"};function T(e,t,o,_,s,d){const u=a("base-label"),m=a("base-input"),V=a("url-list"),y=a("base-section"),C=a("base-form"),S=a("skeleton-single-page");return p(),h(N,{padding:""},{default:n(()=>[s.loaded?(p(),h(C,{key:0,onSubmit:d.onSubmit,onCancel:d.onCancel,onReset:d.onReset,resetable:d.resetable,disable:d.disable,submited:s.submited},{default:n(()=>[r("div",O,[i(y,{flat:"",bordered:"",title:e.$t("generalInformation")},{default:n(()=>[r("div",R,[i(u,{required:""},{default:n(()=>[f(b(e.$t("name")),1)]),_:1}),i(m,{modelValue:s.classlist.name,"onUpdate:modelValue":t[0]||(t[0]=l=>s.classlist.name=l),name:"name"},null,8,["modelValue"])]),r("div",w,[i(u,{required:""},{default:n(()=>[f(b(e.$t("capacity")),1)]),_:1}),i(m,{modelValue:s.classlist.capacity,"onUpdate:modelValue":t[1]||(t[1]=l=>s.classlist.capacity=l),name:"capacity",type:"number"},null,8,["modelValue"])]),r("div",J,[i(u,null,{default:n(()=>[f(b(e.$t("description")),1)]),_:1}),i(m,{modelValue:s.classlist.description,"onUpdate:modelValue":t[2]||(t[2]=l=>s.classlist.description=l),name:"description",type:"textarea"},null,8,["modelValue"])]),r("div",B,[i(V,{modelValue:s.classlist.urls,"onUpdate:modelValue":t[3]||(t[3]=l=>s.classlist.urls=l)},null,8,["modelValue"])]),r("div",Q,[i(k,{dense:"",modelValue:s.classlist.is_active,"onUpdate:modelValue":t[4]||(t[4]=l=>s.classlist.is_active=l),label:e.$t("active"),color:"green"},null,8,["modelValue","label"])])]),_:1},8,["title"])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(p(),h(S,{key:1}))]),_:1})}var E=x(P,[["render",T]]);export{E as default};
