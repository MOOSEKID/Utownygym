import{_ as N,m as b,T as _,u as Q,d as u,o as f,e as D,w as a,g as i,h as l,j as n,t as m,Q as V,O as h,f as w,p as A,F as B}from"./index.ec7eb99e.js";import{Q as G}from"./QPage.b13c45b6.js";import{P as I}from"./PermissionsModule.b2eb7670.js";import{S as M}from"./SkeletonSinglePage.dba71dd3.js";import{u as E}from"./staff.565aabca.js";import{u as F}from"./group.1903fd21.js";import{P as L}from"./mixins.af528ab3.js";import"./QSkeleton.73bc54f6.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./BaseSectionSkeleton.971da8dd.js";import"./page.e7247b54.js";import"./QExpansionItem.38c12bfd.js";import"./QSlideTransition.d1b840b3.js";import"./QMenu.76199ca9.js";import"./selection.571043d0.js";const v={groups:[],permissions:[],groupPermissions:[],is_active:!1,is_instructor:!1},R={mixins:[L],components:{PermissionsModule:I,SkeletonSinglePage:M},data(){return{defaultData:b.exports.cloneDeep(v),formData:b.exports.cloneDeep(v),modules:[],isPwd:!0,isConfPwd:!0}},methods:{..._(E,["store","show","update"]),..._(Q,["getModules"]),..._(F,{groupList:"get"}),onChangeGroup(e){if(console.func("pages/core/staffs/StaffPage:methods.onChangeGroup()",arguments),e.length<1){this.formData.groupPermissions=[];return}e.forEach(s=>{s.permissions.length&&s.permissions.forEach(p=>{let c=this.formData.groupPermissions.find(o=>o.id===p.id);c&&p.pivot.access!==null?c.access=p.pivot.access:c||this.formData.groupPermissions.push({id:p.id,access:p.pivot.access})})})}},async mounted(){await this.getModules().then(e=>{this.modules=e}),this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.formData=e,this.defaultData=b.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})}},z={class:"q-gutter-md"},T={class:"col-xs-12 col-sm-4"},j={class:"col-xs-12 col-sm-4"},x={class:"col-xs-12 col-sm-4"},O={class:"col-xs-12 col-sm-4"},H={class:"col-xs-12 col-sm-4"},J={class:"col-xs-12 col-sm-4"},K={class:"col-xs-12 col-sm-4"},W={class:"col-xs-12"},X={class:"col-xs-12"},Y={class:"col-sm-4 col-xs-12"},Z={class:"col-xs-12"},$={class:"row q-pt-md q-col-gutter-md"};function ee(e,s,p,c,o,P){const r=u("base-label"),d=u("base-input"),g=u("base-section"),y=u("base-select"),C=u("permissions-module"),k=u("base-form"),S=u("skeleton-single-page");return f(),D(G,{padding:""},{default:a(()=>[e.loaded?(f(),D(k,{key:0,onSubmit:e.onSubmit,onCancel:e.onCancel,onReset:e.onReset,resetable:e.resetable,disable:e.disable,submited:e.submited},{default:a(()=>[i("div",z,[l(g,{flat:"",bordered:"",title:e.$t("generalInformation"),description:e.$t("staff.generalDesc")},{default:a(()=>[i("div",T,[l(r,{required:""},{default:a(()=>[n(m(e.$t("firstName")),1)]),_:1}),l(d,{name:"first_name",modelValue:o.formData.first_name,"onUpdate:modelValue":s[0]||(s[0]=t=>o.formData.first_name=t)},null,8,["modelValue"])]),i("div",j,[l(r,{required:""},{default:a(()=>[n(m(e.$t("surname")),1)]),_:1}),l(d,{name:"last_name",modelValue:o.formData.last_name,"onUpdate:modelValue":s[1]||(s[1]=t=>o.formData.last_name=t)},null,8,["modelValue"])]),i("div",x,[l(r,{required:""},{default:a(()=>[n(m(e.$t("emailAddress")),1)]),_:1}),l(d,{name:"email",modelValue:o.formData.email,"onUpdate:modelValue":s[2]||(s[2]=t=>o.formData.email=t),type:"email"},null,8,["modelValue"])]),i("div",O,[l(r,null,{default:a(()=>[n(m(e.$t("phoneNumber")),1)]),_:1}),l(d,{name:"phone_number",modelValue:o.formData.phone_number,"onUpdate:modelValue":s[3]||(s[3]=t=>o.formData.phone_number=t),type:"tel"},null,8,["modelValue"])]),i("div",H,[l(r,null,{default:a(()=>[n(m(e.$t("keyFob")),1)]),_:1}),l(d,{name:"rfid",modelValue:o.formData.rfid,"onUpdate:modelValue":s[4]||(s[4]=t=>o.formData.rfid=t)},null,8,["modelValue"])])]),_:1},8,["title","description"]),l(g,{flat:"",bordered:"",title:e.$t("security"),description:e.$t("staff.securityInfo")},{default:a(()=>[i("div",J,[l(r,{required:""},{default:a(()=>[n(m(e.$t("password")),1)]),_:1}),l(d,{type:o.isPwd?"password":"text",modelValue:o.formData.password,"onUpdate:modelValue":s[6]||(s[6]=t=>o.formData.password=t),color:"blue-grey-14",name:"password"},{append:a(()=>[l(V,{name:o.isPwd?"fal fa-eye-slash":"fal fa-eye",class:"cursor-pointer",onClick:s[5]||(s[5]=t=>o.isPwd=!o.isPwd),size:"16px"},null,8,["name"])]),_:1},8,["type","modelValue"])]),i("div",K,[l(r,{required:""},{default:a(()=>[n(m(e.$t("confirmPassword")),1)]),_:1}),l(d,{type:o.isConfPwd?"password":"text",modelValue:o.formData.password_confirmation,"onUpdate:modelValue":s[8]||(s[8]=t=>o.formData.password_confirmation=t),color:"blue-grey-14",name:"password_confirmation"},{append:a(()=>[l(V,{name:o.isConfPwd?"fal fa-eye-slash":"fal fa-eye",class:"cursor-pointer",onClick:s[7]||(s[7]=t=>o.isConfPwd=!o.isConfPwd),size:"16px"},null,8,["name"])]),_:1},8,["type","modelValue"])]),i("div",W,[l(h,{dense:"",modelValue:o.formData.is_active,"onUpdate:modelValue":s[9]||(s[9]=t=>o.formData.is_active=t),label:e.$t("active"),color:"green"},null,8,["modelValue","label"])]),i("div",X,[l(h,{dense:"",modelValue:o.formData.is_instructor,"onUpdate:modelValue":s[10]||(s[10]=t=>o.formData.is_instructor=t),label:e.$t("isInstructor"),color:"green"},null,8,["modelValue","label"])])]),_:1},8,["title","description"]),l(g,{flat:"",bordered:"",title:e.$t("groupsAndPermissions"),description:e.$t("staff.permissionDesc")},{default:a(()=>[i("div",Y,[l(r,null,{default:a(()=>[n(m(e.$t("label.groups")),1)]),_:1}),l(y,{"bg-color":"white",placeholder:e.$t("placeholder.select"),dense:"",outlined:"",modelValue:o.formData.groups,"onUpdate:modelValue":[s[11]||(s[11]=t=>o.formData.groups=t),P.onChangeGroup],"filter-method":e.groupList,"map-options":"","use-filter":"",multiple:"","use-chips":"","option-label":"name","option-value":"id"},null,8,["placeholder","modelValue","filter-method","onUpdate:modelValue"])]),i("div",Z,[l(r,null,{default:a(()=>[n(m(e.$t("permissions")),1)]),_:1}),i("div",$,[(f(!0),w(B,null,A(o.modules,(t,U)=>(f(),w("div",{class:"col-xs-12 col-sm-3",key:t.id},[l(C,{"has-icon":"",edit:"",modelValue:o.formData.permissions,"onUpdate:modelValue":s[12]||(s[12]=q=>o.formData.permissions=q),"group-permissions":o.formData.groupPermissions,module:o.modules[U]},null,8,["modelValue","group-permissions","module"])]))),128))])])]),_:1},8,["title","description"])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(f(),D(S,{key:1}))]),_:1})}var De=N(R,[["render",ee]]);export{De as default};
