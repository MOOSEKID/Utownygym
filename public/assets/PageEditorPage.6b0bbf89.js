import{Q as u}from"./QPage.b13c45b6.js";import{ca as w,B as V,u as y,cJ as z,E as H,H as b,d as f,o as M,e as x,w as C,h as L,c as _}from"./index.ec7eb99e.js";import{u as P}from"./page.e7247b54.js";import{p as B}from"./index.esm.509f30d6.js";import{F as k}from"./FileSelectorDialog.014f4c1d.js";var S=m=>{try{const{Commands:a}=m;a.add("open-assets",{run(s,l,i){const{select:n}=i,{AssetManager:o}=s,{Asset:p}=o;w.create({component:k,componentProps:{loadFromServer:!0}}).onOk(d=>{n(new p({src:d.url}))})}})}catch(a){console.error("Error setting the command:",a)}};const r=[{type:"select",name:"layout",label:"Layout",changeProp:1,options:[{id:"list",label:"List"},{id:"grid",label:"Grid"}],default:"grid"},{type:"number",name:"paginate",label:"Records per page",changeProp:1,default:12}];var A={type:"announcements",name:"Announcements",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M480 32c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9L381.7 53c-48 48-113.1 75-181 75H192 160 64c-35.3 0-64 28.7-64 64v96c0 35.3 28.7 64 64 64l0 128c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V352l8.7 0c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V300.4c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4V32zm-64 76.7V240 371.3C357.2 317.8 280.5 288 200.7 288H192V192h8.7c79.8 0 156.5-29.8 215.3-83.3z"/></svg>',traits:[...r]},T={type:"blogs",name:"Blogs",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"/></svg>',traits:[...r]},F={type:"calendar",name:"Calendar",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M128 0c17.7 0 32 14.3 32 32V64H288V32c0-17.7 14.3-32 32-32s32 14.3 32 32V64h48c26.5 0 48 21.5 48 48v48H0V112C0 85.5 21.5 64 48 64H96V32c0-17.7 14.3-32 32-32zM0 192H448V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V192zm64 80v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm128 0v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H208c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V272c0-8.8-7.2-16-16-16H336zM64 400v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H80c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H208zm112 16v32c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16V400c0-8.8-7.2-16-16-16H336c-8.8 0-16 7.2-16 16z"/></svg>',traits:[{type:"url",name:"endpoint",label:"Endpoint",placeholder:"eg. https://example.com/calendar",changeProp:1}]},R={type:"contact-form",name:"Contact Form",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 75.2v361.7c0 24.3-19 43.2-43.2 43.2H43.2C19.3 480 0 461.4 0 436.8V75.2C0 51.1 18.8 32 43.2 32h361.7c24 0 43.1 18.8 43.1 43.2zm-37.3 361.6V75.2c0-3-2.6-5.8-5.8-5.8h-9.3L285.3 144 224 94.1 162.8 144 52.5 69.3h-9.3c-3.2 0-5.8 2.8-5.8 5.8v361.7c0 3 2.6 5.8 5.8 5.8h361.7c3.2 .1 5.8-2.7 5.8-5.8zM150.2 186v37H76.7v-37h73.5zm0 74.4v37.3H76.7v-37.3h73.5zm11.1-147.3l54-43.7H96.8l64.5 43.7zm210 72.9v37h-196v-37h196zm0 74.4v37.3h-196v-37.3h196zm-84.6-147.3l64.5-43.7H232.8l53.9 43.7zM371.3 335v37.3h-99.4V335h99.4z"/></svg>',traits:[{type:"select",name:"form",label:"From",changeProp:1,options:[{id:"",label:"Select a Form"}]}]},D={type:"footer",name:"Footer",media:'<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 35 35" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M0,0v25.366h35V0H0z M32.879,23.245H2.121V2.121h30.758V23.245z"></path> <rect y="28.283" width="35" height="6.717"></rect> </g> </g> </g></svg>',traits:[{type:"select",name:"layout",label:"Layout",changeProp:1,options:[{id:"",label:"Select"},{id:"default",label:"Default"}],default:""},{type:"textarea",name:"desc",label:"Description",changeProp:1,default:""}]},G={type:"header",name:"Header",media:'<svg id="Capa_1" data-name="Capa 1" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 800 800"><path class="cls-1" d="M800,800V220.2S0,220.2,0,220.2v579.8s800,0,800,0ZM48.5,268.7h703v482.8H48.5v-482.8s0,0,0,0Z"/><rect class="cls-1" x="0" width="800" height="153.5"/></svg>',traits:[{type:"select",name:"layout",label:"Layout",changeProp:1,options:[{id:"",label:"Select"},{id:"classic",label:"Classic"},{id:"overlay",label:"Overlay"}],default:""},{type:"select",name:"container",label:"Container",changeProp:1,options:[{id:"container",label:"Dense"},{id:"container-fluid",label:"Fluid"}],default:"container"},{type:"input",name:"ctalabel",label:"CTA Label",changeProp:1,default:"Get Started"},{type:"input",name:"ctalink",label:"CTA Link",changeProp:1,default:""}]},j={type:"opening-times",name:"Opening Times",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"/></svg>',traits:[]},E={type:"plans",name:"Plans",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M256 48c0-26.5 21.5-48 48-48H592c26.5 0 48 21.5 48 48V464c0 26.5-21.5 48-48 48H381.3c1.8-5 2.7-10.4 2.7-16V253.3c18.6-6.6 32-24.4 32-45.3V176c0-26.5-21.5-48-48-48H256V48zM571.3 347.3c6.2-6.2 6.2-16.4 0-22.6l-64-64c-6.2-6.2-16.4-6.2-22.6 0l-64 64c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0L480 310.6V432c0 8.8 7.2 16 16 16s16-7.2 16-16V310.6l36.7 36.7c6.2 6.2 16.4 6.2 22.6 0zM0 176c0-8.8 7.2-16 16-16H368c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16H16c-8.8 0-16-7.2-16-16V176zm352 80V480c0 17.7-14.3 32-32 32H64c-17.7 0-32-14.3-32-32V256H352zM144 320c-8.8 0-16 7.2-16 16s7.2 16 16 16h96c8.8 0 16-7.2 16-16s-7.2-16-16-16H144z"/></svg>',traits:[...r]},O={type:"products",name:"Products",media:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M58.9 42.1c3-6.1 9.6-9.6 16.3-8.7L320 64 564.8 33.4c6.7-.8 13.3 2.7 16.3 8.7l41.7 83.4c9 17.9-.6 39.6-19.8 45.1L439.6 217.3c-13.9 4-28.8-1.9-36.2-14.3L320 64 236.6 203c-7.4 12.4-22.3 18.3-36.2 14.3L37.1 170.6c-19.3-5.5-28.8-27.2-19.8-45.1L58.9 42.1zM321.1 128l54.9 91.4c14.9 24.8 44.6 36.6 72.5 28.6L576 211.6v167c0 22-15 41.2-36.4 46.6l-204.1 51c-10.2 2.6-20.9 2.6-31 0l-204.1-51C79 419.7 64 400.5 64 378.5v-167L191.6 248c27.8 8 57.6-3.8 72.5-28.6L318.9 128h2.2z"/></svg>',traits:[...r]},U=[G,D,A,T,F,R,j,E,O];const q=U,N=S,K={__name:"PageEditorPage",setup(m){const a=V(null),s=P(),l=y(),i=z(),n=H(()=>i.params.id),o=e=>_.apiBaseURL(e),p={async load(){return s.show(n.value).then(({data:e})=>e)},async store(e){return s.update({...e,id:n.value}).then(({data:t})=>t.data)}},d=[N],g={height:"100vh",storageManager:{type:"remote",stepsBeforeSave:3,options:{remote:{onStore:(e,t)=>({data:e,body:t.getHtml(),styles:t.getCss()}),onLoad:e=>e}}},assetManager:{assets:[],uploadName:"media",upload:o("/files/store?assets=true"),headers:{Authorization:`Bearer ${l.token}`},onUploaded:(e,t)=>{e.assetManager.add(t==null?void 0:t.url)}}},h={[B]:{projects:o("/pages/templates"),blocks:o("/pages/blocks"),headers:{Accpet:"application/json","Content-Type":"application/json",Authorization:`Bearer ${l.token}`},shortcodes:{loader:(e,t)=>{s.shortCode({content:t}).then(c=>{e.innerHTML=c}).catch(c=>{console.error(c),e.innerHTML=content})},items:[...q]}}},v=()=>s.editorTheme().then(e=>e).catch(()=>({}));return b(async()=>{a.value.render({canvas:await v()})}),(e,t)=>{const c=f("q-html-builder");return M(),x(u,null,{default:C(()=>[L(c,{ref_key:"editor",ref:a,custom:"",plugins:d,"plugins-opts":h,config:g,remote:p},null,512)]),_:1})}}};export{K as default};
