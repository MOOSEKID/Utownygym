import{T as y,_ as D,d as i,o as d,e as p,w as s,h as e,g as r,O as x,U as $,f as v,F as w,p as A,R as P,N as g,l as Q,W as _,j as k,t as S}from"./index.ec7eb99e.js";import{Q as C}from"./QScrollArea.7b825e0c.js";import{Q as H}from"./QPage.b13c45b6.js";import{u as f}from"./location.60ab6585.js";import{A as q}from"./AddressFields.afbf970a.js";import{S as I}from"./SkeletonSinglePage.dba71dd3.js";import{S as O}from"./SettingsPageHeader.b1719c9d.js";import"./QResizeObserver.0de2c530.js";import"./QScrollObserver.fe7ed8a7.js";import"./TouchPan.7d0ea6c3.js";import"./touch.9135741d.js";import"./selection.571043d0.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./QSkeleton.73bc54f6.js";const B={components:{AddressFields:q},props:{title:String,modelValue:Object},data(){return{location:{},loading:!1}},emits:["ok","hide"],methods:{...y(f,["store","update"]),async show(){console.func("components/shop/VariantDialog:methods.show()",arguments),this.location={...this.modelValue},this.$refs.dialog.show()},hide(){console.func("components/shop/VariantDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/shop/VariantDialog:methods.onDialogHide()",arguments),this.location={active:!0},this.$emit("hide")},onDone(){console.func("components/shop/VariantDialog:methods.onDone()",arguments),this.loading=!0,(this.creating?this.store:this.update)(this.location).then(({data:o})=>{this.$emit("ok",o),this.hide(),this.loading=!1}).catch(o=>{this.$core.error(o),this.loading=!1})}},computed:{creating(){var t;return!((t=this.location)!=null&&t.id)}}},E={class:"col-sm-12 col-xs-12"},F={class:"col-xs-12"},N={class:"col-xs-12"};function U(t,o,b,L,n,c){const m=i("base-input"),u=i("address-fields"),h=i("base-section"),l=i("base-dialog");return d(),p(l,{title:b.title,"body-class":"q-pa-none scroll",ref:"dialog",onHide:c.onDialogHide,onOk:c.onDone,"use-separator":"",persistent:"",loading:n.loading},{body:s(()=>[e(h,{flat:""},{default:s(()=>[r("div",E,[o[3]||(o[3]=r("div",{class:"text-label"},"Location name",-1)),o[4]||(o[4]=r("div",{class:"text-label"}," Give this location a short name to make it easy to identify. You\u2019ll see this name in areas like orders and products. If this location offers local pickup, it will be visible to your customers at checkout and in notifications. ",-1)),e(m,{modelValue:n.location.name,"onUpdate:modelValue":o[0]||(o[0]=a=>n.location.name=a)},null,8,["modelValue"])]),r("div",F,[e(u,{modelValue:n.location,"onUpdate:modelValue":o[1]||(o[1]=a=>n.location=a)},null,8,["modelValue"])]),r("div",N,[e(x,{dense:"",modelValue:n.location.active,"onUpdate:modelValue":o[2]||(o[2]=a=>n.location.active=a),label:"Active"},null,8,["modelValue"])])]),_:1})]),_:1},8,["title","onHide","onOk","loading"])}var V=D(B,[["render",U]]);const T={components:{SkeletonSinglePage:I,SettingsPageHeader:O},data(){return{loaded:!1}},methods:{...y(f,["get"]),onEdit(t){console.func("components/settings/ShopLocationsDialog:methods.onEdit()",arguments),this.$q.dialog({component:V,componentProps:{modelValue:t,title:this.$t("updateLocation")}})},onAdd(){console.func("components/settings/ShopLocationsDialog:methods.onAdd()",arguments),this.$q.dialog({component:V,componentProps:{modelValue:{active:!0},title:this.$t("addLocation")}})}},computed:{...$(f,["rows"])},mounted(){this.get().then(()=>{this.loaded=!0}).catch(t=>{this.$core.error(t)})}},j={key:0,class:"locations-settings"},Y={class:"bg-white address-list rounded-border"};function G(t,o,b,L,n,c){const m=i("base-btn"),u=i("settings-page-header"),h=i("skeleton-single-page");return d(),p(H,{padding:""},{default:s(()=>[e(u,{class:"q-mb-md",title:"Shop Locations","back-route":"Settings",hint:t.$t("manageThePlacesYouStockInventoryFulfillOrdersAndSellProducts")},{action:s(()=>[e(m,{label:t.$t("addLocation"),onClick:c.onAdd},null,8,["label","onClick"])]),_:1},8,["hint"]),n.loaded?(d(),v("div",j,[e(C,{style:{height:"calc(100vh - 300px)"}},{default:s(()=>[r("div",Y,[(d(!0),v(w,null,A(t.rows,(l,a)=>(d(),p(P,{class:"address-card q-py-md",key:a},{default:s(()=>[e(g,{top:"",avatar:""},{default:s(()=>[e(Q,{color:l.active?"primary":"negative","text-color":"white",icon:"fas fa-location-dot"},null,8,["color"])]),_:2},1024),e(g,null,{default:s(()=>[e(_,null,{default:s(()=>[k(S(l.name),1)]),_:2},1024),e(_,{caption:"",lines:"2"},{default:s(()=>[k(S(l.address_label),1)]),_:2},1024)]),_:2},1024),e(g,{side:""},{default:s(()=>[e(_,null,{default:s(()=>[e(m,{dense:"",flat:"",color:"grey",onClick:R=>c.onEdit(l),icon:"fas fa-edit"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]),_:1})])):(d(),p(h,{key:1}))]),_:1})}var co=D(T,[["render",G]]);export{co as default};
