import{Q as U}from"./QScrollArea.7b825e0c.js";import{Q as q}from"./QPage.b13c45b6.js";import{T as x,_ as D,d as p,o,e as i,w as n,h as t,f as c,F as v,g as m,j as g,t as u,i as y,p as $,O as C,N as S,Q as E,W as f,ae as O,R as A,U as B,ar as H}from"./index.ec7eb99e.js";import{u as w}from"./payment-method.c410ea94.js";import{S as I}from"./SkeletonSinglePage.dba71dd3.js";import{S as L}from"./SettingsPageHeader.b1719c9d.js";import"./QResizeObserver.0de2c530.js";import"./QScrollObserver.fe7ed8a7.js";import"./TouchPan.7d0ea6c3.js";import"./touch.9135741d.js";import"./selection.571043d0.js";import"./QSkeleton.73bc54f6.js";const N={props:{title:String,modelValue:Object},data(){return{payment:this.modelValue,loading:!1}},emits:["ok","hide"],methods:{...x(w,["update"]),async show(){console.func("components/settings/PaymentMethodDialog:methods.show()",arguments),this.payment=this.modelValue,this.$refs.dialog.show()},hide(){console.func("components/settings/PaymentMethodDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/settings/PaymentMethodDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/settings/PaymentMethodDialog:methods.onDone()",arguments),this.loading=!0,this.update(this.payment).then(({data:e})=>{this.$emit("ok",e),this.hide(),this.loading=!1}).catch(e=>{this.$core.error(e),this.loading=!1})}},computed:{creating(){var e;return!((e=this.payment)!=null&&e.id)},manual(){return this.payment.provider=="manual"}}},R={class:"col-xs-12"},F={class:"col-xs-12"},W={class:"col-xs-12"},j={class:""},z={key:0,class:"q-mt-sm"},G=["href"],J={key:0,class:"col-xs-12"},K={class:"col-xs-12"},X={class:"row q-col-gutter-sm"},Y={class:"col-xs-12"},Z={key:0,class:"col-xs-12"};function ee(e,a,l,M,s,h){const d=p("base-label"),_=p("base-input"),b=p("base-btn"),k=p("base-section"),P=p("base-dialog");return o(),i(P,{title:l.title,"body-class":"q-pa-none scroll",ref:"dialog",onHide:h.onDialogHide,onOk:h.onDone,"use-separator":"",persistent:"",loading:s.loading},{body:n(()=>[t(k,{flat:""},{default:n(()=>{var V;return[h.manual?(o(),c(v,{key:0},[m("div",R,[t(d,null,{default:n(()=>[g(u(e.$t("label.additionalDetails")),1)]),_:1}),t(_,{type:"textarea",hint:e.$t("hint.displaysToCustomersWhenTheyReChoosingAPaymentMethod")},null,8,["hint"])]),m("div",F,[t(d,null,{default:n(()=>[g(u(e.$t("label.paymentInstructions")),1)]),_:1}),t(_,{type:"textarea",hint:e.$t("hint.displaysToCustomersAfterTheyPlaceAnOrderWithThisPaymentMethod")},null,8,["hint"])])],64)):(o(),c(v,{key:1},[m("div",W,[t(d,null,{default:n(()=>[g(u(e.$t("label.aboutPaymentName",{name:s.payment.name})),1)]),_:1}),m("div",j,u(s.payment.description),1),s.payment.link?(o(),c("div",z,[a[4]||(a[4]=g(" Learn more about ")),m("a",{href:s.payment.link,target:"_blank",rel:"noopener noreferrer"},u(s.payment.name),9,G)])):y("",!0)]),(o(!0),c(v,null,$((V=s.payment)==null?void 0:V.credentials,(r,Q)=>(o(),c("div",{class:"col-xs-12",key:Q},[t(d,null,{default:n(()=>[g(u(r.label),1)]),_:2},1024),t(_,{modelValue:r.value,"onUpdate:modelValue":T=>r.value=T},null,8,["modelValue","onUpdate:modelValue"])]))),128)),s.payment.webhook?(o(),c("div",J,[t(d,null,{default:n(()=>[g(u(e.$t("label.webhookEndpoint")),1)]),_:1}),t(_,{modelValue:s.payment.webhook,"onUpdate:modelValue":a[1]||(a[1]=r=>s.payment.webhook=r),readonly:""},{append:n(()=>[t(b,{onClick:a[0]||(a[0]=r=>e.$core.copyToClipboard(s.payment.webhook)),dense:"",flat:"",icon:"fas fa-clipboard"})]),_:1},8,["modelValue"])])):y("",!0)],64)),m("div",K,[m("div",X,[m("div",Y,[t(C,{dense:"",modelValue:s.payment.active,"onUpdate:modelValue":a[2]||(a[2]=r=>s.payment.active=r),label:e.$t("label.active")},null,8,["modelValue","label"])]),h.manual?y("",!0):(o(),c("div",Z,[t(C,{dense:"",modelValue:s.payment.test_mode,"onUpdate:modelValue":a[3]||(a[3]=r=>s.payment.test_mode=r),label:e.$t("label.testMode")},null,8,["modelValue","label"])]))])])]}),_:1})]),_:1},8,["title","onHide","onOk","loading"])}var te=D(N,[["render",ee]]);const oe=e=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/.test(e),ne={props:{logo:String,link:String,name:String,description:String,active:Boolean,test_mode:Boolean},emits:["edit"],computed:{isUrlLogo(){return oe(this.logo)}}},se=["src"],ae=["href"];function le(e,a,l,M,s,h){const d=p("base-status"),_=p("base-btn");return o(),i(A,null,{default:n(()=>[t(S,{avatar:""},{default:n(()=>[h.isUrlLogo?(o(),c("img",{key:0,style:{width:"30px"},src:l.logo},null,8,se)):(o(),i(E,{key:1,size:"30px",color:"primary",name:l.logo},null,8,["name"]))]),_:1}),t(S,null,{default:n(()=>[l.link?(o(),i(f,{key:0,caption:""},{default:n(()=>[m("a",{href:l.link,target:"_blank",rel:"noopener noreferrer"},u(l.name),9,ae)]),_:1})):(o(),i(f,{key:1},{default:n(()=>[g(u(l.name),1)]),_:1})),t(f,{caption:"",lines:"2"},{default:n(()=>[g(u(l.description),1)]),_:1}),l.active||l.test_mode?(o(),i(f,{key:2},{default:n(()=>[l.active?(o(),i(d,{key:0,class:"q-ma-none",type:"Active"})):y("",!0),l.test_mode?(o(),i(d,{key:1,type:"Test Mode"})):y("",!0)]),_:1})):y("",!0)]),_:1}),t(S,{side:""},{default:n(()=>[t(f,null,{default:n(()=>[t(_,{onClick:a[0]||(a[0]=O(b=>e.$emit("edit"),["stop"])),color:"grey",icon:"fas fa-edit",flat:"",dense:"",round:""})]),_:1})]),_:1})]),_:1})}var ie=D(ne,[["render",le]]);const de={components:{SkeletonSinglePage:I,PaymentMethod:ie,SettingsPageHeader:L},data(){return{loaded:!1}},methods:{...x(w,["get"]),onEdit(e){console.func("components/settings/ShopLocationsDialog:methods.onEdit()",arguments),this.$q.dialog({component:te,componentProps:{modelValue:e,title:`Set up ${e==null?void 0:e.name}`}})}},computed:{...B(w,["rows"])},mounted(){this.get().then(()=>{this.loaded=!0}).catch(e=>{this.$core.error(e)})}},re={key:0,class:"payment-methods"},me={class:"bg-white payments-list rounded-border"};function ce(e,a,l,M,s,h){const d=p("settings-page-header"),_=p("payment-method"),b=p("skeleton-single-page");return o(),i(q,{padding:""},{default:n(()=>[t(d,{class:"q-mb-md",title:e.$route.meta.title,"back-route":"Settings",hint:e.$t("managingPaymentMethodsInvolvesOfferingDiverseOptionsForCustomersToSecurelyCompletePurchases")},null,8,["title","hint"]),s.loaded?(o(),c("div",re,[t(U,{style:{height:"calc(100vh - 300px)"}},{default:n(()=>[m("div",me,[(o(!0),c(v,null,$(e.rows,(k,P)=>(o(),i(_,H({key:P,class:"payments-card q-py-md",ref_for:!0},k,{onEdit:V=>h.onEdit(k)}),null,16,["onEdit"]))),128))])]),_:1})])):(o(),i(b,{key:1}))]),_:1})}var Se=D(de,[["render",ce]]);export{Se as default};
