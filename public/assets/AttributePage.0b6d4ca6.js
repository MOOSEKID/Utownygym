import{_ as x,cr as P,m as p,T as U,d as r,o as u,e as b,w as a,g as i,h as e,j as c,t as h,f as S,p as R,aq as B,i as D,R as T,N as k,l as $,k as z,W as A,O,X as F,F as J,s as I,Y}from"./index.ec7eb99e.js";import{Q as E}from"./QColor.4cf39332.js";import{Q as L}from"./QPopupProxy.64b9fae0.js";import{Q as j}from"./QPage.b13c45b6.js";import{S as G}from"./SkeletonSinglePage.dba71dd3.js";import{u as M}from"./attribute.2c30f9c8.js";import"./TouchPan.7d0ea6c3.js";import"./touch.9135741d.js";import"./selection.571043d0.js";import"./QResizeObserver.0de2c530.js";import"./rtl.276c3f1b.js";import"./QTabPanel.fe7180a4.js";import"./QMenu.76199ca9.js";import"./QSkeleton.73bc54f6.js";const Q={name:"",is_button:!1,values:[]},W={components:{ThumbnailSelector:P,SkeletonSinglePage:G},data(){return{loaded:!1,submited:!1,default:p.exports.cloneDeep(Q),attribute:p.exports.cloneDeep(Q),options:[]}},methods:{...U(M,["show","store","update"]),onSubmit(t){console.func("pages/admins/attributes/AttributePage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.attribute).then(({data:m,message:V})=>{this.submited=!1,this.$q.notify(V),this.attribute=m,this.default=p.exports.cloneDeep(m),this.$router.push({name:"Attribute",params:{id:m.id},query:{action:"edit"}})}).catch(m=>{this.submited=!1,this.$core.error(m,{title:this.$t("dialog.title.error")})})},onReset(t){console.func("pages/admins/attributes/AttributePage:methods.onReset()",arguments),this.loaded=!1,setTimeout(()=>{this.attribute=p.exports.cloneDeep(this.default),this.loaded=!0},1)},onCancel(t){console.func("pages/admins/attributes/AttributePage:methods.onCancel()",arguments),this.$router.back()},onAddValue(t){console.func("pages/admins/attributes/AttributePage:method.onAddValue()",arguments),this.attribute.values.push(t)},onRemoveValue(t){console.func("pages/admins/attributes/AttributePage:method.onRemoveValue()",arguments),this.attribute.values.splice(t,1)}},mounted(){this.creating?this.loaded=!0:this.show(this.id).then(t=>{this.attribute=t,this.default=p.exports.cloneDeep(t),this.loaded=!0}).catch(t=>{this.$emit("error",t)})},computed:{edit(){return["add","edit"].includes(this.action)||this.creating},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.attribute)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.attribute)!==JSON.stringify(this.default)}}},X={class:"row q-col-gutter-md"},H={class:"col-xs-12 col-sm-9"},K={class:"q-gutter-md"},Z={class:"col-xs-12"},ee={class:"col-xs-12"},te={class:"flex items-center"},ae={class:"col-xs-12 col-sm-3"},se={class:"q-gutter-md"};function oe(t,o,m,V,l,d){const f=r("base-label"),v=r("base-input"),g=r("base-section"),q=r("base-btn"),y=r("base-tooltip"),w=r("thumbnail-selector"),C=r("base-form"),N=r("skeleton-single-page");return u(),b(j,{padding:""},{default:a(()=>[l.loaded?(u(),b(C,{key:0,onSubmit:d.onSubmit,onCancel:d.onCancel,onReset:d.onReset,resetable:d.resetable,disable:d.disable,submited:l.submited},{default:a(()=>[i("div",X,[i("div",H,[i("div",K,[e(g,{flat:"",bordered:"",title:"General information",description:"Attributes let you define extra product data, such as size or colour. You can use these attributes in the shop sidebar using the `layered nav` widgets."},{default:a(()=>[i("div",Z,[e(f,null,{default:a(()=>[c(h(t.$t("label.name")),1)]),_:1}),e(v,{modelValue:l.attribute.name,"onUpdate:modelValue":o[0]||(o[0]=s=>l.attribute.name=s)},null,8,["modelValue"])])]),_:1}),e(g,{flat:"",bordered:"",title:"Values",description:"Attribute values can be assigned to products and variations."},{default:a(()=>[i("div",ee,[(u(!0),S(J,null,R(l.attribute.values,(s,_)=>(u(),S("div",{key:_,class:"q-mb-md value"},[i("div",te,[e(f,null,{default:a(()=>[c(h(t.$t("label.value"))+" "+h(_+1),1)]),_:2},1024),e(B),l.attribute.values.length>1?(u(),b(q,{key:0,link:"",class:"q-ml-sm",padding:"0",label:t.$t("label.remove"),onClick:n=>d.onRemoveValue(_)},null,8,["label","onClick"])):D("",!0)]),e(T,{class:"q-pa-none"},{default:a(()=>[e(k,{avatar:""},{default:a(()=>[s.has_thumbnail?(u(),b(w,{key:0,mini:"","load-from-server":"","dialog-label":t.$t("label.uploadthumbnail"),icon:"fad fa-image",hint:"You can only choose images as value media","model-value":s.thumbnail,"onUpdate:modelValue":n=>s.thumbnail=n},{default:a(()=>[e(y,{position:"top"},{default:a(()=>o[3]||(o[3]=[c(" Select an image ")])),_:1})]),_:2},1032,["dialog-label","model-value","onUpdate:modelValue"])):(u(),b($,{key:1,rounded:"",size:"60px",style:z({background:s.color||"var(--q-primary)"}),icon:"fas fa-eye-dropper","text-color":"white"},{default:a(()=>[e(L,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(E,{modelValue:s.color,"onUpdate:modelValue":n=>s.color=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(y,{position:"top"},{default:a(()=>o[4]||(o[4]=[c(" Select color ")])),_:1})]),_:2},1032,["style"]))]),_:2},1024),e(k,null,{default:a(()=>[e(A,null,{default:a(()=>[e(v,{modelValue:s.name,"onUpdate:modelValue":n=>s.name=n,placeholder:"Name"},null,8,["modelValue","onUpdate:modelValue"]),e(O,{class:"q-mt-sm",dense:"",size:"xs",label:t.$t("label.imagePreviewForThisValue"),modelValue:s.has_thumbnail,"onUpdate:modelValue":n=>s.has_thumbnail=n,color:"green"},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(F,{class:"q-mt-md"})]))),128)),e(I,{"no-caps":"",outline:"",label:t.$t("label.AddNewAttributeName",{attribute:l.attribute.name}),onClick:o[1]||(o[1]=s=>d.onAddValue({id:!1,name:null,has_thumbnail:!1,color:null}))},null,8,["label"])])]),_:1})])]),i("div",ae,[e(g,{flat:"",bordered:"","no-row":""},{default:a(()=>[i("div",se,[i("div",null,[e(f,null,{default:a(()=>[c(h(t.$t("label.attributeVisibilityMode")),1)]),_:1}),e(Y,{label:t.$t("label.isButton"),dense:"",size:"sm",modelValue:l.attribute.is_button,"onUpdate:modelValue":o[2]||(o[2]=s=>l.attribute.is_button=s),color:"green"},null,8,["label","modelValue"]),e(A,{class:"q-mt-sm"},{default:a(()=>o[5]||(o[5]=[c(" Enable this if you want to show this attribute as button on products in your store. ")])),_:1})])])]),_:1})])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(u(),b(N,{key:1}))]),_:1})}var Ve=x(W,[["render",oe]]);export{Ve as default};
