import{Q as v,a as D}from"./QLayout.472d624a.js";import{L as k}from"./LayoutHeader.9cd68df5.js";import{L as S}from"./LayoutDrawer.9d1e254e.js";import{U as _,u,_ as h,o as n,e as d,w as o,h as r,al as P,g as l,t as q,f as w,ai as C,d as t,S as x,T as M,i as L,aY as H,aZ as Q}from"./index.ec7eb99e.js";import{P as B}from"./ParqForm.cc3166b0.js";import{T as N}from"./TextSkeleton.6498b2fb.js";import{Q as U}from"./QBadge.f11b4156.js";import{u as A}from"./shop.dab3014b.js";import"./QScrollObserver.fe7ed8a7.js";import"./QResizeObserver.0de2c530.js";import"./QHeader.f8476258.js";import"./logo.d17bc7ed.js";import"./QDrawer.cd602d9b.js";import"./TouchPan.7d0ea6c3.js";import"./touch.9135741d.js";import"./selection.571043d0.js";import"./QExpansionItem.38c12bfd.js";import"./QSlideTransition.d1b840b3.js";import"./mixins.af528ab3.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./BaseSectionSkeleton.971da8dd.js";import"./QSkeleton.73bc54f6.js";import"./page.e7247b54.js";import"./QMenu.76199ca9.js";import"./SkeletonSinglePage.dba71dd3.js";const T={props:{first_name:String,last_name:String,id:[String,Number]},computed:{..._(u,["config"]),name(){return this.first_name+" "+this.last_name},mId(){const e=String(this.id);return e.length<4?e.padStart(4,"0"):e}}},I={class:"text-h6 title text-uppercase"},V={class:"logo"},z=["src"],F={key:1,src:"/images/logo.png"},O={class:"text-right id text-subtitle2"};function R(e,i,p,f,c,s){return n(),d(C,{flat:"",bordered:"",class:"member-card"},{default:o(()=>[r(P,null,{default:o(()=>{var a,m;return[l("div",I,q(s.name),1),l("div",V,[(a=e.config)!=null&&a.logo?(n(),w("img",{key:0,src:(m=e.config)==null?void 0:m.logo},null,8,z)):(n(),w("img",F))]),l("div",O,q(e.$t("membershipNumber"))+": "+q(s.mId),1)]}),_:1})]),_:1})}var E=h(T,[["render",R]]);const Y={components:{TextSkeleton:N,ParqForm:B},props:{requestParq:Boolean},data(){return{loading:!0}},emits:["ok","hide"],methods:{async show(){console.func("components/MemberDialog:methods.show()",arguments),this.$refs.dialog.show(),this.loading=!1},hide(){console.func("components/MemberDialog:methods.close()",arguments),this.$refs.dialog.hide(),this.loading=!0},onDialogHide(){console.func("components/MemberDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/MemberDialog:methods.onDone()",arguments),this.$emit("ok"),this.hide()}},computed:{..._(u,["user"])}},Z={class:"col-xs-12"};function j(e,i,p,f,c,s){const a=t("parq-form"),m=t("base-section"),g=t("text-skeleton"),b=t("base-dialog");return n(),d(b,{title:e.$t("parq"),"body-class":"q-pa-none scroll","content-style":"width: 950px; max-width: 95vw",ref:"dialog",onHide:s.onDialogHide,"use-separator":"","hide-footer":"",persistent:""},x({body:o(()=>[r(m,{flat:"",bordered:""},{default:o(()=>[l("div",Z,[r(a,{onDone:s.onDone,"request-parq":p.requestParq,member:e.user,"onUpdate:member":i[0]||(i[0]=$=>e.user=$)},null,8,["onDone","request-parq","member"])])]),_:1})]),_:2},[c.loading?{name:"loading",fn:o(()=>[r(g)]),key:"0"}:void 0]),1032,["title","onHide"])}var G=h(Y,[["render",j]]);const J={computed:{..._(A,["cartTotal","cartCount"])}};function K(e,i,p,f,c,s){const a=t("base-btn");return n(),d(a,{rounded:"",flat:"",size:"18px",icon:"fal fa-cart-shopping",to:{name:"Cart"}},{default:o(()=>[r(U,{rounded:"",style:{padding:"4px 6px","font-weight":"bold"},floating:"",label:e.cartCount},null,8,["label"])]),_:1})}var W=h(J,[["render",K]]);const X={components:{LayoutHeader:k,LayoutDrawer:S,MemberCard:E,ShopCart:W},computed:{..._(u,["user","config","appSideMenus"]),menus(){return this.appSideMenus.filter(e=>(e==null?void 0:e.show)!==!1)}},methods:{...M(u,["currentUser"]),showParq(){console.func("layouts/AppLayout:methods.showParq()",arguments),this.$q.dialog({component:G,componentProps:{requestParq:!0}}).onOk(()=>{this.currentUser()})}},mounted(){this.currentUser().then(()=>{this.user.request_parq?this.showParq():this.user.request_avatar&&this.$core.warning(this.$t("avatarDialogMessage"),{title:this.$t("updatePIC"),ok:this.$t("uploadNow")}).onOk(()=>{this.$router.push({name:"My Account",query:{avatar:!0}})})})}},ee={class:"card absolute-bottom q-pa-md"};function te(e,i,p,f,c,s){const a=t("shop-cart"),m=t("layout-header"),g=t("member-card"),b=t("layout-drawer"),$=t("router-view");return n(),d(D,{view:"hHh LpR lFr",class:"bg-main"},{default:o(()=>[r(m,{onUpdateLeftDrawer:i[0]||(i[0]=y=>e.$refs.layoutDrawer.toggle())},{"header-items":o(()=>{var y;return[(y=e.config)!=null&&y.shop?(n(),d(a,{key:0,class:"q-mr-sm",dense:""})):L("",!0)]}),_:1}),r(b,{class:"admin-side-links",ref:"layoutDrawer","side-menus":s.menus},{default:o(()=>[l("div",ee,[r(g,H(Q(e.user)),null,16)])]),_:1},8,["side-menus"]),r(v,null,{default:o(()=>[(n(),d($,{key:e.$router.fullPath}))]),_:1})]),_:1})}var xe=h(X,[["render",te]]);export{xe as default};
