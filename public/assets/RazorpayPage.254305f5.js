import{_ as w,d as s,o as n,e as p,w as i,g as c,ad as b,ag as v,h as t,aj as z,s as P,f as u,aq as q,t as h,V as C,i as B}from"./index.ec7eb99e.js";import{Q}from"./QPage.b13c45b6.js";import{P as $}from"./payment.7eb652a0.js";import{_ as E}from"./logo.d17bc7ed.js";import"./QBadge.f11b4156.js";import"./QSkeleton.73bc54f6.js";const I={mixins:[$],data(){return{orderID:null}},methods:{async load(){try{await this.loadRazorpay();const e=await this.token({provider:"razorpay",query:this.$route.query});Object.assign(this,e),this.loaded=!0}catch(e){this.$core.error(e)}},loadRazorpay(){return new Promise((e,l)=>{const o=document.createElement("script");o.src="https://checkout.razorpay.com/v1/checkout.js",o.onload=e,o.onerror=l,document.head.appendChild(o)})},initiatePayment(){const e={key:this.API_KEY,amount:this.order.raw_amount*100,currency:this.order.currency,order_id:this.orderID,handler:async o=>{this.process({provider:"razorpay",query:{...this.$route.query,...o}})},prefill:this.billing_details};new Razorpay(e).open()}},async mounted(){this.load()},computed:{API_KEY(){var e;return(e=this.paymentProvider("razorpay"))==null?void 0:e.API_KEY}}},D={style:{width:"350px"}},N=["src"],R={key:1,width:"100",src:E},V={class:"details"},j={class:"text-subtitle2"},x={class:"text-grey-6 text-weight-regular"};function A(e,l,o,K,S,y){const _=s("order-items"),f=s("base-btn"),g=s("base-section"),k=s("payment-skeleton");return n(),p(Q,{class:"flex flex-center",padding:""},{default:i(()=>[c("div",D,[b(t(g,{"no-row":""},{default:i(()=>[t(z,{class:"q-pa-none"},{default:i(()=>{var r,a,d,m;return[t(P,{flat:"",round:"",dense:"",icon:"far fa-arrow-left",size:"sm",class:"q-mr-sm",onClick:e.onBack},null,8,["onClick"]),(r=e.config)!=null&&r.logo?(n(),u("img",{key:0,width:"100",src:(a=e.config)==null?void 0:a.logo},null,8,N)):(n(),u("img",R)),t(q),c("div",V,[c("div",j,h((d=e.order)==null?void 0:d.amount),1),c("div",x,h((m=e.order)==null?void 0:m.label),1)])]}),_:1}),t(C,{class:"q-mt-md"},{default:i(()=>{var r,a;return[t(_,{"line-items":(r=e.order)==null?void 0:r.line_items,currency:(a=e.order)==null?void 0:a.currency},null,8,["line-items","currency"])]}),_:1}),t(f,{onClick:y.initiatePayment,color:"primary",label:"Pay Now",size:"md",class:"full-width q-mt-md"},null,8,["onClick"])]),_:1},512),[[v,e.loaded]]),e.loaded?B("",!0):(n(),p(k,{key:0,"single-col":""}))])]),_:1})}var G=w(I,[["render",A]]);export{G as default};
