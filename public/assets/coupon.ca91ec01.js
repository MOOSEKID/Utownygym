import{bt as i,c as n,A as o}from"./index.ec7eb99e.js";const c=e=>[{label:e.$t("label.all"),value:null},{label:e.$t("label.active"),value:!0}],u=e=>[{label:e.$t("label.forever"),value:"forever"},{label:e.$t("label.once"),value:"once"},{label:e.$t("label.repeating"),value:"repeating"}],r=e=>[{label:e.$t("label.daily"),value:"day"},{label:e.$t("label.weekly"),value:"week"},{label:e.$t("label.monthly"),value:"month"},{label:e.$t("label.yearly"),value:"year"},{label:e.$t("label.custom"),value:"custom"}],d=e=>e.fixed?n.money(e==null?void 0:e.amount_off,{currency:e==null?void 0:e.currency}):(e==null?void 0:e.percent_off)+"%",m=i("coupon",{state:()=>({rows:[],permissions:{new:"coupons:new",edit:"coupons:edit",delete:"coupons:delete"}}),getters:{module:e=>({name:"Coupons",label:e.$t("label.coupons"),singular:e.$t("singular.coupon"),plural:e.$t("plural.coupons")}),columns:e=>[{name:"name",align:"left",label:e.$t("label.name"),field:"name",style:"width: 40px",sortable:!0},{name:"promotion_code",align:"left",label:e.$t("label.code"),field:"promotion_code",style:"width: 40px",sortable:!0},{name:"off",align:"left",label:e.$t("label.discount"),field:d,style:"width: 40px",sortable:!1},{name:"expires_at",align:"left",label:e.$t("label.expiredAt"),field:"expires_at",format:l=>n.formatAsDateOnly(l)||"No Expiry Date",style:"width: 40px",sortable:!0},{name:"created_at",align:"left",label:e.$t("label.createdAt"),field:"created_at",format:n.formatDateAsHuman,style:"width: 40px",sortable:!0},{name:"active",align:"left",label:e.$t("label.active"),field:"active",format:l=>l?"Yes":"No",style:"width: 40px",sortable:!0},{name:"actions",align:"right",sortable:!1}],actions:e=>[{label:e.$t("label.edit"),module:"Coupons",permission:"coupons:edit",action:"route",route:"Coupon",params:l=>({id:l.id}),query:l=>({action:"edit"}),icon:"fas fa-edit",deleted:!1},{label:e.$t("label.delete"),module:"Coupons",permission:"coupons:delete",action:"delete",icon:"fas fa-trash-alt",deleted:!1},{label:e.$t("label.restore"),module:"Coupons",permission:"coupons:delete",action:"restore",icon:"fas fa-trash-undo",deleted:!0}],toolbar:e=>[{label:e.$t("label.trashed"),action:"request",component:"base-toggle",dense:!0,key:"deleted",checkedIcon:"delete",deleted:"all",permission:"coupons:delete"},{title:e.$t("label.status"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"active",placeholder:e.$t("placeholder.select"),optionsDense:!0,style:"width: 150px",mapOptions:!0,emitValue:!0,options:c(e),prefix:e.$t("prefix.status"),deleted:"all"},{icon:"fad fa-plus-circle",module:"Coupons",permission:"coupons:new",action:"route",label:e.$t("label.addCoupon"),params:{id:"add"},route:"Coupon",color:"primary",deleted:"all"}],filters:e=>[],intervalOptions:r,durationOptions:u},actions:{get(e){return new Promise((l,a)=>{o.get("coupons",e).then(t=>{this.setRows(t.data),l(t)}).catch(t=>{a(t)})})},store(e){return new Promise((l,a)=>{o.post("coupons/store",e).then(t=>{l(t)}).catch(t=>{a(t)})})},show(e){return new Promise((l,a)=>{o.get(`coupons/${e}`).then(t=>{l(t)}).catch(t=>{a(t)})})},update(e){return new Promise((l,a)=>{o.put(`coupons/${e.id}`,e).then(t=>{l(t)}).catch(t=>{a(t)})})},delete(e){return new Promise((l,a)=>{o.delete(`coupons/${e}/destroy`).then(t=>{l(t)}).catch(t=>{a(t)})})},deleteSelected(e){return new Promise((l,a)=>{o.delete("coupons/destroy",{items:e}).then(t=>{l(t)}).catch(t=>{a(t)})})},restore(e){return new Promise((l,a)=>{o.post(`coupons/${e}/restore`).then(t=>{l(t)}).catch(t=>{a(t)})})},restoreSelected(e){return new Promise((l,a)=>{o.post("coupons/restore",{items:e}).then(t=>{l(t)}).catch(t=>{a(t)})})},changeActive(e){return new Promise((l,a)=>{o.post(`coupons/${e.id}/change-active`).then(t=>{e.active=!e.active;const{message:s}=t;n.success(s),l(t)}).catch(t=>{n.error(t),a(t)})})}}});export{m as u};
