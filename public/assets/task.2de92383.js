import{bt as d,c as r,A as s}from"./index.ec7eb99e.js";const o=e=>[{label:e.$t("label.pending"),value:"Pending"},{label:e.$t("label.ongoing"),value:"Ongoing"},{label:e.$t("label.resolved"),value:"Resolved"}],i=e=>[{label:e.$t("label.all"),value:"All"},{label:e.$t("label.live"),value:"Live"},{label:e.$t("label.archive"),value:"Archive"}],u=d("task",{state:()=>({rows:[],permissions:{new:"tasks:new",edit:"tasks:edit",delete:"tasks:delete"}}),getters:{module:e=>({name:"Tasks",label:e.$t("label.tasks"),singular:e.$t("singular.task"),plural:e.$t("plural.tasks")}),columns:e=>[{name:"id",align:"left",label:e.$t("label.task"),field:a=>a.subject,style:"width: 200px;",sortable:!0},{name:"created_at",align:"left",label:e.$t("label.createdAt"),field:"created_at",format:r.formatDateAsHuman,style:"width: 40px",sortable:!0},{name:"user",align:"left",label:e.$t("label.user"),field:"user",format:a=>a?`${a.name} (${a.email})`:"",style:"width: 40px",sortable:!1},{name:"users",align:"left",label:e.$t("label.assigned"),field:"users",style:"width: 40px",sortable:!1},{name:"is_archived",align:"center",label:e.$t("label.archived"),field:"is_archived",style:"width: 10px",format:a=>a?"Yes":"No",sortable:!1},{name:"status",align:"center",label:e.$t("label.status"),field:"status",style:"width: 40px",sortable:!0},{name:"last_reply",align:"left",label:e.$t("label.lastUpdate"),field:"last_reply",format:r.lastUpdate,style:"width: 40px",sortable:!0},{name:"actions",align:"right",sortable:!1}],actions:e=>[{label:e.$t("label.reply"),permission:["tasks:edit","tasks:view"],action:"route",route:"Task",params:a=>({id:a.id}),query:a=>({action:"edit"}),icon:"fas fa-paper-plane",deleted:!1},{label:e.$t("label.delete"),permission:"tasks:delete",action:"delete",icon:"fas fa-trash-alt",deleted:!1},{label:e.$t("label.restore"),permission:"tasks:delete",action:"restore",icon:"fas fa-trash-undo",deleted:!0}],toolbar:e=>[{label:e.$t("label.trashed"),action:"request",component:"base-toggle",dense:!0,key:"deleted",checkedIcon:"delete",permission:"tasks:delete",deleted:"all"},{title:e.$t("label.status"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"status",placeholder:e.$t("placeholder.select"),optionsDense:!0,style:"width: 180px",mapOptions:!0,emitValue:!0,options:i(e),deleted:"all",prefix:e.$t("prefix.status")},{icon:"fad fa-plus-circle",label:e.$t("label.createTask"),permission:"tasks:new",action:"route",params:{id:"add"},route:"Task",color:"primary",deleted:"all"}],filters:e=>[],statusOptions:i,status:o},actions:{get(e){return new Promise((a,l)=>{s.get("tasks",e).then(t=>{this.setRows(t.data),a(t)}).catch(t=>{l(t)})})},show(e){return new Promise((a,l)=>{s.get(`tasks/${e}`).then(t=>{a(t)}).catch(t=>{l(t)})})},store(e){return new Promise((a,l)=>{s.post("tasks/store",e).then(t=>{a(t)}).catch(t=>{l(t)})})},delete(e){return new Promise((a,l)=>{s.delete(`tasks/${e}/destroy`).then(t=>{a(t)}).catch(t=>{l(t)})})},deleteSelected(e){return new Promise((a,l)=>{s.delete("tasks/destroy",{items:e}).then(t=>{a(t)}).catch(t=>{l(t)})})},restore(e){return new Promise((a,l)=>{s.post(`tasks/${e}/restore`).then(t=>{a(t)}).catch(t=>{l(t)})})},restoreSelected(e){return new Promise((a,l)=>{s.post("tasks/restore",{items:e}).then(t=>{a(t)}).catch(t=>{l(t)})})},reply(e){return new Promise((a,l)=>{s.post(`tasks/${e.moduleId}/reply`,e).then(t=>{a(t)}).catch(t=>{l(t)})})},changeArchived(e){return new Promise((a,l)=>{s.post(`tasks/${e.id}/change-archived`).then(t=>{e.is_archived=!e.is_archived;const{message:n}=t;r.success(n),a(t)}).catch(t=>{r.error(t),l(t)})})}}});export{u};
