import{Q as p}from"./QBanner.29df4abb.js";import{Q as b}from"./QPopupProxy.64b9fae0.js";import{_ as h,T as C,U as T,d as l,o as R,e as $,w as o,h as a,ae as d,k as q,g as n,t as i,ad as f,ag as g,j as _,O as M}from"./index.ec7eb99e.js";import{Q}from"./QPage.b13c45b6.js";import{u as m}from"./task.2de92383.js";import{R as z,d as P}from"./mixins.af528ab3.js";import"./QMenu.76199ca9.js";import"./selection.571043d0.js";import"./StateSelect.d3ce42fc.js";import"./index.becf6c0c.js";import"./CitySelect.367b922a.js";import"./BaseSectionSkeleton.971da8dd.js";import"./QSkeleton.73bc54f6.js";import"./page.e7247b54.js";import"./QExpansionItem.38c12bfd.js";import"./QSlideTransition.d1b840b3.js";import"./SkeletonSinglePage.dba71dd3.js";const B={mixins:[z],data(){return{store:m(),pagination:{...P,sortBy:"last_reply",status:this.$route.meta.status}}},methods:{...C(m,["get","changeArchived"]),singleRoute(e){return{name:"Task",params:{id:e.id},query:{action:"edit",title:e.subject}}}},computed:{...T(m,["actions","rows","columns","module","toolbar","filters"])}},S={class:"ellipsis"},V=["innerHTML"],H=["innerHTML"];function L(e,t,U,j,u,A){const r=l("base-btn"),c=l("base-label"),k=l("base-status"),y=l("base-avatars"),w=l("base-table"),v=l("base-section");return R(),$(Q,{padding:""},{default:o(()=>[a(v,{flat:"",bordered:"","no-row":""},{default:o(()=>[a(w,{"hide-label":"",store:u.store,module:e.module,actions:e.actions,columns:e.columns,rows:e.rows,toolbar:e.toolbar,filters:e.filters,loading:e.loading,pagination:u.pagination,onRequest:e.onRequest,onToolbarClicked:e.toolbarClicked,onRowClicked:e.rowClicked,"no-data-label":e.$t("tasks.noData"),"table-key":"tasks",selection:"multiple",selected:e.selected,"onUpdate:selected":t[3]||(t[3]=s=>e.selected=s),"grid-columns":["status,id,user,last_reply,users"]},{"body-cell-id":o(s=>[a(r,{onClick:t[0]||(t[0]=d(()=>{},["stop"])),link:"",size:"12px",tag:"a",align:"left",to:{name:"Task",params:{id:s.row.id},query:{action:"edit",title:s.row.subject}},style:q(s.col.style)},{default:o(()=>[n("div",S,i(s.value),1)]),_:2},1032,["to","style"]),f(a(r,{class:"q-ml-xs",size:"md",link:"",color:"black",icon:"fal fa-align-left",onClick:t[1]||(t[1]=d(()=>{},["stop"]))},{default:o(()=>[a(b,null,{default:o(()=>[a(p,{style:{width:"350px"}},{default:o(()=>[a(c,null,{default:o(()=>[_(i(e.$t("label.message")),1)]),_:1}),n("span",{innerHTML:s.row.message},null,8,V)]),_:2},1024)]),_:2},1024)]),_:2},1536),[[g,s.row.message]])]),"body-cell-status":o(s=>[a(k,{type:s.value},null,8,["type"])]),"body-cell-users":o(s=>[a(y,{items:s.row.users,max:2,size:"30px"},null,8,["items"])]),"body-cell-is_archived":o(s=>[a(M,{"onUpdate:modelValue":D=>e.changeArchived(s.row),size:"sm",dense:"","model-value":s.row.is_archived,color:"green"},null,8,["onUpdate:modelValue","model-value"])]),"body-cell-last_reply":o(s=>[n("span",null,i(s.value),1),f(a(r,{class:"q-ml-sm",size:"md",link:"",color:"black",icon:"fal fa-align-left",onClick:t[2]||(t[2]=d(()=>{},["stop"]))},{default:o(()=>[a(b,null,{default:o(()=>[a(p,{style:{width:"350px"}},{default:o(()=>[a(c,null,{default:o(()=>[_(i(e.$t("lastMessage")),1)]),_:1}),n("span",{innerHTML:e.$core.nl2br(s.row.last_reply.message)},null,8,H)]),_:2},1024)]),_:2},1024)]),_:2},1536),[[g,s.row.last_reply]])]),_:1},8,["store","module","actions","columns","rows","toolbar","filters","loading","pagination","onRequest","onToolbarClicked","onRowClicked","no-data-label","selected"])]),_:1})]),_:1})}var te=h(B,[["render",L]]);export{te as default};
