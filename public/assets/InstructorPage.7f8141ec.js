import{m as f,T as x,_ as R,d as c,o as h,e as V,w as n,h as l,al as B,X as T,V as W,f as I,F as P,p as j,R as E,N as C,O as A,W as N,j as m,t as d,i as L,s as g,aq as M,g as i,ad as S,af as X,ck as G,cl as K,cr as Y,ae as k,ag as U}from"./index.ec7eb99e.js";import{Q as Z}from"./QSelect.ad394656.js";import{Q as $}from"./QPage.b13c45b6.js";import{S as ee}from"./SkeletonSinglePage.dba71dd3.js";import{u as se}from"./instructor.45275a2f.js";import{U as te}from"./UrlList.dea40f05.js";import{u as le}from"./class-list.c44a0226.js";import"./QField.ad3f8f9a.js";import"./QChip.cb7fa0e0.js";import"./QMenu.76199ca9.js";import"./selection.571043d0.js";import"./rtl.276c3f1b.js";import"./QSkeleton.73bc54f6.js";const oe={data(){return{selected:f.exports.cloneDeep(this.modelValue),classes:[],current_page:1,last_page:1,loading:!1,filter:this.query}},props:{modelValue:{required:!1,type:[Array],default:()=>[]},hint:[String],query:[String],title:{type:[String],default:"selectClasses"},loadFromServer:{type:[Boolean],required:!1,default:!0}},emits:["ok","hide"],methods:{...x(le,["get"]),onLoad(e){console.func("components/ClassSelector:methods.onLoad()",arguments),this.loading=!0,this.current_page=e.page,this.get({...e,filter:this.filter,rowsPerPage:10,sortBy:"name",direction:"asc",active:!0}).then(({data:t,meta:u})=>{const b=t.map(s=>{let a=this.selected.find(_=>_.id==s.id);return{...s,pivot:a?a.pivot:{}}});this.classes=f.exports.cloneDeep(b),this.current_page=u.current_page,this.last_page=u.last_page,this.loading=!1}).catch(()=>{this.loading=!1})},async show(){console.func("components/ClassSelector:methods.show()",arguments),this.$refs.dialog.show(),this.loadFromServer&&this.onLoad({page:this.current_page})},hide(){console.func("components/ClassSelector:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/ClassSelector:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/ClassSelector:methods.onDone()",arguments),this.$emit("ok",this.selected),this.hide()},onBrowse(e){console.func("components/ClassSelector:methods.onBrowse()",arguments),this.filter=e,this.onLoad({page:1})},onSelected(e){console.func("components/ClassSelector:methods.onSelected()",arguments),this.selected_classes.filter(u=>u===e.id).length?this.selected=this.selected.filter(u=>u.id!==e.id):this.selected.push(e)}},computed:{disable(){return JSON.stringify(this.selected)===JSON.stringify(this.modelValue)},selected_classes(){return this.selected.map(e=>e.id)}}},ne={class:"q-gutter-sm"};function ie(e,t,u,b,s,a){const _=c("base-input"),p=c("base-dialog");return h(),V(p,{title:e.$t(u.title),"body-class":"q-pa-none",ref:"dialog",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[l(B,null,{default:n(()=>[l(_,{dense:"",outlined:"",type:"text",modelValue:s.filter,"onUpdate:modelValue":[t[0]||(t[0]=r=>s.filter=r),t[1]||(t[1]=r=>a.onBrowse(r,"filter"))],clearable:"",debounce:"500",placeholder:e.$t("placeholder.searchClasses")},null,8,["modelValue","placeholder"])]),_:1}),l(T),l(W,{class:"bordered scroll",style:{"max-height":"50vh","min-height":"50vh"}},{default:n(()=>[s.loading?L("",!0):(h(!0),I(P,{key:0},j(s.classes,(r,v)=>(h(),V(E,{key:v,tag:"label"},{default:n(()=>[l(C,{style:{"min-width":"auto"},avatar:""},{default:n(()=>[l(A,{size:"sm",dense:"","model-value":a.selected_classes,"onUpdate:modelValue":D=>a.onSelected(r),val:r.id},null,8,["model-value","onUpdate:modelValue","val"])]),_:2},1024),l(C,null,{default:n(()=>[l(N,{class:"label"},{default:n(()=>[m(d(r.name),1)]),_:2},1024)]),_:2},1024),l(C,null,{default:n(()=>[l(N,{class:"label"},{default:n(()=>[m(d(r.cost),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[l(B,{class:"bg-white flex"},{default:n(()=>[u.loadFromServer?(h(),I(P,{key:0},[l(g,{disable:s.current_page<=1||s.loading,onClick:t[2]||(t[2]=r=>a.onLoad({page:s.current_page-1>=1?s.current_page-1:1})),dense:"",round:"",flat:"",color:"primary",icon:"fal fa-angle-left"},null,8,["disable"]),l(g,{disable:s.current_page==s.last_page||s.loading,onClick:t[3]||(t[3]=r=>a.onLoad({page:s.current_page+1<=s.last_page?s.current_page+1:1})),dense:"",round:"",flat:"",color:"primary",icon:"fal fa-angle-right"},null,8,["disable"])],64)):L("",!0),l(M),i("div",ne,[S(l(g,{"no-caps":"",outline:"",label:e.$t("cancel"),color:"grey"},null,8,["label"]),[[X]]),l(g,{disable:a.disable,"no-caps":"",label:e.$t("done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),loading:n(()=>[l(G,{showing:s.loading},{default:n(()=>[l(K,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1},8,["title","onHide"])}var ae=R(oe,[["render",ie]]);const O={status:"Active",avatar:null,urls:[],is_pt:!1,is_admin:!1,insurance:!1,qualification:!1,has_onlinefolder:!1,document:!1},re={components:{SkeletonSinglePage:ee,UrlList:te,FileSelector:Y},data(){return{default:f.exports.cloneDeep(O),instructor:f.exports.cloneDeep(O),loaded:!1,submited:!1,classes_columns:[{name:"name",align:"left",label:this.$t("label.class"),field:"name",style:"width: 100px",sortable:!0},{name:"cost",align:"left",label:this.$t("label.cost"),field:e=>e.pivot.cost,format:e=>this.$core.money(e),sortable:!0},{name:"actions",align:"right",field:"actions"}]}},methods:{...x(se,["store","show","update"]),onSubmit(e){console.func("pages/admins/instructors/InstructorPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.instructor).then(({data:u,message:b})=>{this.submited=!1,this.$q.notify(b),this.instructor=u,this.default=f.exports.cloneDeep(u),this.$router.push({name:"Instructor",params:{id:u.id},query:{action:"edit"}})}).catch(u=>{this.submited=!1,this.$core.error(u,{title:this.$t("dialog.title.error")})})},onReset(e){console.func("pages/admins/instructors/InstructorPage:methods.onReset()",arguments),this.loaded=!1,this.$nextTick(()=>{this.instructor=f.exports.cloneDeep(this.default),this.loaded=!0})},onCancel(e){console.func("pages/admins/instructors/InstructorPage:methods.onCancel()",arguments),this.$router.go(-1)},onBrowseClass(e){console.func("pages/admins/instructors/InstructorPage:methods.onBrowseClass()",arguments),this.$q.dialog({component:ae,componentProps:{query:e,modelValue:this.instructor.classes}}).onOk(t=>{console.func("pages/admins/instructors/InstructorPage:methods.onBrowseClass.onOk()",t),this.instructor.classes=t})},onRemoveClass({rowIndex:e}){console.func("pages/admins/instructors/InstructorPage:methods.onRemoveClass()",arguments),this.instructor.classes.splice(e,1)}},async mounted(){this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.instructor=e,this.default=f.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.instructor)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.instructor)!==JSON.stringify(this.default)}}},ue={class:"row q-col-gutter-md"},de={class:"col-xs-12 col-sm-9"},ce={class:"q-gutter-md"},me={class:"col-xs-12 col-sm-4"},pe={class:"col-xs-12 col-sm-4"},fe={class:"col-xs-12 col-sm-4"},he={class:"col-xs-12 col-sm-4"},ge={class:"col-xs-12 col-sm-2"},be={class:"col-xs-12 col-sm-2"},_e={class:"col-xs-12 col-sm-12"},Ve={class:"col-xs-12"},ve={class:"col-xs-12 col-sm-3"},ye={class:"col-xs-12"},Se={class:"col-xs-12"},qe={class:"col-xs-12"},we={class:"col-xs-12"},Ce={class:"col-xs-12"},ke={class:"col-xs-12"};function Ue(e,t,u,b,s,a){const _=c("base-page-header"),p=c("base-label"),r=c("base-input"),v=c("base-price-input"),D=c("url-list"),q=c("base-section"),F=c("base-btn"),H=c("base-table"),y=c("file-selector"),w=c("base-checkbox"),J=c("base-form"),z=c("skeleton-single-page");return h(),V($,{padding:""},{default:n(()=>[l(_,{class:"q-mb-md",title:a.creating?e.$t("createNew"):s.instructor.name,hint:e.$t("hint.instructor"),"no-tabs":""},null,8,["title","hint"]),s.loaded?(h(),V(J,{key:0,onSubmit:a.onSubmit,onCancel:a.onCancel,onReset:a.onReset,resetable:a.resetable,disable:a.disable,submited:s.submited},{default:n(()=>[i("div",ue,[i("div",de,[i("div",ce,[l(q,{flat:"",bordered:"",title:e.$t("generalInformation")},{default:n(()=>[i("div",me,[l(p,{required:""},{default:n(()=>[m(d(e.$t("firstName")),1)]),_:1}),l(r,{name:"first_name",modelValue:s.instructor.first_name,"onUpdate:modelValue":t[0]||(t[0]=o=>s.instructor.first_name=o)},null,8,["modelValue"])]),i("div",pe,[l(p,{required:""},{default:n(()=>[m(d(e.$t("surname")),1)]),_:1}),l(r,{name:"last_name",modelValue:s.instructor.last_name,"onUpdate:modelValue":t[1]||(t[1]=o=>s.instructor.last_name=o)},null,8,["modelValue"])]),i("div",fe,[l(p,{required:""},{default:n(()=>[m(d(e.$t("emailAddress")),1)]),_:1}),l(r,{modelValue:s.instructor.email,"onUpdate:modelValue":t[2]||(t[2]=o=>s.instructor.email=o),name:"email"},null,8,["modelValue"])]),i("div",he,[l(p,{required:""},{default:n(()=>[m(d(e.$t("phoneNumber")),1)]),_:1}),l(r,{modelValue:s.instructor.phone_number,"onUpdate:modelValue":t[3]||(t[3]=o=>s.instructor.phone_number=o),name:"phone_number",type:"tel"},null,8,["modelValue"])]),i("div",ge,[l(p,null,{default:n(()=>[m(d(e.$t("hoursPW")),1)]),_:1}),l(r,{type:"number",step:"1",min:"1",modelValue:s.instructor.hourspw,"onUpdate:modelValue":t[4]||(t[4]=o=>s.instructor.hourspw=o),name:"hourspw"},null,8,["modelValue"])]),i("div",be,[l(p,null,{default:n(()=>[m(d(e.$t("rentPW")),1)]),_:1}),l(v,{modelValue:s.instructor.rentpw,"onUpdate:modelValue":t[5]||(t[5]=o=>s.instructor.rentpw=o),name:"rentpw"},null,8,["modelValue"])]),i("div",_e,[l(p,{required:""},{default:n(()=>[m(d(e.$t("profileInfo")),1)]),_:1}),l(r,{type:"textarea",modelValue:s.instructor.description,"onUpdate:modelValue":t[6]||(t[6]=o=>s.instructor.description=o),name:"description"},null,8,["modelValue"])]),i("div",Ve,[l(D,{modelValue:s.instructor.urls,"onUpdate:modelValue":t[7]||(t[7]=o=>s.instructor.urls=o)},null,8,["modelValue"])])]),_:1},8,["title"]),l(q,{flat:"",bordered:"",title:e.$t("menus.classes"),"no-row":""},{default:n(()=>[l(r,{class:"q-mb-md",placeholder:e.$t("placeholder.searchClasses"),debounce:"500","onUpdate:modelValue":a.onBrowseClass},{after:n(()=>[l(g,{onClick:t[8]||(t[8]=o=>a.onBrowseClass("")),"no-caps":"",outline:"",padding:"9px",style:{width:"100px"},color:"primary",label:e.$t("browse")},null,8,["label"])]),_:1},8,["placeholder","onUpdate:modelValue"]),i("div",null,[l(H,{ref:"classes",columns:s.classes_columns,rows:s.instructor.classes,"hide-top":"","hide-pagination":"","rows-per-page-options":[0],"no-data-label":e.$t("classes.noData"),loaded:""},{"body-cell-name":n(o=>[l(F,{onClick:t[9]||(t[9]=k(()=>{},["stop"])),link:"",size:"12px",tag:"a",to:{name:"Class",params:{id:o.row.id},query:{action:"edit"}}},{default:n(()=>[m(d(o.value),1)]),_:2},1032,["to"])]),"body-cell-cost":n(o=>[l(v,{dense:"",borderless:"",onClick:t[10]||(t[10]=k(()=>{},["stop"])),modelValue:o.row.pivot.cost,"onUpdate:modelValue":Q=>o.row.pivot.cost=Q},null,8,["modelValue","onUpdate:modelValue"])]),actions:n(o=>[l(g,{onClick:k(Q=>a.onRemoveClass(o),["stop"]),size:"sm",round:"",flat:"",color:"grey",icon:"fas fa-trash-can"},null,8,["onClick"])]),_:1},8,["columns","rows","no-data-label"])])]),_:1},8,["title"])])]),i("div",ve,[l(q,{flat:"",bordered:"",title:e.$t("profileSettings")},{default:n(()=>[i("div",ye,[l(p,null,{default:n(()=>[m(d(e.$t("avatar")),1)]),_:1}),l(y,{accept:"image/*",icon:"fad fa-image","dialog-label":e.$t("uploadAvatar"),hint:e.$t("hint.images",{type:"avatar"}),"load-from-server":"",modelValue:s.instructor.avatar,"onUpdate:modelValue":t[11]||(t[11]=o=>s.instructor.avatar=o),query:o=>({...o,type:"image"})},null,8,["dialog-label","hint","modelValue","query"])]),i("div",Se,[l(p,null,{default:n(()=>[m(d(e.$t("label.status")),1)]),_:1}),l(Z,{modelValue:s.instructor.status,"onUpdate:modelValue":t[12]||(t[12]=o=>s.instructor.status=o),options:["Active","Deactive","Hold"],dense:"",outlined:""},null,8,["modelValue"])]),i("div",qe,[l(A,{dense:"",modelValue:s.instructor.is_pt,"onUpdate:modelValue":t[13]||(t[13]=o=>s.instructor.is_pt=o),label:e.$t("personalTrainer")},null,8,["modelValue","label"])]),i("div",we,[l(w,{"no-inline":"",dense:"",modelValue:s.instructor.insurance,"onUpdate:modelValue":t[14]||(t[14]=o=>s.instructor.insurance=o)},{default:n(()=>[i("div",null,d(e.$t("insurance")),1)]),_:1},8,["modelValue"]),S(l(y,{"use-controler":"",inline:"",class:"q-mt-sm",accept:"application/pdf",icon:"fad fa-file-pdf","dialog-label":e.$t("uploadInsurance"),hint:e.$t("hint.pdfs",{type:"insurance"}),"load-from-server":"",modelValue:s.instructor.insurance_file,"onUpdate:modelValue":t[15]||(t[15]=o=>s.instructor.insurance_file=o),query:o=>({...o,type:"application/pdf"})},null,8,["dialog-label","hint","modelValue","query"]),[[U,s.instructor.insurance]])]),i("div",Ce,[l(w,{"no-inline":"",dense:"",modelValue:s.instructor.qualification,"onUpdate:modelValue":t[16]||(t[16]=o=>s.instructor.qualification=o)},{default:n(()=>[i("div",null,d(e.$t("qualification")),1)]),_:1},8,["modelValue"]),S(l(y,{"use-controler":"",inline:"",class:"q-mt-sm",accept:"application/pdf",icon:"fad fa-file-pdf","dialog-label":e.$t("uploadQualification"),hint:e.$t("hint.pdfs",{type:"qualification"}),"load-from-server":"",modelValue:s.instructor.qualification_file,"onUpdate:modelValue":t[17]||(t[17]=o=>s.instructor.qualification_file=o),query:o=>({...o,type:"application/pdf"})},null,8,["dialog-label","hint","modelValue","query"]),[[U,s.instructor.qualification]])]),i("div",ke,[l(w,{"no-inline":"",dense:"",modelValue:s.instructor.document,"onUpdate:modelValue":t[18]||(t[18]=o=>s.instructor.document=o)},{default:n(()=>[i("div",null,d(e.$t("document")),1)]),_:1},8,["modelValue"]),S(l(y,{"use-controler":"",inline:"",class:"q-mt-sm",accept:"application/pdf",icon:"fad fa-file-pdf","dialog-label":e.$t("uploadDocument"),hint:e.$t("hint.pdfs",{type:"document"}),"load-from-server":"",modelValue:s.instructor.document_file,"onUpdate:modelValue":t[19]||(t[19]=o=>s.instructor.document_file=o),query:o=>({...o,type:"application/pdf"})},null,8,["dialog-label","hint","modelValue","query"]),[[U,s.instructor.document]])])]),_:1},8,["title"])])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(h(),V(z,{key:1}))]),_:1})}var Je=R(re,[["render",Ue]]);export{Je as default};
